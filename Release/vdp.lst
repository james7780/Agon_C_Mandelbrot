Zilog eZ80 Macro Assembler Version 4.3 (19073001)06-Mar-23     12:27:22     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\vdp.c"
                           A     5    	.assume ADL=1
                           A     6    	SEGMENT CODE
                           A     7    ;    1	#include <defines.h>
                           A     8    ;    2	#include "mos-interface.h"
                           A     9    ;    3	
                           A    10    ;    4	// Generic functions
                           A    11    ;    5	
                           A    12    ;    6	void write16bit(UINT16 w)
                           A    13    ;    7	{
000000                     A    14    _write16bit:
000000 CD 00 00 00         A    15    	CALL	__frameset0
                           A    16    ;    8		putch(w & 0xFF); // write LSB
000004 DD0706              A    17    	LD	BC,(IX+%6)
000007 CD 00 00 00         A    18    	CALL	__stoiu
00000B 7D                  A    19    	LD	A,L
00000C B7ED62              A    20    	UEXT	HL
00000F 6F                  A    21    	LD	L,A
000010 E5                  A    22    	PUSH	HL
000011 CD 00 00 00         A    23    	CALL	_putch
000015 C1                  A    24    	POP	BC
                           A    25    ;    9		putch(w >> 8);	 // write MSB	
000016 DD0706              A    26    	LD	BC,(IX+%6)
000019 CD 00 00 00         A    27    	CALL	__stoiu
00001D 3E08                A    28    	LD	A,%8
00001F CD 00 00 00         A    29    	CALL	__ishrs_b
000023 E5                  A    30    	PUSH	HL
000024 CD 00 00 00         A    31    	CALL	_putch
000028 C1                  A    32    	POP	BC
                           A    33    ;   10	}
000029 DDF9                A    34    	LD	SP,IX
00002B DDE1                A    35    	POP	IX
00002D C9                  A    36    	RET	
                           A    37    
                           A    38    
                           A    39    ;**************************** _write16bit *****
                           A    40    ;Name                         Addr/Register   S
                           A    41    ;_putch                              IMPORT  --
                           A    42    ;w                                     IX+6    
                           A    43    
                           A    44    
                           A    45    ; Stack Frame Size: 9 (bytes)
                           A    46    ;       Spill Code: 0 (instruction)
                           A    47    
                           A    48    
                           A    49    ;   11	
                           A    50    ;   12	void write32bit(UINT32 l)
                           A    51    ;   13	{
00002E                     A    52    _write32bit:
00002E 21FCFFFF            A    53    	LD	HL,-4
000032 CD 00 00 00         A    54    	CALL	__frameset
                           A    55    ;   14		UINT32 temp = l;
                           A    56    ;   15		
                           A    57    ;   16		putch(temp & 0xFF); // write LSB
000036 DD2706              A    58    	LD	HL,(IX+%6)
000039 7D                  A    59    	LD	A,L
00003A B7ED62              A    60    	UEXT	HL
00003D 6F                  A    61    	LD	L,A
00003E E5                  A    62    	PUSH	HL
00003F CD 00 00 00         A    63    	CALL	_putch
000043 C1                  A    64    	POP	BC
                           A    65    ;   17		temp = temp >> 8;
000044 DD0706              A    66    	LD	BC,(IX+%6)
000047 DD7E09              A    67    	LD	A,(IX+%9)
00004A 2E08                A    68    	LD	L,%8
00004C CD 00 00 00         A    69    	CALL	__lshru
000050 DD0FFC              A    70    	LD	(IX+%FFFFFFFC),BC
000053 DD77FF              A    71    	LD	(IX+%FFFFFFFF),A
                           A    72    ;   18		putch(temp & 0xFF);
000056 C5E1                A    73    	LD	HL,BC
000058 7D                  A    74    	LD	A,L
000059 B7ED62              A    75    	UEXT	HL
00005C 6F                  A    76    	LD	L,A
00005D E5                  A    77    	PUSH	HL
00005E CD 00 00 00         A    78    	CALL	_putch
000062 C1                  A    79    	POP	BC
                           A    80    ;   19		temp = temp >> 8;
000063 DD07FC              A    81    	LD	BC,(IX+%FFFFFFFC)
000066 DD7EFF              A    82    	LD	A,(IX+%FFFFFFFF)
000069 2E08                A    83    	LD	L,%8
00006B CD 00 00 00         A    84    	CALL	__lshru
00006F DD0FFC              A    85    	LD	(IX+%FFFFFFFC),BC
000072 DD77FF              A    86    	LD	(IX+%FFFFFFFF),A
                           A    87    ;   20		putch(temp & 0xFF);
000075 C5E1                A    88    	LD	HL,BC
000077 7D                  A    89    	LD	A,L
000078 B7ED62              A    90    	UEXT	HL
00007B 6F                  A    91    	LD	L,A
00007C E5                  A    92    	PUSH	HL
00007D CD 00 00 00         A    93    	CALL	_putch
000081 C1                  A    94    	POP	BC
                           A    95    ;   21		temp = temp >> 8;
000082 DD07FC              A    96    	LD	BC,(IX+%FFFFFFFC)
000085 DD7EFF              A    97    	LD	A,(IX+%FFFFFFFF)
000088 2E08                A    98    	LD	L,%8
00008A CD 00 00 00         A    99    	CALL	__lshru
00008E DD0FFC              A   100    	LD	(IX+%FFFFFFFC),BC
000091 DD77FF              A   101    	LD	(IX+%FFFFFFFF),A
                           A   102    ;   22		putch(temp & 0xFF);
000094 C5E1                A   103    	LD	HL,BC
000096 7D                  A   104    	LD	A,L
000097 B7ED62              A   105    	UEXT	HL
00009A 6F                  A   106    	LD	L,A
00009B E5                  A   107    	PUSH	HL
00009C CD 00 00 00         A   108    	CALL	_putch
0000A0 C1                  A   109    	POP	BC
                           A   110    ;   23		return;	
                           A   111    ;   24	}
0000A1 DDF9                A   112    	LD	SP,IX
0000A3 DDE1                A   113    	POP	IX
0000A5 C9                  A   114    	RET	
                           A   115    
                           A   116    
                           A   117    ;**************************** _write32bit *****
                           A   118    ;Name                         Addr/Register   S
                           A   119    ;_putch                              IMPORT  --
                           A   120    ;temp                                  IX-4    
                           A   121    ;l                                     IX+6    
                           A   122    
                           A   123    
                           A   124    ; Stack Frame Size: 16 (bytes)
                           A   125    ;       Spill Code: 0 (instruction)
                           A   126    
                           A   127    
                           A   128    ;   25	
                           A   129    ;   26	void vdp_mode(unsigned char mode)
                           A   130    ;   27	{
0000A6                     A   131    _vdp_mode:
0000A6 CD 00 00 00         A   132    	CALL	__frameset0
                           A   133    ;   28	    putch(22);
0000AA 01160000            A   134    	LD	BC,22
0000AE C5                  A   135    	PUSH	BC
0000AF CD 00 00 00         A   136    	CALL	_putch
0000B3 C1                  A   137    	POP	BC
                           A   138    ;   29	    putch(mode);
0000B4 DD7E06              A   139    	LD	A,(IX+%6)
0000B7 B7ED62              A   140    	UEXT	HL
0000BA 6F                  A   141    	LD	L,A
0000BB E5                  A   142    	PUSH	HL
0000BC CD 00 00 00         A   143    	CALL	_putch
0000C0 C1                  A   144    	POP	BC
                           A   145    ;   30	}
0000C1 DDF9                A   146    	LD	SP,IX
0000C3 DDE1                A   147    	POP	IX
0000C5 C9                  A   148    	RET	
                           A   149    
                           A   150    
                           A   151    ;**************************** _vdp_mode *******
                           A   152    ;Name                         Addr/Register   S
                           A   153    ;_putch                              IMPORT  --
                           A   154    ;mode                                  IX+6    
                           A   155    
                           A   156    
                           A   157    ; Stack Frame Size: 9 (bytes)
                           A   158    ;       Spill Code: 0 (instruction)
                           A   159    
                           A   160    
                           A   161    ;   31	
                           A   162    ;   32	// Text functions
                           A   163    ;   33	void vdp_cls()
                           A   164    ;   34	{
0000C6                     A   165    _vdp_cls:
                           A   166    ;   35	    putch(12);
0000C6 010C0000            A   167    	LD	BC,12
0000CA C5                  A   168    	PUSH	BC
0000CB CD 00 00 00         A   169    	CALL	_putch
0000CF C1                  A   170    	POP	BC
                           A   171    ;   36	}
0000D0 C9                  A   172    	RET	
                           A   173    
                           A   174    
                           A   175    ;**************************** _vdp_cls ********
                           A   176    ;Name                         Addr/Register   S
                           A   177    ;_putch                              IMPORT  --
                           A   178    
                           A   179    
                           A   180    ; Stack Frame Size: 6 (bytes)
                           A   181    ;       Spill Code: 0 (instruction)
                           A   182    
                           A   183    
                           A   184    ;   37	
                           A   185    ;   38	void vdp_cursorHome()
                           A   186    ;   39	{
0000D1                     A   187    _vdp_cursorHome:
                           A   188    ;   40	    putch(30);
0000D1 011E0000            A   189    	LD	BC,30
0000D5 C5                  A   190    	PUSH	BC
0000D6 CD 00 00 00         A   191    	CALL	_putch
0000DA C1                  A   192    	POP	BC
                           A   193    ;   41	}
0000DB C9                  A   194    	RET	
                           A   195    
                           A   196    
                           A   197    ;**************************** _vdp_cursorHome *
                           A   198    ;Name                         Addr/Register   S
                           A   199    ;_putch                              IMPORT  --
                           A   200    
                           A   201    
                           A   202    ; Stack Frame Size: 6 (bytes)
                           A   203    ;       Spill Code: 0 (instruction)
                           A   204    
                           A   205    
                           A   206    ;   42	
                           A   207    ;   43	void vdp_cursorUp()
                           A   208    ;   44	{
0000DC                     A   209    _vdp_cursorUp:
                           A   210    ;   45	    putch(11);
0000DC 010B0000            A   211    	LD	BC,11
0000E0 C5                  A   212    	PUSH	BC
0000E1 CD 00 00 00         A   213    	CALL	_putch
0000E5 C1                  A   214    	POP	BC
                           A   215    ;   46	}
0000E6 C9                  A   216    	RET	
                           A   217    
                           A   218    
                           A   219    ;**************************** _vdp_cursorUp ***
                           A   220    ;Name                         Addr/Register   S
                           A   221    ;_putch                              IMPORT  --
                           A   222    
                           A   223    
                           A   224    ; Stack Frame Size: 6 (bytes)
                           A   225    ;       Spill Code: 0 (instruction)
                           A   226    
                           A   227    
                           A   228    ;   47	
                           A   229    ;   48	void vdp_cursorGoto(unsigned char x, un
                           A   230    ;   49	{
0000E7                     A   231    _vdp_cursorGoto:
0000E7 CD 00 00 00         A   232    	CALL	__frameset0
                           A   233    ;   50	    putch(31); // TAB
0000EB 011F0000            A   234    	LD	BC,31
0000EF C5                  A   235    	PUSH	BC
0000F0 CD 00 00 00         A   236    	CALL	_putch
0000F4 C1                  A   237    	POP	BC
                           A   238    ;   51	    putch(x);
0000F5 DD7E06              A   239    	LD	A,(IX+%6)
0000F8 B7ED62              A   240    	UEXT	HL
0000FB 6F                  A   241    	LD	L,A
0000FC E5                  A   242    	PUSH	HL
0000FD CD 00 00 00         A   243    	CALL	_putch
000101 C1                  A   244    	POP	BC
                           A   245    ;   52	    putch(y);
000102 DD7E09              A   246    	LD	A,(IX+%9)
000105 B7ED62              A   247    	UEXT	HL
000108 6F                  A   248    	LD	L,A
000109 E5                  A   249    	PUSH	HL
00010A CD 00 00 00         A   250    	CALL	_putch
00010E C1                  A   251    	POP	BC
                           A   252    ;   53	}
00010F DDF9                A   253    	LD	SP,IX
000111 DDE1                A   254    	POP	IX
000113 C9                  A   255    	RET	
                           A   256    
                           A   257    
                           A   258    ;**************************** _vdp_cursorGoto *
                           A   259    ;Name                         Addr/Register   S
                           A   260    ;_putch                              IMPORT  --
                           A   261    ;y                                     IX+9    
                           A   262    ;x                                     IX+6    
                           A   263    
                           A   264    
                           A   265    ; Stack Frame Size: 12 (bytes)
                           A   266    ;       Spill Code: 0 (instruction)
                           A   267    
                           A   268    
                           A   269    ;   54	
                           A   270    ;   55	void vdp_colour(unsigned char foregroun
                           A   271    ;   56	{
000114                     A   272    _vdp_colour:
000114 21FDFFFF            A   273    	LD	HL,-3
000118 CD 00 00 00         A   274    	CALL	__frameset
                           A   275    ;   57	    putch(17); // COLOUR
00011C 01110000            A   276    	LD	BC,17
000120 C5                  A   277    	PUSH	BC
000121 CD 00 00 00         A   278    	CALL	_putch
000125 C1                  A   279    	POP	BC
                           A   280    ;   58	    putch(!foreground);
000126 DD7E06              A   281    	LD	A,(IX+%6)
000129 B7                  A   282    	OR	A,A
00012A 20 09               A   283    	JR	NZ,L_8
00012C 01010000            A   284    	LD	BC,1
000130 DD0FFD              A   285    	LD	(IX+%FFFFFFFD),BC
000133 18 07               A   286    	JR	L_9
000135                     A   287    L_8:
000135 01000000            A   288    	LD	BC,0
000139 DD0FFD              A   289    	LD	(IX+%FFFFFFFD),BC
00013C                     A   290    L_9:
00013C DD07FD              A   291    	LD	BC,(IX+%FFFFFFFD)
00013F C5                  A   292    	PUSH	BC
000140 CD 00 00 00         A   293    	CALL	_putch
000144 C1                  A   294    	POP	BC
                           A   295    ;   59	    putch(r);
000145 DD7E09              A   296    	LD	A,(IX+%9)
000148 B7ED62              A   297    	UEXT	HL
00014B 6F                  A   298    	LD	L,A
00014C E5                  A   299    	PUSH	HL
00014D CD 00 00 00         A   300    	CALL	_putch
000151 C1                  A   301    	POP	BC
                           A   302    ;   60	    putch(g);
000152 DD7E0C              A   303    	LD	A,(IX+%C)
000155 B7ED62              A   304    	UEXT	HL
000158 6F                  A   305    	LD	L,A
000159 E5                  A   306    	PUSH	HL
00015A CD 00 00 00         A   307    	CALL	_putch
00015E C1                  A   308    	POP	BC
                           A   309    ;   61	    putch(b);
00015F DD7E0F              A   310    	LD	A,(IX+%F)
000162 B7ED62              A   311    	UEXT	HL
000165 6F                  A   312    	LD	L,A
000166 E5                  A   313    	PUSH	HL
000167 CD 00 00 00         A   314    	CALL	_putch
00016B C1                  A   315    	POP	BC
                           A   316    ;   62	}
00016C DDF9                A   317    	LD	SP,IX
00016E DDE1                A   318    	POP	IX
000170 C9                  A   319    	RET	
                           A   320    
                           A   321    
                           A   322    ;**************************** _vdp_colour *****
                           A   323    ;Name                         Addr/Register   S
                           A   324    ;_putch                              IMPORT  --
                           A   325    ;temp10                                IX-3    
                           A   326    ;b                                    IX+15    
                           A   327    ;g                                    IX+12    
                           A   328    ;r                                     IX+9    
                           A   329    ;foreground                            IX+6    
                           A   330    
                           A   331    
                           A   332    ; Stack Frame Size: 21 (bytes)
                           A   333    ;       Spill Code: 0 (instruction)
                           A   334    
                           A   335    
                           A   336    ;   63	
                           A   337    ;   64	void vdp_fgcolour(unsigned char r, unsi
                           A   338    ;   65	{
000171                     A   339    _vdp_fgcolour:
000171 CD 00 00 00         A   340    	CALL	__frameset0
                           A   341    ;   66	    vdp_colour(1,r,g,b);
000175 DD4E0C              A   342    	LD	C,(IX+%C)
000178 0600                A   343    	LD	B,%0
00017A C5                  A   344    	PUSH	BC
00017B DD4E09              A   345    	LD	C,(IX+%9)
00017E C5                  A   346    	PUSH	BC
00017F DD4E06              A   347    	LD	C,(IX+%6)
000182 C5                  A   348    	PUSH	BC
000183 01010000            A   349    	LD	BC,1
000187 C5                  A   350    	PUSH	BC
000188 CD 14 01 00         A   351    	CALL	_vdp_colour
00018C C1                  A   352    	POP	BC
00018D C1                  A   353    	POP	BC
00018E C1                  A   354    	POP	BC
00018F C1                  A   355    	POP	BC
                           A   356    ;   67	}
000190 DDF9                A   357    	LD	SP,IX
000192 DDE1                A   358    	POP	IX
000194 C9                  A   359    	RET	
                           A   360    
                           A   361    
                           A   362    ;**************************** _vdp_fgcolour ***
                           A   363    ;Name                         Addr/Register   S
                           A   364    ;b                                    IX+12    
                           A   365    ;g                                     IX+9    
                           A   366    ;r                                     IX+6    
                           A   367    
                           A   368    
                           A   369    ; Stack Frame Size: 15 (bytes)
                           A   370    ;       Spill Code: 0 (instruction)
                           A   371    
                           A   372    
                           A   373    ;   68	
                           A   374    ;   69	void vdp_bgcolour(unsigned char r, unsi
                           A   375    ;   70	{
000195                     A   376    _vdp_bgcolour:
000195 CD 00 00 00         A   377    	CALL	__frameset0
                           A   378    ;   71	    vdp_colour(0,r,g,b);
000199 DD4E0C              A   379    	LD	C,(IX+%C)
00019C 0600                A   380    	LD	B,%0
00019E C5                  A   381    	PUSH	BC
00019F DD4E09              A   382    	LD	C,(IX+%9)
0001A2 C5                  A   383    	PUSH	BC
0001A3 DD4E06              A   384    	LD	C,(IX+%6)
0001A6 C5                  A   385    	PUSH	BC
0001A7 01000000            A   386    	LD	BC,0
0001AB C5                  A   387    	PUSH	BC
0001AC CD 14 01 00         A   388    	CALL	_vdp_colour
0001B0 C1                  A   389    	POP	BC
0001B1 C1                  A   390    	POP	BC
0001B2 C1                  A   391    	POP	BC
0001B3 C1                  A   392    	POP	BC
                           A   393    ;   72	}
0001B4 DDF9                A   394    	LD	SP,IX
0001B6 DDE1                A   395    	POP	IX
0001B8 C9                  A   396    	RET	
                           A   397    
                           A   398    
                           A   399    ;**************************** _vdp_bgcolour ***
                           A   400    ;Name                         Addr/Register   S
                           A   401    ;b                                    IX+12    
                           A   402    ;g                                     IX+9    
                           A   403    ;r                                     IX+6    
                           A   404    
                           A   405    
                           A   406    ; Stack Frame Size: 15 (bytes)
                           A   407    ;       Spill Code: 0 (instruction)
                           A   408    
                           A   409    
                           A   410    ;   73	
                           A   411    ;   74	//
                           A   412    ;   75	// Graphics functions
                           A   413    ;   76	//
                           A   414    ;   77	
                           A   415    ;   78	void vdp_clearGraphics()
                           A   416    ;   79	{
0001B9                     A   417    _vdp_clearGraphics:
                           A   418    ;   80	    putch(16);    
0001B9 01100000            A   419    	LD	BC,16
0001BD C5                  A   420    	PUSH	BC
0001BE CD 00 00 00         A   421    	CALL	_putch
0001C2 C1                  A   422    	POP	BC
                           A   423    ;   81	}
0001C3 C9                  A   424    	RET	
                           A   425    
                           A   426    
                           A   427    ;**************************** _vdp_clearGraphic
                           A   428    ;Name                         Addr/Register   S
                           A   429    ;_putch                              IMPORT  --
                           A   430    
                           A   431    
                           A   432    ; Stack Frame Size: 6 (bytes)
                           A   433    ;       Spill Code: 0 (instruction)
                           A   434    
                           A   435    
                           A   436    ;   82	
                           A   437    ;   83	void vdp_plotColour(unsigned char r, un
                           A   438    ;   84	{
0001C4                     A   439    _vdp_plotColour:
0001C4 CD 00 00 00         A   440    	CALL	__frameset0
                           A   441    ;   85	    putch(18); // GCOL
0001C8 01120000            A   442    	LD	BC,18
0001CC C5                  A   443    	PUSH	BC
0001CD CD 00 00 00         A   444    	CALL	_putch
0001D1 C1                  A   445    	POP	BC
                           A   446    ;   86	    putch(0);
0001D2 01000000            A   447    	LD	BC,0
0001D6 C5                  A   448    	PUSH	BC
0001D7 CD 00 00 00         A   449    	CALL	_putch
0001DB C1                  A   450    	POP	BC
                           A   451    ;   87	    putch(r);
0001DC DD7E06              A   452    	LD	A,(IX+%6)
0001DF B7ED62              A   453    	UEXT	HL
0001E2 6F                  A   454    	LD	L,A
0001E3 E5                  A   455    	PUSH	HL
0001E4 CD 00 00 00         A   456    	CALL	_putch
0001E8 C1                  A   457    	POP	BC
                           A   458    ;   88	    putch(g);
0001E9 DD7E09              A   459    	LD	A,(IX+%9)
0001EC B7ED62              A   460    	UEXT	HL
0001EF 6F                  A   461    	LD	L,A
0001F0 E5                  A   462    	PUSH	HL
0001F1 CD 00 00 00         A   463    	CALL	_putch
0001F5 C1                  A   464    	POP	BC
                           A   465    ;   89	    putch(b);
0001F6 DD7E0C              A   466    	LD	A,(IX+%C)
0001F9 B7ED62              A   467    	UEXT	HL
0001FC 6F                  A   468    	LD	L,A
0001FD E5                  A   469    	PUSH	HL
0001FE CD 00 00 00         A   470    	CALL	_putch
000202 C1                  A   471    	POP	BC
                           A   472    ;   90	}
000203 DDF9                A   473    	LD	SP,IX
000205 DDE1                A   474    	POP	IX
000207 C9                  A   475    	RET	
                           A   476    
                           A   477    
                           A   478    ;**************************** _vdp_plotColour *
                           A   479    ;Name                         Addr/Register   S
                           A   480    ;_putch                              IMPORT  --
                           A   481    ;b                                    IX+12    
                           A   482    ;g                                     IX+9    
                           A   483    ;r                                     IX+6    
                           A   484    
                           A   485    
                           A   486    ; Stack Frame Size: 15 (bytes)
                           A   487    ;       Spill Code: 0 (instruction)
                           A   488    
                           A   489    
                           A   490    ;   91	
                           A   491    ;   92	// internal function
                           A   492    ;   93	void vdp_plot(unsigned char mode, unsig
                           A   493    ;   94	{
000208                     A   494    _vdp_plot:
000208 CD 00 00 00         A   495    	CALL	__frameset0
                           A   496    ;   95	    putch(25); // PLOT
00020C 01190000            A   497    	LD	BC,25
000210 C5                  A   498    	PUSH	BC
000211 CD 00 00 00         A   499    	CALL	_putch
000215 C1                  A   500    	POP	BC
                           A   501    ;   96	    putch(mode);
000216 DD7E06              A   502    	LD	A,(IX+%6)
000219 B7ED62              A   503    	UEXT	HL
00021C 6F                  A   504    	LD	L,A
00021D E5                  A   505    	PUSH	HL
00021E CD 00 00 00         A   506    	CALL	_putch
000222 C1                  A   507    	POP	BC
                           A   508    ;   97	    putch(x & 0xFF);
000223 DD7E09              A   509    	LD	A,(IX+%9)
000226 B7ED62              A   510    	UEXT	HL
000229 6F                  A   511    	LD	L,A
00022A E5                  A   512    	PUSH	HL
00022B CD 00 00 00         A   513    	CALL	_putch
00022F C1                  A   514    	POP	BC
                           A   515    ;   98	    putch(x >> 8);
000230 DD2709              A   516    	LD	HL,(IX+%9)
000233 3E08                A   517    	LD	A,%8
000235 CD 00 00 00         A   518    	CALL	__ishru_b
000239 E5                  A   519    	PUSH	HL
00023A CD 00 00 00         A   520    	CALL	_putch
00023E C1                  A   521    	POP	BC
                           A   522    ;   99	    putch(y & 0xFF);
00023F DD7E0C              A   523    	LD	A,(IX+%C)
000242 B7ED62              A   524    	UEXT	HL
000245 6F                  A   525    	LD	L,A
000246 E5                  A   526    	PUSH	HL
000247 CD 00 00 00         A   527    	CALL	_putch
00024B C1                  A   528    	POP	BC
                           A   529    ;  100	    putch(y >> 8);
00024C DD270C              A   530    	LD	HL,(IX+%C)
00024F 3E08                A   531    	LD	A,%8
000251 CD 00 00 00         A   532    	CALL	__ishru_b
000255 E5                  A   533    	PUSH	HL
000256 CD 00 00 00         A   534    	CALL	_putch
00025A C1                  A   535    	POP	BC
                           A   536    ;  101	}
00025B DDF9                A   537    	LD	SP,IX
00025D DDE1                A   538    	POP	IX
00025F C9                  A   539    	RET	
                           A   540    
                           A   541    
                           A   542    ;**************************** _vdp_plot *******
                           A   543    ;Name                         Addr/Register   S
                           A   544    ;_putch                              IMPORT  --
                           A   545    ;y                                    IX+12    
                           A   546    ;x                                     IX+9    
                           A   547    ;mode                                  IX+6    
                           A   548    
                           A   549    
                           A   550    ; Stack Frame Size: 15 (bytes)
                           A   551    ;       Spill Code: 0 (instruction)
                           A   552    
                           A   553    
                           A   554    ;  102	
                           A   555    ;  103	void vdp_plotMoveTo(unsigned int x, uns
                           A   556    ;  104	{
000260                     A   557    _vdp_plotMoveTo:
000260 CD 00 00 00         A   558    	CALL	__frameset0
                           A   559    ;  105		vdp_plot(0x04,x,y);
000264 DD0709              A   560    	LD	BC,(IX+%9)
000267 C5                  A   561    	PUSH	BC
000268 DD0706              A   562    	LD	BC,(IX+%6)
00026B C5                  A   563    	PUSH	BC
00026C 01040000            A   564    	LD	BC,4
000270 C5                  A   565    	PUSH	BC
000271 CD 08 02 00         A   566    	CALL	_vdp_plot
000275 C1                  A   567    	POP	BC
000276 C1                  A   568    	POP	BC
000277 C1                  A   569    	POP	BC
                           A   570    ;  106	}
000278 DDF9                A   571    	LD	SP,IX
00027A DDE1                A   572    	POP	IX
00027C C9                  A   573    	RET	
                           A   574    
                           A   575    
                           A   576    ;**************************** _vdp_plotMoveTo *
                           A   577    ;Name                         Addr/Register   S
                           A   578    ;y                                     IX+9    
                           A   579    ;x                                     IX+6    
                           A   580    
                           A   581    
                           A   582    ; Stack Frame Size: 12 (bytes)
                           A   583    ;       Spill Code: 0 (instruction)
                           A   584    
                           A   585    
                           A   586    ;  107	
                           A   587    ;  108	void vdp_plotLineTo(unsigned int x, uns
                           A   588    ;  109	{
00027D                     A   589    _vdp_plotLineTo:
00027D CD 00 00 00         A   590    	CALL	__frameset0
                           A   591    ;  110		vdp_plot(0x05,x,y);
000281 DD0709              A   592    	LD	BC,(IX+%9)
000284 C5                  A   593    	PUSH	BC
000285 DD0706              A   594    	LD	BC,(IX+%6)
000288 C5                  A   595    	PUSH	BC
000289 01050000            A   596    	LD	BC,5
00028D C5                  A   597    	PUSH	BC
00028E CD 08 02 00         A   598    	CALL	_vdp_plot
000292 C1                  A   599    	POP	BC
000293 C1                  A   600    	POP	BC
000294 C1                  A   601    	POP	BC
                           A   602    ;  111	}
000295 DDF9                A   603    	LD	SP,IX
000297 DDE1                A   604    	POP	IX
000299 C9                  A   605    	RET	
                           A   606    
                           A   607    
                           A   608    ;**************************** _vdp_plotLineTo *
                           A   609    ;Name                         Addr/Register   S
                           A   610    ;y                                     IX+9    
                           A   611    ;x                                     IX+6    
                           A   612    
                           A   613    
                           A   614    ; Stack Frame Size: 12 (bytes)
                           A   615    ;       Spill Code: 0 (instruction)
                           A   616    
                           A   617    
                           A   618    ;  112	
                           A   619    ;  113	void vdp_plotPoint(unsigned int x, unsi
                           A   620    ;  114	{
00029A                     A   621    _vdp_plotPoint:
00029A CD 00 00 00         A   622    	CALL	__frameset0
                           A   623    ;  115		vdp_plot(0x40,x,y);
00029E DD0709              A   624    	LD	BC,(IX+%9)
0002A1 C5                  A   625    	PUSH	BC
0002A2 DD0706              A   626    	LD	BC,(IX+%6)
0002A5 C5                  A   627    	PUSH	BC
0002A6 01400000            A   628    	LD	BC,64
0002AA C5                  A   629    	PUSH	BC
0002AB CD 08 02 00         A   630    	CALL	_vdp_plot
0002AF C1                  A   631    	POP	BC
0002B0 C1                  A   632    	POP	BC
0002B1 C1                  A   633    	POP	BC
                           A   634    ;  116	}
0002B2 DDF9                A   635    	LD	SP,IX
0002B4 DDE1                A   636    	POP	IX
0002B6 C9                  A   637    	RET	
                           A   638    
                           A   639    
                           A   640    ;**************************** _vdp_plotPoint **
                           A   641    ;Name                         Addr/Register   S
                           A   642    ;y                                     IX+9    
                           A   643    ;x                                     IX+6    
                           A   644    
                           A   645    
                           A   646    ; Stack Frame Size: 12 (bytes)
                           A   647    ;       Spill Code: 0 (instruction)
                           A   648    
                           A   649    
                           A   650    ;  117	
                           A   651    ;  118	void vdp_plotTriangle(unsigned int x, u
                           A   652    ;  119	{
0002B7                     A   653    _vdp_plotTriangle:
0002B7 CD 00 00 00         A   654    	CALL	__frameset0
                           A   655    ;  120		vdp_plot(0x50,x,y);
0002BB DD0709              A   656    	LD	BC,(IX+%9)
0002BE C5                  A   657    	PUSH	BC
0002BF DD0706              A   658    	LD	BC,(IX+%6)
0002C2 C5                  A   659    	PUSH	BC
0002C3 01500000            A   660    	LD	BC,80
0002C7 C5                  A   661    	PUSH	BC
0002C8 CD 08 02 00         A   662    	CALL	_vdp_plot
0002CC C1                  A   663    	POP	BC
0002CD C1                  A   664    	POP	BC
0002CE C1                  A   665    	POP	BC
                           A   666    ;  121	}
0002CF DDF9                A   667    	LD	SP,IX
0002D1 DDE1                A   668    	POP	IX
0002D3 C9                  A   669    	RET	
                           A   670    
                           A   671    
                           A   672    ;**************************** _vdp_plotTriangle
                           A   673    ;Name                         Addr/Register   S
                           A   674    ;y                                     IX+9    
                           A   675    ;x                                     IX+6    
                           A   676    
                           A   677    
                           A   678    ; Stack Frame Size: 12 (bytes)
                           A   679    ;       Spill Code: 0 (instruction)
                           A   680    
                           A   681    
                           A   682    ;  122	
                           A   683    ;  123	void vdp_plotCircleRadius(unsigned int 
                           A   684    ;  124	{
0002D4                     A   685    _vdp_plotCircleRadius:
0002D4 CD 00 00 00         A   686    	CALL	__frameset0
                           A   687    ;  125		vdp_plot(0x90,r,0);
0002D8 01000000            A   688    	LD	BC,0
0002DC C5                  A   689    	PUSH	BC
0002DD DD0706              A   690    	LD	BC,(IX+%6)
0002E0 C5                  A   691    	PUSH	BC
0002E1 01900000            A   692    	LD	BC,144
0002E5 C5                  A   693    	PUSH	BC
0002E6 CD 08 02 00         A   694    	CALL	_vdp_plot
0002EA C1                  A   695    	POP	BC
0002EB C1                  A   696    	POP	BC
0002EC C1                  A   697    	POP	BC
                           A   698    ;  126	}
0002ED DDF9                A   699    	LD	SP,IX
0002EF DDE1                A   700    	POP	IX
0002F1 C9                  A   701    	RET	
                           A   702    
                           A   703    
                           A   704    ;**************************** _vdp_plotCircleRa
                           A   705    ;Name                         Addr/Register   S
                           A   706    ;r                                     IX+6    
                           A   707    
                           A   708    
                           A   709    ; Stack Frame Size: 9 (bytes)
                           A   710    ;       Spill Code: 0 (instruction)
                           A   711    
                           A   712    
                           A   713    ;  127	
                           A   714    ;  128	void vdp_plotCircleCircumference(unsign
                           A   715    ;  129	{
0002F2                     A   716    _vdp_plotCircleCircumference:
0002F2 CD 00 00 00         A   717    	CALL	__frameset0
                           A   718    ;  130		vdp_plot(0x95,x,y);
0002F6 DD0709              A   719    	LD	BC,(IX+%9)
0002F9 C5                  A   720    	PUSH	BC
0002FA DD0706              A   721    	LD	BC,(IX+%6)
0002FD C5                  A   722    	PUSH	BC
0002FE 01950000            A   723    	LD	BC,149
000302 C5                  A   724    	PUSH	BC
000303 CD 08 02 00         A   725    	CALL	_vdp_plot
000307 C1                  A   726    	POP	BC
000308 C1                  A   727    	POP	BC
000309 C1                  A   728    	POP	BC
                           A   729    ;  131	}
00030A DDF9                A   730    	LD	SP,IX
00030C DDE1                A   731    	POP	IX
00030E C9                  A   732    	RET	
                           A   733    
                           A   734    
                           A   735    ;**************************** _vdp_plotCircleCi
                           A   736    ;Name                         Addr/Register   S
                           A   737    ;y                                     IX+9    
                           A   738    ;x                                     IX+6    
                           A   739    
                           A   740    
                           A   741    ; Stack Frame Size: 12 (bytes)
                           A   742    ;       Spill Code: 0 (instruction)
                           A   743    
                           A   744    
                           A   745    ;  132	
                           A   746    ;  133	void vdp_plotSetOrigin(unsigned int x, 
                           A   747    ;  134	{
00030F                     A   748    _vdp_plotSetOrigin:
00030F CD 00 00 00         A   749    	CALL	__frameset0
                           A   750    ;  135	    putch(29); //Graphics ORIGIN
000313 011D0000            A   751    	LD	BC,29
000317 C5                  A   752    	PUSH	BC
000318 CD 00 00 00         A   753    	CALL	_putch
00031C C1                  A   754    	POP	BC
                           A   755    ;  136	    putch(x & 0xF);
00031D DD7E06              A   756    	LD	A,(IX+%6)
000320 E60F                A   757    	AND	A,%F
000322 B7ED62              A   758    	UEXT	HL
000325 6F                  A   759    	LD	L,A
000326 E5                  A   760    	PUSH	HL
000327 CD 00 00 00         A   761    	CALL	_putch
00032B C1                  A   762    	POP	BC
                           A   763    ;  137	    putch(x >> 8);
00032C DD2706              A   764    	LD	HL,(IX+%6)
00032F 3E08                A   765    	LD	A,%8
000331 CD 00 00 00         A   766    	CALL	__ishru_b
000335 E5                  A   767    	PUSH	HL
000336 CD 00 00 00         A   768    	CALL	_putch
00033A C1                  A   769    	POP	BC
                           A   770    ;  138	    putch(y & 0xF);
00033B DD7E09              A   771    	LD	A,(IX+%9)
00033E E60F                A   772    	AND	A,%F
000340 B7ED62              A   773    	UEXT	HL
000343 6F                  A   774    	LD	L,A
000344 E5                  A   775    	PUSH	HL
000345 CD 00 00 00         A   776    	CALL	_putch
000349 C1                  A   777    	POP	BC
                           A   778    ;  139	    putch(y >> 8);
00034A DD2709              A   779    	LD	HL,(IX+%9)
00034D 3E08                A   780    	LD	A,%8
00034F CD 00 00 00         A   781    	CALL	__ishru_b
000353 E5                  A   782    	PUSH	HL
000354 CD 00 00 00         A   783    	CALL	_putch
000358 C1                  A   784    	POP	BC
                           A   785    ;  140	}
000359 DDF9                A   786    	LD	SP,IX
00035B DDE1                A   787    	POP	IX
00035D C9                  A   788    	RET	
                           A   789    
                           A   790    
                           A   791    ;**************************** _vdp_plotSetOrigi
                           A   792    ;Name                         Addr/Register   S
                           A   793    ;_putch                              IMPORT  --
                           A   794    ;y                                     IX+9    
                           A   795    ;x                                     IX+6    
                           A   796    
                           A   797    
                           A   798    ; Stack Frame Size: 12 (bytes)
                           A   799    ;       Spill Code: 0 (instruction)
                           A   800    
                           A   801    
                           A   802    ;  141	
                           A   803    ;  142	// Bitmap VDP functions
                           A   804    ;  143	void vdp_bitmapSelect(UINT8 id)
                           A   805    ;  144	{
00035E                     A   806    _vdp_bitmapSelect:
00035E CD 00 00 00         A   807    	CALL	__frameset0
                           A   808    ;  145		putch(23); // vdu_sys
000362 01170000            A   809    	LD	BC,23
000366 C5                  A   810    	PUSH	BC
000367 CD 00 00 00         A   811    	CALL	_putch
00036B C1                  A   812    	POP	BC
                           A   813    ;  146		putch(27); // sprite command
00036C 011B0000            A   814    	LD	BC,27
000370 C5                  A   815    	PUSH	BC
000371 CD 00 00 00         A   816    	CALL	_putch
000375 C1                  A   817    	POP	BC
                           A   818    ;  147		putch(0);  // select command
000376 01000000            A   819    	LD	BC,0
00037A C5                  A   820    	PUSH	BC
00037B CD 00 00 00         A   821    	CALL	_putch
00037F C1                  A   822    	POP	BC
                           A   823    ;  148		putch(id); // bitmap_id
000380 DD7E06              A   824    	LD	A,(IX+%6)
000383 B7ED62              A   825    	UEXT	HL
000386 6F                  A   826    	LD	L,A
000387 E5                  A   827    	PUSH	HL
000388 CD 00 00 00         A   828    	CALL	_putch
00038C C1                  A   829    	POP	BC
                           A   830    ;  149		return;	
                           A   831    ;  150	}
00038D DDF9                A   832    	LD	SP,IX
00038F DDE1                A   833    	POP	IX
000391 C9                  A   834    	RET	
                           A   835    
                           A   836    
                           A   837    ;**************************** _vdp_bitmapSelect
                           A   838    ;Name                         Addr/Register   S
                           A   839    ;_putch                              IMPORT  --
                           A   840    ;id                                    IX+6    
                           A   841    
                           A   842    
                           A   843    ; Stack Frame Size: 9 (bytes)
                           A   844    ;       Spill Code: 0 (instruction)
                           A   845    
                           A   846    
                           A   847    ;  151	
                           A   848    ;  152	void vdp_bitmapSendDataSelected(UINT16 
                           A   849    ;  153	{
000392                     A   850    _vdp_bitmapSendDataSelected:
000392 21FEFFFF            A   851    	LD	HL,-2
000396 CD 00 00 00         A   852    	CALL	__frameset
                           A   853    ;  154		UINT16 n;
                           A   854    ;  155		
                           A   855    ;  156		putch(23); // vdu_sys
00039A 01170000            A   856    	LD	BC,23
00039E C5                  A   857    	PUSH	BC
00039F CD 00 00 00         A   858    	CALL	_putch
0003A3 C1                  A   859    	POP	BC
                           A   860    ;  157		putch(27); // sprite command
0003A4 011B0000            A   861    	LD	BC,27
0003A8 C5                  A   862    	PUSH	BC
0003A9 CD 00 00 00         A   863    	CALL	_putch
0003AD C1                  A   864    	POP	BC
                           A   865    ;  158		putch(1);  // send data to selected
0003AE 01010000            A   866    	LD	BC,1
0003B2 C5                  A   867    	PUSH	BC
0003B3 CD 00 00 00         A   868    	CALL	_putch
0003B7 C1                  A   869    	POP	BC
                           A   870    ;  159		
                           A   871    ;  160		write16bit(width);
0003B8 DD0706              A   872    	LD	BC,(IX+%6)
0003BB C5                  A   873    	PUSH	BC
0003BC CD 00 00 00         A   874    	CALL	_write16bit
0003C0 C1                  A   875    	POP	BC
                           A   876    ;  161		write16bit(height);
0003C1 DD0709              A   877    	LD	BC,(IX+%9)
0003C4 C5                  A   878    	PUSH	BC
0003C5 CD 00 00 00         A   879    	CALL	_write16bit
0003C9 C1                  A   880    	POP	BC
                           A   881    ;  162		
                           A   882    ;  163		for(n = 0; n < (width*height); n++)
0003CA DD36FE00            A   883    	LD	(IX+%FFFFFFFE),%0
0003CE DD36FF00            A   884    	LD	(IX+%FFFFFFFF),%0
0003D2 18 2B               A   885    	JR	L_28
0003D4                     A   886    L_26:
                           A   887    ;  164		{
                           A   888    ;  165			write32bit(data[n]);
0003D4 DD07FE              A   889    	LD	BC,(IX+%FFFFFFFE)
0003D7 CD 00 00 00         A   890    	CALL	__stoiu
0003DB 29                  A   891    	ADD	HL,HL
0003DC 29                  A   892    	ADD	HL,HL
0003DD DD070C              A   893    	LD	BC,(IX+%C)
0003E0 09                  A   894    	ADD	HL,BC
0003E1 E5FDE1              A   895    	LD	IY,HL
0003E4 FD0700              A   896    	LD	BC,(IY)
0003E7 FD7E03              A   897    	LD	A,(IY+%3)
0003EA 2600                A   898    	LD	H,%0
0003EC 6F                  A   899    	LD	L,A
0003ED E5                  A   900    	PUSH	HL
0003EE C5                  A   901    	PUSH	BC
0003EF CD 2E 00 00         A   902    	CALL	_write32bit
0003F3 C1                  A   903    	POP	BC
0003F4 C1                  A   904    	POP	BC
0003F5 DD27FE              A   905    	LD	HL,(IX+%FFFFFFFE)
0003F8 23                  A   906    	INC	HL
0003F9 DD75FE              A   907    	LD	(IX+%FFFFFFFE),L
0003FC DD74FF              A   908    	LD	(IX+%FFFFFFFF),H
                           A   909    ;  166			//delayms(1);
                           A   910    ;  167		}
0003FF                     A   911    L_28:
0003FF DD0706              A   912    	LD	BC,(IX+%6)
000402 CD 00 00 00         A   913    	CALL	__stoiu
000406 E5D1                A   914    	LD	DE,HL
000408 DD0709              A   915    	LD	BC,(IX+%9)
00040B CD 00 00 00         A   916    	CALL	__stoiu
00040F E5C1                A   917    	LD	BC,HL
000411 D5E1                A   918    	LD	HL,DE
000413 CD 00 00 00         A   919    	CALL	__imuls
000417 E5D1                A   920    	LD	DE,HL
000419 DD07FE              A   921    	LD	BC,(IX+%FFFFFFFE)
00041C CD 00 00 00         A   922    	CALL	__stoiu
000420 B7                  A   923    	OR	A,A
000421 ED52                A   924    	SBC	HL,DE
000423 FA D4 03 00         A   925    	JP	M,L_26
                           A   926    ;  168		return;		
                           A   927    ;  169	}
000427 DDF9                A   928    	LD	SP,IX
000429 DDE1                A   929    	POP	IX
00042B C9                  A   930    	RET	
                           A   931    
                           A   932    
                           A   933    ;**************************** _vdp_bitmapSendDa
                           A   934    ;Name                         Addr/Register   S
                           A   935    ;_putch                              IMPORT  --
                           A   936    ;n                                     IX-2    
                           A   937    ;data                                 IX+12    
                           A   938    ;height                                IX+9    
                           A   939    ;width                                 IX+6    
                           A   940    
                           A   941    
                           A   942    ; Stack Frame Size: 17 (bytes)
                           A   943    ;       Spill Code: 0 (instruction)
                           A   944    
                           A   945    
                           A   946    ;  170	
                           A   947    ;  171	void vdp_bitmapSendData(UINT8 id, UINT1
                           A   948    ;  172	{
00042C                     A   949    _vdp_bitmapSendData:
00042C CD 00 00 00         A   950    	CALL	__frameset0
                           A   951    ;  173		vdp_bitmapSelect(id);
000430 DD4E06              A   952    	LD	C,(IX+%6)
000433 0600                A   953    	LD	B,%0
000435 C5                  A   954    	PUSH	BC
000436 CD 5E 03 00         A   955    	CALL	_vdp_bitmapSelect
00043A C1                  A   956    	POP	BC
                           A   957    ;  174		vdp_bitmapSendDataSelected(width, h
00043B DD070F              A   958    	LD	BC,(IX+%F)
00043E C5                  A   959    	PUSH	BC
00043F DD070C              A   960    	LD	BC,(IX+%C)
000442 C5                  A   961    	PUSH	BC
000443 DD0709              A   962    	LD	BC,(IX+%9)
000446 C5                  A   963    	PUSH	BC
000447 CD 92 03 00         A   964    	CALL	_vdp_bitmapSendDataSelected
00044B C1                  A   965    	POP	BC
00044C C1                  A   966    	POP	BC
00044D C1                  A   967    	POP	BC
                           A   968    ;  175		return;	
                           A   969    ;  176	}
00044E DDF9                A   970    	LD	SP,IX
000450 DDE1                A   971    	POP	IX
000452 C9                  A   972    	RET	
                           A   973    
                           A   974    
                           A   975    ;**************************** _vdp_bitmapSendDa
                           A   976    ;Name                         Addr/Register   S
                           A   977    ;data                                 IX+15    
                           A   978    ;height                               IX+12    
                           A   979    ;width                                 IX+9    
                           A   980    ;id                                    IX+6    
                           A   981    
                           A   982    
                           A   983    ; Stack Frame Size: 18 (bytes)
                           A   984    ;       Spill Code: 0 (instruction)
                           A   985    
                           A   986    
                           A   987    ;  177	
                           A   988    ;  178	void vdp_bitmapDrawSelected(UINT16 x, U
                           A   989    ;  179	{
000453                     A   990    _vdp_bitmapDrawSelected:
000453 CD 00 00 00         A   991    	CALL	__frameset0
                           A   992    ;  180		putch(23); // vdu_sys
000457 01170000            A   993    	LD	BC,23
00045B C5                  A   994    	PUSH	BC
00045C CD 00 00 00         A   995    	CALL	_putch
000460 C1                  A   996    	POP	BC
                           A   997    ;  181		putch(27); // sprite command
000461 011B0000            A   998    	LD	BC,27
000465 C5                  A   999    	PUSH	BC
000466 CD 00 00 00         A  1000    	CALL	_putch
00046A C1                  A  1001    	POP	BC
                           A  1002    ;  182		putch(3);  // draw selected bitmap
00046B 01030000            A  1003    	LD	BC,3
00046F C5                  A  1004    	PUSH	BC
000470 CD 00 00 00         A  1005    	CALL	_putch
000474 C1                  A  1006    	POP	BC
                           A  1007    ;  183		
                           A  1008    ;  184		write16bit(x);
000475 DD0706              A  1009    	LD	BC,(IX+%6)
000478 C5                  A  1010    	PUSH	BC
000479 CD 00 00 00         A  1011    	CALL	_write16bit
00047D C1                  A  1012    	POP	BC
                           A  1013    ;  185		write16bit(y);
00047E DD0709              A  1014    	LD	BC,(IX+%9)
000481 C5                  A  1015    	PUSH	BC
000482 CD 00 00 00         A  1016    	CALL	_write16bit
000486 C1                  A  1017    	POP	BC
                           A  1018    ;  186		
                           A  1019    ;  187		return;
                           A  1020    ;  188	}
000487 DDF9                A  1021    	LD	SP,IX
000489 DDE1                A  1022    	POP	IX
00048B C9                  A  1023    	RET	
                           A  1024    
                           A  1025    
                           A  1026    ;**************************** _vdp_bitmapDrawSe
                           A  1027    ;Name                         Addr/Register   S
                           A  1028    ;_putch                              IMPORT  --
                           A  1029    ;y                                     IX+9    
                           A  1030    ;x                                     IX+6    
                           A  1031    
                           A  1032    
                           A  1033    ; Stack Frame Size: 12 (bytes)
                           A  1034    ;       Spill Code: 0 (instruction)
                           A  1035    
                           A  1036    
                           A  1037    ;  189	
                           A  1038    ;  190	void vdp_bitmapDraw(UINT8 id, UINT16 x,
                           A  1039    ;  191	{
00048C                     A  1040    _vdp_bitmapDraw:
00048C CD 00 00 00         A  1041    	CALL	__frameset0
                           A  1042    ;  192		vdp_bitmapSelect(id);
000490 DD4E06              A  1043    	LD	C,(IX+%6)
000493 0600                A  1044    	LD	B,%0
000495 C5                  A  1045    	PUSH	BC
000496 CD 5E 03 00         A  1046    	CALL	_vdp_bitmapSelect
00049A C1                  A  1047    	POP	BC
                           A  1048    ;  193		vdp_bitmapDrawSelected(x,y);
00049B DD070C              A  1049    	LD	BC,(IX+%C)
00049E C5                  A  1050    	PUSH	BC
00049F DD0709              A  1051    	LD	BC,(IX+%9)
0004A2 C5                  A  1052    	PUSH	BC
0004A3 CD 53 04 00         A  1053    	CALL	_vdp_bitmapDrawSelected
0004A7 C1                  A  1054    	POP	BC
0004A8 C1                  A  1055    	POP	BC
                           A  1056    ;  194		return;	
                           A  1057    ;  195	}
0004A9 DDF9                A  1058    	LD	SP,IX
0004AB DDE1                A  1059    	POP	IX
0004AD C9                  A  1060    	RET	
                           A  1061    
                           A  1062    
                           A  1063    ;**************************** _vdp_bitmapDraw *
                           A  1064    ;Name                         Addr/Register   S
                           A  1065    ;y                                    IX+12    
                           A  1066    ;x                                     IX+9    
                           A  1067    ;id                                    IX+6    
                           A  1068    
                           A  1069    
                           A  1070    ; Stack Frame Size: 15 (bytes)
                           A  1071    ;       Spill Code: 0 (instruction)
                           A  1072    
                           A  1073    
                           A  1074    ;  196	
                           A  1075    ;  197	void vdp_bitmapCreateSolidColorSelected
                           A  1076    ;  198	{
0004AE                     A  1077    _vdp_bitmapCreateSolidColorSelected:
0004AE CD 00 00 00         A  1078    	CALL	__frameset0
                           A  1079    ;  199		putch(23); // vdu_sys
0004B2 01170000            A  1080    	LD	BC,23
0004B6 C5                  A  1081    	PUSH	BC
0004B7 CD 00 00 00         A  1082    	CALL	_putch
0004BB C1                  A  1083    	POP	BC
                           A  1084    ;  200		putch(27); // sprite command
0004BC 011B0000            A  1085    	LD	BC,27
0004C0 C5                  A  1086    	PUSH	BC
0004C1 CD 00 00 00         A  1087    	CALL	_putch
0004C5 C1                  A  1088    	POP	BC
                           A  1089    ;  201		putch(2);  // define in single colo
0004C6 01020000            A  1090    	LD	BC,2
0004CA C5                  A  1091    	PUSH	BC
0004CB CD 00 00 00         A  1092    	CALL	_putch
0004CF C1                  A  1093    	POP	BC
                           A  1094    ;  202		
                           A  1095    ;  203		write16bit(width);
0004D0 DD0706              A  1096    	LD	BC,(IX+%6)
0004D3 C5                  A  1097    	PUSH	BC
0004D4 CD 00 00 00         A  1098    	CALL	_write16bit
0004D8 C1                  A  1099    	POP	BC
                           A  1100    ;  204		write16bit(height);
0004D9 DD0709              A  1101    	LD	BC,(IX+%9)
0004DC C5                  A  1102    	PUSH	BC
0004DD CD 00 00 00         A  1103    	CALL	_write16bit
0004E1 C1                  A  1104    	POP	BC
                           A  1105    ;  205		write32bit(abgr);
0004E2 DD4E0F              A  1106    	LD	C,(IX+%F)
0004E5 0600                A  1107    	LD	B,%0
0004E7 C5                  A  1108    	PUSH	BC
0004E8 DD070C              A  1109    	LD	BC,(IX+%C)
0004EB C5                  A  1110    	PUSH	BC
0004EC CD 2E 00 00         A  1111    	CALL	_write32bit
0004F0 C1                  A  1112    	POP	BC
0004F1 C1                  A  1113    	POP	BC
                           A  1114    ;  206		return;		
                           A  1115    ;  207	}
0004F2 DDF9                A  1116    	LD	SP,IX
0004F4 DDE1                A  1117    	POP	IX
0004F6 C9                  A  1118    	RET	
                           A  1119    
                           A  1120    
                           A  1121    ;**************************** _vdp_bitmapCreate
                           A  1122    ;Name                         Addr/Register   S
                           A  1123    ;_putch                              IMPORT  --
                           A  1124    ;abgr                                 IX+12    
                           A  1125    ;height                                IX+9    
                           A  1126    ;width                                 IX+6    
                           A  1127    
                           A  1128    
                           A  1129    ; Stack Frame Size: 18 (bytes)
                           A  1130    ;       Spill Code: 0 (instruction)
                           A  1131    
                           A  1132    
                           A  1133    ;  208	
                           A  1134    ;  209	void vdp_bitmapCreateSolidColor(UINT8 i
                           A  1135    ;  210	{
0004F7                     A  1136    _vdp_bitmapCreateSolidColor:
0004F7 CD 00 00 00         A  1137    	CALL	__frameset0
                           A  1138    ;  211		vdp_bitmapSelect(id);
0004FB DD4E06              A  1139    	LD	C,(IX+%6)
0004FE 0600                A  1140    	LD	B,%0
000500 C5                  A  1141    	PUSH	BC
000501 CD 5E 03 00         A  1142    	CALL	_vdp_bitmapSelect
000505 C1                  A  1143    	POP	BC
                           A  1144    ;  212		vdp_bitmapCreateSolidColorSelected(
000506 DD4E12              A  1145    	LD	C,(IX+%12)
000509 0600                A  1146    	LD	B,%0
00050B C5                  A  1147    	PUSH	BC
00050C DD070F              A  1148    	LD	BC,(IX+%F)
00050F C5                  A  1149    	PUSH	BC
000510 DD070C              A  1150    	LD	BC,(IX+%C)
000513 C5                  A  1151    	PUSH	BC
000514 DD0709              A  1152    	LD	BC,(IX+%9)
000517 C5                  A  1153    	PUSH	BC
000518 CD AE 04 00         A  1154    	CALL	_vdp_bitmapCreateSolidColorSelected
00051C C1                  A  1155    	POP	BC
00051D C1                  A  1156    	POP	BC
00051E C1                  A  1157    	POP	BC
00051F C1                  A  1158    	POP	BC
                           A  1159    ;  213		return;	
                           A  1160    ;  214	}
000520 DDF9                A  1161    	LD	SP,IX
000522 DDE1                A  1162    	POP	IX
000524 C9                  A  1163    	RET	
                           A  1164    
                           A  1165    
                           A  1166    ;**************************** _vdp_bitmapCreate
                           A  1167    ;Name                         Addr/Register   S
                           A  1168    ;abgr                                 IX+15    
                           A  1169    ;height                               IX+12    
                           A  1170    ;width                                 IX+9    
                           A  1171    ;id                                    IX+6    
                           A  1172    
                           A  1173    
                           A  1174    ; Stack Frame Size: 21 (bytes)
                           A  1175    ;       Spill Code: 0 (instruction)
                           A  1176    
                           A  1177    
                           A  1178    ;  215	
                           A  1179    ;  216	// Sprite VDP functions
                           A  1180    ;  217	void vdp_spriteSelect(UINT8 id)
                           A  1181    ;  218	{
000525                     A  1182    _vdp_spriteSelect:
000525 CD 00 00 00         A  1183    	CALL	__frameset0
                           A  1184    ;  219		putch(23); // vdu_sys
000529 01170000            A  1185    	LD	BC,23
00052D C5                  A  1186    	PUSH	BC
00052E CD 00 00 00         A  1187    	CALL	_putch
000532 C1                  A  1188    	POP	BC
                           A  1189    ;  220		putch(27); // sprite command
000533 011B0000            A  1190    	LD	BC,27
000537 C5                  A  1191    	PUSH	BC
000538 CD 00 00 00         A  1192    	CALL	_putch
00053C C1                  A  1193    	POP	BC
                           A  1194    ;  221		putch(4);  // select sprite
00053D 01040000            A  1195    	LD	BC,4
000541 C5                  A  1196    	PUSH	BC
000542 CD 00 00 00         A  1197    	CALL	_putch
000546 C1                  A  1198    	POP	BC
                           A  1199    ;  222		putch(id);
000547 DD7E06              A  1200    	LD	A,(IX+%6)
00054A B7ED62              A  1201    	UEXT	HL
00054D 6F                  A  1202    	LD	L,A
00054E E5                  A  1203    	PUSH	HL
00054F CD 00 00 00         A  1204    	CALL	_putch
000553 C1                  A  1205    	POP	BC
                           A  1206    ;  223		return;			
                           A  1207    ;  224	}
000554 DDF9                A  1208    	LD	SP,IX
000556 DDE1                A  1209    	POP	IX
000558 C9                  A  1210    	RET	
                           A  1211    
                           A  1212    
                           A  1213    ;**************************** _vdp_spriteSelect
                           A  1214    ;Name                         Addr/Register   S
                           A  1215    ;_putch                              IMPORT  --
                           A  1216    ;id                                    IX+6    
                           A  1217    
                           A  1218    
                           A  1219    ; Stack Frame Size: 9 (bytes)
                           A  1220    ;       Spill Code: 0 (instruction)
                           A  1221    
                           A  1222    
                           A  1223    ;  225	
                           A  1224    ;  226	void vdp_spriteClearFramesSelected(void
                           A  1225    ;  227	{
000559                     A  1226    _vdp_spriteClearFramesSelected:
                           A  1227    ;  228		putch(23); // vdu_sys
000559 01170000            A  1228    	LD	BC,23
00055D C5                  A  1229    	PUSH	BC
00055E CD 00 00 00         A  1230    	CALL	_putch
000562 C1                  A  1231    	POP	BC
                           A  1232    ;  229		putch(27); // sprite command
000563 011B0000            A  1233    	LD	BC,27
000567 C5                  A  1234    	PUSH	BC
000568 CD 00 00 00         A  1235    	CALL	_putch
00056C C1                  A  1236    	POP	BC
                           A  1237    ;  230		putch(5);  // clear frames
00056D 01050000            A  1238    	LD	BC,5
000571 C5                  A  1239    	PUSH	BC
000572 CD 00 00 00         A  1240    	CALL	_putch
000576 C1                  A  1241    	POP	BC
                           A  1242    ;  231		return;				
                           A  1243    ;  232	}
000577 C9                  A  1244    	RET	
                           A  1245    
                           A  1246    
                           A  1247    ;**************************** _vdp_spriteClearF
                           A  1248    ;Name                         Addr/Register   S
                           A  1249    ;_putch                              IMPORT  --
                           A  1250    
                           A  1251    
                           A  1252    ; Stack Frame Size: 6 (bytes)
                           A  1253    ;       Spill Code: 0 (instruction)
                           A  1254    
                           A  1255    
                           A  1256    ;  233	
                           A  1257    ;  234	void vdp_spriteClearFrames(UINT8 bitmap
                           A  1258    ;  235	{
000578                     A  1259    _vdp_spriteClearFrames:
000578 CD 00 00 00         A  1260    	CALL	__frameset0
                           A  1261    ;  236		vdp_spriteSelect(bitmapid);
00057C DD4E06              A  1262    	LD	C,(IX+%6)
00057F 0600                A  1263    	LD	B,%0
000581 C5                  A  1264    	PUSH	BC
000582 CD 25 05 00         A  1265    	CALL	_vdp_spriteSelect
000586 C1                  A  1266    	POP	BC
                           A  1267    ;  237		vdp_spriteClearFramesSelected();
000587 CD 59 05 00         A  1268    	CALL	_vdp_spriteClearFramesSelected
                           A  1269    ;  238		return;				
                           A  1270    ;  239	}
00058B DDF9                A  1271    	LD	SP,IX
00058D DDE1                A  1272    	POP	IX
00058F C9                  A  1273    	RET	
                           A  1274    
                           A  1275    
                           A  1276    ;**************************** _vdp_spriteClearF
                           A  1277    ;Name                         Addr/Register   S
                           A  1278    ;bitmapid                              IX+6    
                           A  1279    
                           A  1280    
                           A  1281    ; Stack Frame Size: 9 (bytes)
                           A  1282    ;       Spill Code: 0 (instruction)
                           A  1283    
                           A  1284    
                           A  1285    ;  240	
                           A  1286    ;  241	void vdp_spriteAddFrameSelected(UINT8 b
                           A  1287    ;  242	{
000590                     A  1288    _vdp_spriteAddFrameSelected:
000590 CD 00 00 00         A  1289    	CALL	__frameset0
                           A  1290    ;  243		putch(23); // vdu_sys
000594 01170000            A  1291    	LD	BC,23
000598 C5                  A  1292    	PUSH	BC
000599 CD 00 00 00         A  1293    	CALL	_putch
00059D C1                  A  1294    	POP	BC
                           A  1295    ;  244		putch(27); // sprite command
00059E 011B0000            A  1296    	LD	BC,27
0005A2 C5                  A  1297    	PUSH	BC
0005A3 CD 00 00 00         A  1298    	CALL	_putch
0005A7 C1                  A  1299    	POP	BC
                           A  1300    ;  245		putch(6);  // add frame
0005A8 01060000            A  1301    	LD	BC,6
0005AC C5                  A  1302    	PUSH	BC
0005AD CD 00 00 00         A  1303    	CALL	_putch
0005B1 C1                  A  1304    	POP	BC
                           A  1305    ;  246		putch(bitmapid);
0005B2 DD7E06              A  1306    	LD	A,(IX+%6)
0005B5 B7ED62              A  1307    	UEXT	HL
0005B8 6F                  A  1308    	LD	L,A
0005B9 E5                  A  1309    	PUSH	HL
0005BA CD 00 00 00         A  1310    	CALL	_putch
0005BE C1                  A  1311    	POP	BC
                           A  1312    ;  247		return;	
                           A  1313    ;  248	}
0005BF DDF9                A  1314    	LD	SP,IX
0005C1 DDE1                A  1315    	POP	IX
0005C3 C9                  A  1316    	RET	
                           A  1317    
                           A  1318    
                           A  1319    ;**************************** _vdp_spriteAddFra
                           A  1320    ;Name                         Addr/Register   S
                           A  1321    ;_putch                              IMPORT  --
                           A  1322    ;bitmapid                              IX+6    
                           A  1323    
                           A  1324    
                           A  1325    ; Stack Frame Size: 9 (bytes)
                           A  1326    ;       Spill Code: 0 (instruction)
                           A  1327    
                           A  1328    
                           A  1329    ;  249	
                           A  1330    ;  250	void vdp_spriteAddFrame(UINT8 id, UINT8
                           A  1331    ;  251	{
0005C4                     A  1332    _vdp_spriteAddFrame:
0005C4 CD 00 00 00         A  1333    	CALL	__frameset0
                           A  1334    ;  252		vdp_spriteSelect(id);
0005C8 DD4E06              A  1335    	LD	C,(IX+%6)
0005CB 0600                A  1336    	LD	B,%0
0005CD C5                  A  1337    	PUSH	BC
0005CE CD 25 05 00         A  1338    	CALL	_vdp_spriteSelect
0005D2 C1                  A  1339    	POP	BC
                           A  1340    ;  253		vdp_spriteAddFrameSelected(bitmapid
0005D3 DD4E09              A  1341    	LD	C,(IX+%9)
0005D6 0600                A  1342    	LD	B,%0
0005D8 C5                  A  1343    	PUSH	BC
0005D9 CD 90 05 00         A  1344    	CALL	_vdp_spriteAddFrameSelected
0005DD C1                  A  1345    	POP	BC
                           A  1346    ;  254		return;	
                           A  1347    ;  255	}
0005DE DDF9                A  1348    	LD	SP,IX
0005E0 DDE1                A  1349    	POP	IX
0005E2 C9                  A  1350    	RET	
                           A  1351    
                           A  1352    
                           A  1353    ;**************************** _vdp_spriteAddFra
                           A  1354    ;Name                         Addr/Register   S
                           A  1355    ;bitmapid                              IX+9    
                           A  1356    ;id                                    IX+6    
                           A  1357    
                           A  1358    
                           A  1359    ; Stack Frame Size: 12 (bytes)
                           A  1360    ;       Spill Code: 0 (instruction)
                           A  1361    
                           A  1362    
                           A  1363    ;  256	
                           A  1364    ;  257	void vdp_spriteNextFrameSelected(void)
                           A  1365    ;  258	{
0005E3                     A  1366    _vdp_spriteNextFrameSelected:
                           A  1367    ;  259		putch(23); // vdu_sys
0005E3 01170000            A  1368    	LD	BC,23
0005E7 C5                  A  1369    	PUSH	BC
0005E8 CD 00 00 00         A  1370    	CALL	_putch
0005EC C1                  A  1371    	POP	BC
                           A  1372    ;  260		putch(27); // sprite command
0005ED 011B0000            A  1373    	LD	BC,27
0005F1 C5                  A  1374    	PUSH	BC
0005F2 CD 00 00 00         A  1375    	CALL	_putch
0005F6 C1                  A  1376    	POP	BC
                           A  1377    ;  261		putch(8);  // next frame
0005F7 01080000            A  1378    	LD	BC,8
0005FB C5                  A  1379    	PUSH	BC
0005FC CD 00 00 00         A  1380    	CALL	_putch
000600 C1                  A  1381    	POP	BC
                           A  1382    ;  262		return;			
                           A  1383    ;  263	}
000601 C9                  A  1384    	RET	
                           A  1385    
                           A  1386    
                           A  1387    ;**************************** _vdp_spriteNextFr
                           A  1388    ;Name                         Addr/Register   S
                           A  1389    ;_putch                              IMPORT  --
                           A  1390    
                           A  1391    
                           A  1392    ; Stack Frame Size: 6 (bytes)
                           A  1393    ;       Spill Code: 0 (instruction)
                           A  1394    
                           A  1395    
                           A  1396    ;  264	
                           A  1397    ;  265	void vdp_spriteNextFrame(UINT8 id)
                           A  1398    ;  266	{
000602                     A  1399    _vdp_spriteNextFrame:
000602 CD 00 00 00         A  1400    	CALL	__frameset0
                           A  1401    ;  267		vdp_spriteSelect(id);
000606 DD4E06              A  1402    	LD	C,(IX+%6)
000609 0600                A  1403    	LD	B,%0
00060B C5                  A  1404    	PUSH	BC
00060C CD 25 05 00         A  1405    	CALL	_vdp_spriteSelect
000610 C1                  A  1406    	POP	BC
                           A  1407    ;  268		vdp_spriteNextFrameSelected();
000611 CD E3 05 00         A  1408    	CALL	_vdp_spriteNextFrameSelected
                           A  1409    ;  269		return;
                           A  1410    ;  270	}
000615 DDF9                A  1411    	LD	SP,IX
000617 DDE1                A  1412    	POP	IX
000619 C9                  A  1413    	RET	
                           A  1414    
                           A  1415    
                           A  1416    ;**************************** _vdp_spriteNextFr
                           A  1417    ;Name                         Addr/Register   S
                           A  1418    ;id                                    IX+6    
                           A  1419    
                           A  1420    
                           A  1421    ; Stack Frame Size: 9 (bytes)
                           A  1422    ;       Spill Code: 0 (instruction)
                           A  1423    
                           A  1424    
                           A  1425    ;  271	
                           A  1426    ;  272	void vdp_spritePreviousFrameSelected(vo
                           A  1427    ;  273	{
00061A                     A  1428    _vdp_spritePreviousFrameSelected:
                           A  1429    ;  274		putch(23); // vdu_sys
00061A 01170000            A  1430    	LD	BC,23
00061E C5                  A  1431    	PUSH	BC
00061F CD 00 00 00         A  1432    	CALL	_putch
000623 C1                  A  1433    	POP	BC
                           A  1434    ;  275		putch(27); // sprite command
000624 011B0000            A  1435    	LD	BC,27
000628 C5                  A  1436    	PUSH	BC
000629 CD 00 00 00         A  1437    	CALL	_putch
00062D C1                  A  1438    	POP	BC
                           A  1439    ;  276		putch(9); // previous frame
00062E 01090000            A  1440    	LD	BC,9
000632 C5                  A  1441    	PUSH	BC
000633 CD 00 00 00         A  1442    	CALL	_putch
000637 C1                  A  1443    	POP	BC
                           A  1444    ;  277		return;	
                           A  1445    ;  278	}
000638 C9                  A  1446    	RET	
                           A  1447    
                           A  1448    
                           A  1449    ;**************************** _vdp_spritePrevio
                           A  1450    ;Name                         Addr/Register   S
                           A  1451    ;_putch                              IMPORT  --
                           A  1452    
                           A  1453    
                           A  1454    ; Stack Frame Size: 6 (bytes)
                           A  1455    ;       Spill Code: 0 (instruction)
                           A  1456    
                           A  1457    
                           A  1458    ;  279	
                           A  1459    ;  280	void vdp_spritePreviousFrame(UINT8 id)
                           A  1460    ;  281	{
000639                     A  1461    _vdp_spritePreviousFrame:
000639 CD 00 00 00         A  1462    	CALL	__frameset0
                           A  1463    ;  282		vdp_spriteSelect(id);
00063D DD4E06              A  1464    	LD	C,(IX+%6)
000640 0600                A  1465    	LD	B,%0
000642 C5                  A  1466    	PUSH	BC
000643 CD 25 05 00         A  1467    	CALL	_vdp_spriteSelect
000647 C1                  A  1468    	POP	BC
                           A  1469    ;  283		vdp_spritePreviousFrameSelected();
000648 CD 1A 06 00         A  1470    	CALL	_vdp_spritePreviousFrameSelected
                           A  1471    ;  284		return;
                           A  1472    ;  285	}
00064C DDF9                A  1473    	LD	SP,IX
00064E DDE1                A  1474    	POP	IX
000650 C9                  A  1475    	RET	
                           A  1476    
                           A  1477    
                           A  1478    ;**************************** _vdp_spritePrevio
                           A  1479    ;Name                         Addr/Register   S
                           A  1480    ;id                                    IX+6    
                           A  1481    
                           A  1482    
                           A  1483    ; Stack Frame Size: 9 (bytes)
                           A  1484    ;       Spill Code: 0 (instruction)
                           A  1485    
                           A  1486    
                           A  1487    ;  286	
                           A  1488    ;  287	void vdp_spriteSetFrameSelected(UINT8 f
                           A  1489    ;  288	{
000651                     A  1490    _vdp_spriteSetFrameSelected:
000651 CD 00 00 00         A  1491    	CALL	__frameset0
                           A  1492    ;  289		putch(23); // vdu_sys
000655 01170000            A  1493    	LD	BC,23
000659 C5                  A  1494    	PUSH	BC
00065A CD 00 00 00         A  1495    	CALL	_putch
00065E C1                  A  1496    	POP	BC
                           A  1497    ;  290		putch(27); // sprite command
00065F 011B0000            A  1498    	LD	BC,27
000663 C5                  A  1499    	PUSH	BC
000664 CD 00 00 00         A  1500    	CALL	_putch
000668 C1                  A  1501    	POP	BC
                           A  1502    ;  291		putch(10); // set current frame
000669 010A0000            A  1503    	LD	BC,10
00066D C5                  A  1504    	PUSH	BC
00066E CD 00 00 00         A  1505    	CALL	_putch
000672 C1                  A  1506    	POP	BC
                           A  1507    ;  292		putch(framenumber);
000673 DD7E06              A  1508    	LD	A,(IX+%6)
000676 B7ED62              A  1509    	UEXT	HL
000679 6F                  A  1510    	LD	L,A
00067A E5                  A  1511    	PUSH	HL
00067B CD 00 00 00         A  1512    	CALL	_putch
00067F C1                  A  1513    	POP	BC
                           A  1514    ;  293		return;	
                           A  1515    ;  294	}
000680 DDF9                A  1516    	LD	SP,IX
000682 DDE1                A  1517    	POP	IX
000684 C9                  A  1518    	RET	
                           A  1519    
                           A  1520    
                           A  1521    ;**************************** _vdp_spriteSetFra
                           A  1522    ;Name                         Addr/Register   S
                           A  1523    ;_putch                              IMPORT  --
                           A  1524    ;framenumber                           IX+6    
                           A  1525    
                           A  1526    
                           A  1527    ; Stack Frame Size: 9 (bytes)
                           A  1528    ;       Spill Code: 0 (instruction)
                           A  1529    
                           A  1530    
                           A  1531    ;  295	
                           A  1532    ;  296	void vdp_spriteSetFrame(UINT8 id, UINT8
                           A  1533    ;  297	{
000685                     A  1534    _vdp_spriteSetFrame:
000685 CD 00 00 00         A  1535    	CALL	__frameset0
                           A  1536    ;  298		vdp_spriteSelect(id);
000689 DD4E06              A  1537    	LD	C,(IX+%6)
00068C 0600                A  1538    	LD	B,%0
00068E C5                  A  1539    	PUSH	BC
00068F CD 25 05 00         A  1540    	CALL	_vdp_spriteSelect
000693 C1                  A  1541    	POP	BC
                           A  1542    ;  299		vdp_spriteNextFrameSelected();
000694 CD E3 05 00         A  1543    	CALL	_vdp_spriteNextFrameSelected
                           A  1544    ;  300		return;
                           A  1545    ;  301	}
000698 DDF9                A  1546    	LD	SP,IX
00069A DDE1                A  1547    	POP	IX
00069C C9                  A  1548    	RET	
                           A  1549    
                           A  1550    
                           A  1551    ;**************************** _vdp_spriteSetFra
                           A  1552    ;Name                         Addr/Register   S
                           A  1553    ;framenumber                           IX+9    
                           A  1554    ;id                                    IX+6    
                           A  1555    
                           A  1556    
                           A  1557    ; Stack Frame Size: 12 (bytes)
                           A  1558    ;       Spill Code: 0 (instruction)
                           A  1559    
                           A  1560    
                           A  1561    ;  302	
                           A  1562    ;  303	void vdp_spriteShowSelected(void)
                           A  1563    ;  304	{
00069D                     A  1564    _vdp_spriteShowSelected:
                           A  1565    ;  305		putch(23); // vdu_sys
00069D 01170000            A  1566    	LD	BC,23
0006A1 C5                  A  1567    	PUSH	BC
0006A2 CD 00 00 00         A  1568    	CALL	_putch
0006A6 C1                  A  1569    	POP	BC
                           A  1570    ;  306		putch(27); // sprite command
0006A7 011B0000            A  1571    	LD	BC,27
0006AB C5                  A  1572    	PUSH	BC
0006AC CD 00 00 00         A  1573    	CALL	_putch
0006B0 C1                  A  1574    	POP	BC
                           A  1575    ;  307		putch(11); // show sprite
0006B1 010B0000            A  1576    	LD	BC,11
0006B5 C5                  A  1577    	PUSH	BC
0006B6 CD 00 00 00         A  1578    	CALL	_putch
0006BA C1                  A  1579    	POP	BC
                           A  1580    ;  308		return;			
                           A  1581    ;  309	}
0006BB C9                  A  1582    	RET	
                           A  1583    
                           A  1584    
                           A  1585    ;**************************** _vdp_spriteShowSe
                           A  1586    ;Name                         Addr/Register   S
                           A  1587    ;_putch                              IMPORT  --
                           A  1588    
                           A  1589    
                           A  1590    ; Stack Frame Size: 6 (bytes)
                           A  1591    ;       Spill Code: 0 (instruction)
                           A  1592    
                           A  1593    
                           A  1594    ;  310	
                           A  1595    ;  311	void vdp_spriteShow(UINT8 id)
                           A  1596    ;  312	{
0006BC                     A  1597    _vdp_spriteShow:
0006BC CD 00 00 00         A  1598    	CALL	__frameset0
                           A  1599    ;  313		vdp_spriteSelect(id);
0006C0 DD4E06              A  1600    	LD	C,(IX+%6)
0006C3 0600                A  1601    	LD	B,%0
0006C5 C5                  A  1602    	PUSH	BC
0006C6 CD 25 05 00         A  1603    	CALL	_vdp_spriteSelect
0006CA C1                  A  1604    	POP	BC
                           A  1605    ;  314		vdp_spriteShowSelected();
0006CB CD 9D 06 00         A  1606    	CALL	_vdp_spriteShowSelected
                           A  1607    ;  315		return;
                           A  1608    ;  316	}
0006CF DDF9                A  1609    	LD	SP,IX
0006D1 DDE1                A  1610    	POP	IX
0006D3 C9                  A  1611    	RET	
                           A  1612    
                           A  1613    
                           A  1614    ;**************************** _vdp_spriteShow *
                           A  1615    ;Name                         Addr/Register   S
                           A  1616    ;id                                    IX+6    
                           A  1617    
                           A  1618    
                           A  1619    ; Stack Frame Size: 9 (bytes)
                           A  1620    ;       Spill Code: 0 (instruction)
                           A  1621    
                           A  1622    
                           A  1623    ;  317	
                           A  1624    ;  318	void vdp_spriteHideSelected(void)
                           A  1625    ;  319	{
0006D4                     A  1626    _vdp_spriteHideSelected:
                           A  1627    ;  320		putch(23); // vdu_sys
0006D4 01170000            A  1628    	LD	BC,23
0006D8 C5                  A  1629    	PUSH	BC
0006D9 CD 00 00 00         A  1630    	CALL	_putch
0006DD C1                  A  1631    	POP	BC
                           A  1632    ;  321		putch(27); // sprite command
0006DE 011B0000            A  1633    	LD	BC,27
0006E2 C5                  A  1634    	PUSH	BC
0006E3 CD 00 00 00         A  1635    	CALL	_putch
0006E7 C1                  A  1636    	POP	BC
                           A  1637    ;  322		putch(12); // hide sprite
0006E8 010C0000            A  1638    	LD	BC,12
0006EC C5                  A  1639    	PUSH	BC
0006ED CD 00 00 00         A  1640    	CALL	_putch
0006F1 C1                  A  1641    	POP	BC
                           A  1642    ;  323		return;		
                           A  1643    ;  324	}
0006F2 C9                  A  1644    	RET	
                           A  1645    
                           A  1646    
                           A  1647    ;**************************** _vdp_spriteHideSe
                           A  1648    ;Name                         Addr/Register   S
                           A  1649    ;_putch                              IMPORT  --
                           A  1650    
                           A  1651    
                           A  1652    ; Stack Frame Size: 6 (bytes)
                           A  1653    ;       Spill Code: 0 (instruction)
                           A  1654    
                           A  1655    
                           A  1656    ;  325	
                           A  1657    ;  326	void vdp_spriteHide(UINT8 id)
                           A  1658    ;  327	{
0006F3                     A  1659    _vdp_spriteHide:
0006F3 CD 00 00 00         A  1660    	CALL	__frameset0
                           A  1661    ;  328		vdp_spriteSelect(id);
0006F7 DD4E06              A  1662    	LD	C,(IX+%6)
0006FA 0600                A  1663    	LD	B,%0
0006FC C5                  A  1664    	PUSH	BC
0006FD CD 25 05 00         A  1665    	CALL	_vdp_spriteSelect
000701 C1                  A  1666    	POP	BC
                           A  1667    ;  329		vdp_spriteHideSelected();
000702 CD D4 06 00         A  1668    	CALL	_vdp_spriteHideSelected
                           A  1669    ;  330		return;
                           A  1670    ;  331	}
000706 DDF9                A  1671    	LD	SP,IX
000708 DDE1                A  1672    	POP	IX
00070A C9                  A  1673    	RET	
                           A  1674    
                           A  1675    
                           A  1676    ;**************************** _vdp_spriteHide *
                           A  1677    ;Name                         Addr/Register   S
                           A  1678    ;id                                    IX+6    
                           A  1679    
                           A  1680    
                           A  1681    ; Stack Frame Size: 9 (bytes)
                           A  1682    ;       Spill Code: 0 (instruction)
                           A  1683    
                           A  1684    
                           A  1685    ;  332	
                           A  1686    ;  333	void vdp_spriteMoveToSelected(UINT16 x,
                           A  1687    ;  334	{
00070B                     A  1688    _vdp_spriteMoveToSelected:
00070B CD 00 00 00         A  1689    	CALL	__frameset0
                           A  1690    ;  335		putch(23); // vdu_sys
00070F 01170000            A  1691    	LD	BC,23
000713 C5                  A  1692    	PUSH	BC
000714 CD 00 00 00         A  1693    	CALL	_putch
000718 C1                  A  1694    	POP	BC
                           A  1695    ;  336		putch(27); // sprite command
000719 011B0000            A  1696    	LD	BC,27
00071D C5                  A  1697    	PUSH	BC
00071E CD 00 00 00         A  1698    	CALL	_putch
000722 C1                  A  1699    	POP	BC
                           A  1700    ;  337		putch(13); // move to
000723 010D0000            A  1701    	LD	BC,13
000727 C5                  A  1702    	PUSH	BC
000728 CD 00 00 00         A  1703    	CALL	_putch
00072C C1                  A  1704    	POP	BC
                           A  1705    ;  338		write16bit(x);
00072D DD0706              A  1706    	LD	BC,(IX+%6)
000730 C5                  A  1707    	PUSH	BC
000731 CD 00 00 00         A  1708    	CALL	_write16bit
000735 C1                  A  1709    	POP	BC
                           A  1710    ;  339		write16bit(y);
000736 DD0709              A  1711    	LD	BC,(IX+%9)
000739 C5                  A  1712    	PUSH	BC
00073A CD 00 00 00         A  1713    	CALL	_write16bit
00073E C1                  A  1714    	POP	BC
                           A  1715    ;  340		return;	
                           A  1716    ;  341	}
00073F DDF9                A  1717    	LD	SP,IX
000741 DDE1                A  1718    	POP	IX
000743 C9                  A  1719    	RET	
                           A  1720    
                           A  1721    
                           A  1722    ;**************************** _vdp_spriteMoveTo
                           A  1723    ;Name                         Addr/Register   S
                           A  1724    ;_putch                              IMPORT  --
                           A  1725    ;y                                     IX+9    
                           A  1726    ;x                                     IX+6    
                           A  1727    
                           A  1728    
                           A  1729    ; Stack Frame Size: 12 (bytes)
                           A  1730    ;       Spill Code: 0 (instruction)
                           A  1731    
                           A  1732    
                           A  1733    ;  342	
                           A  1734    ;  343	void vdp_spriteMoveTo(UINT8 id, UINT16 
                           A  1735    ;  344	{
000744                     A  1736    _vdp_spriteMoveTo:
000744 CD 00 00 00         A  1737    	CALL	__frameset0
                           A  1738    ;  345		vdp_spriteSelect(id);
000748 DD4E06              A  1739    	LD	C,(IX+%6)
00074B 0600                A  1740    	LD	B,%0
00074D C5                  A  1741    	PUSH	BC
00074E CD 25 05 00         A  1742    	CALL	_vdp_spriteSelect
000752 C1                  A  1743    	POP	BC
                           A  1744    ;  346		vdp_spriteMoveToSelected(x,y);
000753 DD070C              A  1745    	LD	BC,(IX+%C)
000756 C5                  A  1746    	PUSH	BC
000757 DD0709              A  1747    	LD	BC,(IX+%9)
00075A C5                  A  1748    	PUSH	BC
00075B CD 0B 07 00         A  1749    	CALL	_vdp_spriteMoveToSelected
00075F C1                  A  1750    	POP	BC
000760 C1                  A  1751    	POP	BC
                           A  1752    ;  347		return;
                           A  1753    ;  348	}
000761 DDF9                A  1754    	LD	SP,IX
000763 DDE1                A  1755    	POP	IX
000765 C9                  A  1756    	RET	
                           A  1757    
                           A  1758    
                           A  1759    ;**************************** _vdp_spriteMoveTo
                           A  1760    ;Name                         Addr/Register   S
                           A  1761    ;y                                    IX+12    
                           A  1762    ;x                                     IX+9    
                           A  1763    ;id                                    IX+6    
                           A  1764    
                           A  1765    
                           A  1766    ; Stack Frame Size: 15 (bytes)
                           A  1767    ;       Spill Code: 0 (instruction)
                           A  1768    
                           A  1769    
                           A  1770    ;  349	
                           A  1771    ;  350	void vdp_spriteMoveBySelected(UINT16 x,
                           A  1772    ;  351	{
000766                     A  1773    _vdp_spriteMoveBySelected:
000766 CD 00 00 00         A  1774    	CALL	__frameset0
                           A  1775    ;  352		putch(23); // vdu_sys
00076A 01170000            A  1776    	LD	BC,23
00076E C5                  A  1777    	PUSH	BC
00076F CD 00 00 00         A  1778    	CALL	_putch
000773 C1                  A  1779    	POP	BC
                           A  1780    ;  353		putch(27); // sprite command
000774 011B0000            A  1781    	LD	BC,27
000778 C5                  A  1782    	PUSH	BC
000779 CD 00 00 00         A  1783    	CALL	_putch
00077D C1                  A  1784    	POP	BC
                           A  1785    ;  354		putch(14); // move by
00077E 010E0000            A  1786    	LD	BC,14
000782 C5                  A  1787    	PUSH	BC
000783 CD 00 00 00         A  1788    	CALL	_putch
000787 C1                  A  1789    	POP	BC
                           A  1790    ;  355		write16bit(x);
000788 DD0706              A  1791    	LD	BC,(IX+%6)
00078B C5                  A  1792    	PUSH	BC
00078C CD 00 00 00         A  1793    	CALL	_write16bit
000790 C1                  A  1794    	POP	BC
                           A  1795    ;  356		write16bit(y);
000791 DD0709              A  1796    	LD	BC,(IX+%9)
000794 C5                  A  1797    	PUSH	BC
000795 CD 00 00 00         A  1798    	CALL	_write16bit
000799 C1                  A  1799    	POP	BC
                           A  1800    ;  357		return;	
                           A  1801    ;  358	}
00079A DDF9                A  1802    	LD	SP,IX
00079C DDE1                A  1803    	POP	IX
00079E C9                  A  1804    	RET	
                           A  1805    
                           A  1806    
                           A  1807    ;**************************** _vdp_spriteMoveBy
                           A  1808    ;Name                         Addr/Register   S
                           A  1809    ;_putch                              IMPORT  --
                           A  1810    ;y                                     IX+9    
                           A  1811    ;x                                     IX+6    
                           A  1812    
                           A  1813    
                           A  1814    ; Stack Frame Size: 12 (bytes)
                           A  1815    ;       Spill Code: 0 (instruction)
                           A  1816    
                           A  1817    
                           A  1818    ;  359	
                           A  1819    ;  360	void vdp_spriteMoveBy(UINT8 id, UINT16 
                           A  1820    ;  361	{
00079F                     A  1821    _vdp_spriteMoveBy:
00079F CD 00 00 00         A  1822    	CALL	__frameset0
                           A  1823    ;  362		vdp_spriteSelect(id);
0007A3 DD4E06              A  1824    	LD	C,(IX+%6)
0007A6 0600                A  1825    	LD	B,%0
0007A8 C5                  A  1826    	PUSH	BC
0007A9 CD 25 05 00         A  1827    	CALL	_vdp_spriteSelect
0007AD C1                  A  1828    	POP	BC
                           A  1829    ;  363		vdp_spriteMoveBySelected(x,y);
0007AE DD070C              A  1830    	LD	BC,(IX+%C)
0007B1 C5                  A  1831    	PUSH	BC
0007B2 DD0709              A  1832    	LD	BC,(IX+%9)
0007B5 C5                  A  1833    	PUSH	BC
0007B6 CD 66 07 00         A  1834    	CALL	_vdp_spriteMoveBySelected
0007BA C1                  A  1835    	POP	BC
0007BB C1                  A  1836    	POP	BC
                           A  1837    ;  364		return;
                           A  1838    ;  365	}
0007BC DDF9                A  1839    	LD	SP,IX
0007BE DDE1                A  1840    	POP	IX
0007C0 C9                  A  1841    	RET	
                           A  1842    
                           A  1843    
                           A  1844    ;**************************** _vdp_spriteMoveBy
                           A  1845    ;Name                         Addr/Register   S
                           A  1846    ;y                                    IX+12    
                           A  1847    ;x                                     IX+9    
                           A  1848    ;id                                    IX+6    
                           A  1849    
                           A  1850    
                           A  1851    ; Stack Frame Size: 15 (bytes)
                           A  1852    ;       Spill Code: 0 (instruction)
                           A  1853    
                           A  1854    
                           A  1855    ;  366	
                           A  1856    ;  367	void vdp_spriteActivateTotal(UINT8 numb
                           A  1857    ;  368	{
0007C1                     A  1858    _vdp_spriteActivateTotal:
0007C1 CD 00 00 00         A  1859    	CALL	__frameset0
                           A  1860    ;  369		putch(23); // vdu_sys
0007C5 01170000            A  1861    	LD	BC,23
0007C9 C5                  A  1862    	PUSH	BC
0007CA CD 00 00 00         A  1863    	CALL	_putch
0007CE C1                  A  1864    	POP	BC
                           A  1865    ;  370		putch(27); // sprite command
0007CF 011B0000            A  1866    	LD	BC,27
0007D3 C5                  A  1867    	PUSH	BC
0007D4 CD 00 00 00         A  1868    	CALL	_putch
0007D8 C1                  A  1869    	POP	BC
                           A  1870    ;  371		putch(7);  // set number of sprites
0007D9 01070000            A  1871    	LD	BC,7
0007DD C5                  A  1872    	PUSH	BC
0007DE CD 00 00 00         A  1873    	CALL	_putch
0007E2 C1                  A  1874    	POP	BC
                           A  1875    ;  372		putch(number);
0007E3 DD7E06              A  1876    	LD	A,(IX+%6)
0007E6 B7ED62              A  1877    	UEXT	HL
0007E9 6F                  A  1878    	LD	L,A
0007EA E5                  A  1879    	PUSH	HL
0007EB CD 00 00 00         A  1880    	CALL	_putch
0007EF C1                  A  1881    	POP	BC
                           A  1882    ;  373		return;	
                           A  1883    ;  374	}
0007F0 DDF9                A  1884    	LD	SP,IX
0007F2 DDE1                A  1885    	POP	IX
0007F4 C9                  A  1886    	RET	
                           A  1887    
                           A  1888    
                           A  1889    ;**************************** _vdp_spriteActiva
                           A  1890    ;Name                         Addr/Register   S
                           A  1891    ;_putch                              IMPORT  --
                           A  1892    ;number                                IX+6    
                           A  1893    
                           A  1894    
                           A  1895    ; Stack Frame Size: 9 (bytes)
                           A  1896    ;       Spill Code: 0 (instruction)
                           A  1897    
                           A  1898    
                           A  1899    ;  375	
                           A  1900    ;  376	void vdp_spriteRefresh(void)
                           A  1901    ;  377	{
0007F5                     A  1902    _vdp_spriteRefresh:
                           A  1903    ;  378		putch(23);	// vdu_sys
0007F5 01170000            A  1904    	LD	BC,23
0007F9 C5                  A  1905    	PUSH	BC
0007FA CD 00 00 00         A  1906    	CALL	_putch
0007FE C1                  A  1907    	POP	BC
                           A  1908    ;  379		putch(27);	// sprite command
0007FF 011B0000            A  1909    	LD	BC,27
000803 C5                  A  1910    	PUSH	BC
000804 CD 00 00 00         A  1911    	CALL	_putch
000808 C1                  A  1912    	POP	BC
                           A  1913    ;  380		putch(15);	// refresh all sprites
000809 010F0000            A  1914    	LD	BC,15
00080D C5                  A  1915    	PUSH	BC
00080E CD 00 00 00         A  1916    	CALL	_putch
000812 C1                  A  1917    	POP	BC
                           A  1918    ;  381		return;
                           A  1919    ;  382	}
000813 C9                  A  1920    	RET	
                           A  1921    
                           A  1922    
                           A  1923    ;**************************** _vdp_spriteRefres
                           A  1924    ;Name                         Addr/Register   S
                           A  1925    ;_putch                              IMPORT  --
                           A  1926    
                           A  1927    
                           A  1928    ; Stack Frame Size: 6 (bytes)
                           A  1929    ;       Spill Code: 0 (instruction)
                           A  1930    
                           A  1931    
                           A  1932    ;  383	
                           A  1933    ;  384	UINT8 vdp_cursorGetXpos(void)
                           A  1934    ;  385	{
000814                     A  1935    _vdp_cursorGetXpos:
000814 21FDFFFF            A  1936    	LD	HL,-3
000818 CD 00 00 00         A  1937    	CALL	__frameset
                           A  1938    ;  386		unsigned int delay;
                           A  1939    ;  387		
                           A  1940    ;  388		putch(23);	// VDP command
00081C 01170000            A  1941    	LD	BC,23
000820 C5                  A  1942    	PUSH	BC
000821 CD 00 00 00         A  1943    	CALL	_putch
000825 C1                  A  1944    	POP	BC
                           A  1945    ;  389		putch(0);	// VDP command
000826 01000000            A  1946    	LD	BC,0
00082A C5                  A  1947    	PUSH	BC
00082B CD 00 00 00         A  1948    	CALL	_putch
00082F C1                  A  1949    	POP	BC
                           A  1950    ;  390		putch(2);	// Request cursor posit
000830 01020000            A  1951    	LD	BC,2
000834 C5                  A  1952    	PUSH	BC
000835 CD 00 00 00         A  1953    	CALL	_putch
000839 C1                  A  1954    	POP	BC
                           A  1955    ;  391		
                           A  1956    ;  392		delay = 255;
00083A 01FF0000            A  1957    	LD	BC,255
00083E DD0FFD              A  1958    	LD	(IX+%FFFFFFFD),BC
                           A  1959    ;  393		while(delay--);
000841                     A  1960    L_59:
000841 DD27FD              A  1961    	LD	HL,(IX+%FFFFFFFD)
000844 DD31FD              A  1962    	LD	IY,(IX+%FFFFFFFD)
000847 ED33FF              A  1963    	LEA	IY,IY+%FFFFFFFF
00084A DD3EFD              A  1964    	LD	(IX+%FFFFFFFD),IY
00084D CD 00 00 00         A  1965    	CALL	__icmpzero
000851 20 EE               A  1966    	JR	NZ,L_59
                           A  1967    ;  394		return(getsysvar8bit(sysvar_cursorX
000853 01070000            A  1968    	LD	BC,7
000857 C5                  A  1969    	PUSH	BC
000858 CD 00 00 00         A  1970    	CALL	_getsysvar8bit
00085C C1                  A  1971    	POP	BC
                           A  1972    ;  395	}
00085D DDF9                A  1973    	LD	SP,IX
00085F DDE1                A  1974    	POP	IX
000861 C9                  A  1975    	RET	
                           A  1976    
                           A  1977    
                           A  1978    ;**************************** _vdp_cursorGetXpo
                           A  1979    ;Name                         Addr/Register   S
                           A  1980    ;_getsysvar8bit                      IMPORT  --
                           A  1981    ;_putch                              IMPORT  --
                           A  1982    ;delay                                 IX-3    
                           A  1983    
                           A  1984    
                           A  1985    ; Stack Frame Size: 9 (bytes)
                           A  1986    ;       Spill Code: 0 (instruction)
                           A  1987    
                           A  1988    
                           A  1989    ;  396	
                           A  1990    ;  397	UINT8 vdp_cursorGetYpos(void)
                           A  1991    ;  398	{
000862                     A  1992    _vdp_cursorGetYpos:
000862 21FDFFFF            A  1993    	LD	HL,-3
000866 CD 00 00 00         A  1994    	CALL	__frameset
                           A  1995    ;  399		unsigned int delay;
                           A  1996    ;  400		
                           A  1997    ;  401		putch(23);	// VDP command
00086A 01170000            A  1998    	LD	BC,23
00086E C5                  A  1999    	PUSH	BC
00086F CD 00 00 00         A  2000    	CALL	_putch
000873 C1                  A  2001    	POP	BC
                           A  2002    ;  402		putch(0);	// VDP command
000874 01000000            A  2003    	LD	BC,0
000878 C5                  A  2004    	PUSH	BC
000879 CD 00 00 00         A  2005    	CALL	_putch
00087D C1                  A  2006    	POP	BC
                           A  2007    ;  403		putch(2);	// Request cursor posit
00087E 01020000            A  2008    	LD	BC,2
000882 C5                  A  2009    	PUSH	BC
000883 CD 00 00 00         A  2010    	CALL	_putch
000887 C1                  A  2011    	POP	BC
                           A  2012    ;  404		
                           A  2013    ;  405		delay = 255;
000888 01FF0000            A  2014    	LD	BC,255
00088C DD0FFD              A  2015    	LD	(IX+%FFFFFFFD),BC
                           A  2016    ;  406		while(delay--);
00088F                     A  2017    L_64:
00088F DD27FD              A  2018    	LD	HL,(IX+%FFFFFFFD)
000892 DD31FD              A  2019    	LD	IY,(IX+%FFFFFFFD)
000895 ED33FF              A  2020    	LEA	IY,IY+%FFFFFFFF
000898 DD3EFD              A  2021    	LD	(IX+%FFFFFFFD),IY
00089B CD 00 00 00         A  2022    	CALL	__icmpzero
00089F 20 EE               A  2023    	JR	NZ,L_64
                           A  2024    ;  407		return(getsysvar8bit(sysvar_cursorY
0008A1 01080000            A  2025    	LD	BC,8
0008A5 C5                  A  2026    	PUSH	BC
0008A6 CD 00 00 00         A  2027    	CALL	_getsysvar8bit
0008AA C1                  A  2028    	POP	BC
                           A  2029    ;  408	}
0008AB DDF9                A  2030    	LD	SP,IX
0008AD DDE1                A  2031    	POP	IX
0008AF C9                  A  2032    	RET	
                           A  2033    
                           A  2034    
                           A  2035    ;**************************** _vdp_cursorGetYpo
                           A  2036    ;Name                         Addr/Register   S
                           A  2037    ;_getsysvar8bit                      IMPORT  --
                           A  2038    ;_putch                              IMPORT  --
                           A  2039    ;delay                                 IX-3    
                           A  2040    
                           A  2041    
                           A  2042    ; Stack Frame Size: 9 (bytes)
                           A  2043    ;       Spill Code: 0 (instruction)
                           A  2044    
                           A  2045    
                           A  2046    ;  409	
                           A  2047    ;  410	char vdp_asciiCodeAt(unsigned char x, u
                           A  2048    ;  411	{
0008B0                     A  2049    _vdp_asciiCodeAt:
0008B0 21FDFFFF            A  2050    	LD	HL,-3
0008B4 CD 00 00 00         A  2051    	CALL	__frameset
                           A  2052    ;  412		unsigned int delay;
                           A  2053    ;  413		
                           A  2054    ;  414		putch(23);	// VDP command
0008B8 01170000            A  2055    	LD	BC,23
0008BC C5                  A  2056    	PUSH	BC
0008BD CD 00 00 00         A  2057    	CALL	_putch
0008C1 C1                  A  2058    	POP	BC
                           A  2059    ;  415		putch(0);	// VDP command
0008C2 01000000            A  2060    	LD	BC,0
0008C6 C5                  A  2061    	PUSH	BC
0008C7 CD 00 00 00         A  2062    	CALL	_putch
0008CB C1                  A  2063    	POP	BC
                           A  2064    ;  416		putch(3);	// Request ascii code a
0008CC 01030000            A  2065    	LD	BC,3
0008D0 C5                  A  2066    	PUSH	BC
0008D1 CD 00 00 00         A  2067    	CALL	_putch
0008D5 C1                  A  2068    	POP	BC
                           A  2069    ;  417		putch(x);
0008D6 DD7E06              A  2070    	LD	A,(IX+%6)
0008D9 B7ED62              A  2071    	UEXT	HL
0008DC 6F                  A  2072    	LD	L,A
0008DD E5                  A  2073    	PUSH	HL
0008DE CD 00 00 00         A  2074    	CALL	_putch
0008E2 C1                  A  2075    	POP	BC
                           A  2076    ;  418		putch(0);
0008E3 01000000            A  2077    	LD	BC,0
0008E7 C5                  A  2078    	PUSH	BC
0008E8 CD 00 00 00         A  2079    	CALL	_putch
0008EC C1                  A  2080    	POP	BC
                           A  2081    ;  419		putch(y);
0008ED DD7E09              A  2082    	LD	A,(IX+%9)
0008F0 B7ED62              A  2083    	UEXT	HL
0008F3 6F                  A  2084    	LD	L,A
0008F4 E5                  A  2085    	PUSH	HL
0008F5 CD 00 00 00         A  2086    	CALL	_putch
0008F9 C1                  A  2087    	POP	BC
                           A  2088    ;  420		putch(0);
0008FA 01000000            A  2089    	LD	BC,0
0008FE C5                  A  2090    	PUSH	BC
0008FF CD 00 00 00         A  2091    	CALL	_putch
000903 C1                  A  2092    	POP	BC
                           A  2093    ;  421		
                           A  2094    ;  422		delay = 64000;
000904 0100FA00            A  2095    	LD	BC,64000
000908 DD0FFD              A  2096    	LD	(IX+%FFFFFFFD),BC
                           A  2097    ;  423		while(delay--);
00090B                     A  2098    L_69:
00090B DD27FD              A  2099    	LD	HL,(IX+%FFFFFFFD)
00090E DD31FD              A  2100    	LD	IY,(IX+%FFFFFFFD)
000911 ED33FF              A  2101    	LEA	IY,IY+%FFFFFFFF
000914 DD3EFD              A  2102    	LD	(IX+%FFFFFFFD),IY
000917 CD 00 00 00         A  2103    	CALL	__icmpzero
00091B 20 EE               A  2104    	JR	NZ,L_69
                           A  2105    ;  424		return(getsysvar8bit(sysvar_scrchar
00091D 01090000            A  2106    	LD	BC,9
000921 C5                  A  2107    	PUSH	BC
000922 CD 00 00 00         A  2108    	CALL	_getsysvar8bit
000926 C1                  A  2109    	POP	BC
                           A  2110    ;  425	}
000927 DDF9                A  2111    	LD	SP,IX
000929 DDE1                A  2112    	POP	IX
00092B C9                  A  2113    	RET	
                           A  2114    
                           A  2115    
                           A  2116    ;**************************** _vdp_asciiCodeAt 
                           A  2117    ;Name                         Addr/Register   S
                           A  2118    ;_getsysvar8bit                      IMPORT  --
                           A  2119    ;_putch                              IMPORT  --
                           A  2120    ;delay                                 IX-3    
                           A  2121    ;y                                     IX+9    
                           A  2122    ;x                                     IX+6    
                           A  2123    
                           A  2124    
                           A  2125    ; Stack Frame Size: 15 (bytes)
                           A  2126    ;       Spill Code: 0 (instruction)
                           A  2127    
                           A  2128    
                           A  2129    ;  426	
                           A  2130    ;  427	void vdp_cursorDisable(void)
                           A  2131    ;  428	{
00092C                     A  2132    _vdp_cursorDisable:
                           A  2133    ;  429		putch(23);
00092C 01170000            A  2134    	LD	BC,23
000930 C5                  A  2135    	PUSH	BC
000931 CD 00 00 00         A  2136    	CALL	_putch
000935 C1                  A  2137    	POP	BC
                           A  2138    ;  430		putch(1);
000936 01010000            A  2139    	LD	BC,1
00093A C5                  A  2140    	PUSH	BC
00093B CD 00 00 00         A  2141    	CALL	_putch
00093F C1                  A  2142    	POP	BC
                           A  2143    ;  431		putch(0);
000940 01000000            A  2144    	LD	BC,0
000944 C5                  A  2145    	PUSH	BC
000945 CD 00 00 00         A  2146    	CALL	_putch
000949 C1                  A  2147    	POP	BC
                           A  2148    ;  432	}
00094A C9                  A  2149    	RET	
                           A  2150    
                           A  2151    
                           A  2152    ;**************************** _vdp_cursorDisabl
                           A  2153    ;Name                         Addr/Register   S
                           A  2154    ;_putch                              IMPORT  --
                           A  2155    
                           A  2156    
                           A  2157    ; Stack Frame Size: 6 (bytes)
                           A  2158    ;       Spill Code: 0 (instruction)
                           A  2159    
                           A  2160    
                           A  2161    ;  433	
                           A  2162    ;  434	void vdp_cursorEnable(void)
                           A  2163    ;  435	{
00094B                     A  2164    _vdp_cursorEnable:
                           A  2165    ;  436		putch(23);
00094B 01170000            A  2166    	LD	BC,23
00094F C5                  A  2167    	PUSH	BC
000950 CD 00 00 00         A  2168    	CALL	_putch
000954 C1                  A  2169    	POP	BC
                           A  2170    ;  437		putch(1);
000955 01010000            A  2171    	LD	BC,1
000959 C5                  A  2172    	PUSH	BC
00095A CD 00 00 00         A  2173    	CALL	_putch
00095E C1                  A  2174    	POP	BC
                           A  2175    ;  438		putch(1);
00095F 01010000            A  2176    	LD	BC,1
000963 C5                  A  2177    	PUSH	BC
000964 CD 00 00 00         A  2178    	CALL	_putch
000968 C1                  A  2179    	POP	BC
                           A  2180    ;  439	}
000969 C9                  A  2181    	RET	
                           A  2182    
                           A  2183    
                           A  2184    ;**************************** _vdp_cursorEnable
                           A  2185    ;Name                         Addr/Register   S
                           A  2186    ;_putch                              IMPORT  --
                           A  2187    
                           A  2188    
                           A  2189    ; Stack Frame Size: 6 (bytes)
                           A  2190    ;       Spill Code: 0 (instruction)
                           A  2191    
                           A  2192    
                           A  2193    ;  440	
                           A  2194    ;  441	void vdp_scroll(unsigned char extent, u
                           A  2195    ;  442	{
00096A                     A  2196    _vdp_scroll:
00096A CD 00 00 00         A  2197    	CALL	__frameset0
                           A  2198    ;  443		putch(23);
00096E 01170000            A  2199    	LD	BC,23
000972 C5                  A  2200    	PUSH	BC
000973 CD 00 00 00         A  2201    	CALL	_putch
000977 C1                  A  2202    	POP	BC
                           A  2203    ;  444		putch(7);	// scroll
000978 01070000            A  2204    	LD	BC,7
00097C C5                  A  2205    	PUSH	BC
00097D CD 00 00 00         A  2206    	CALL	_putch
000981 C1                  A  2207    	POP	BC
                           A  2208    ;  445		putch(extent);
000982 DD7E06              A  2209    	LD	A,(IX+%6)
000985 B7ED62              A  2210    	UEXT	HL
000988 6F                  A  2211    	LD	L,A
000989 E5                  A  2212    	PUSH	HL
00098A CD 00 00 00         A  2213    	CALL	_putch
00098E C1                  A  2214    	POP	BC
                           A  2215    ;  446		putch(direction);
00098F DD7E09              A  2216    	LD	A,(IX+%9)
000992 B7ED62              A  2217    	UEXT	HL
000995 6F                  A  2218    	LD	L,A
000996 E5                  A  2219    	PUSH	HL
000997 CD 00 00 00         A  2220    	CALL	_putch
00099B C1                  A  2221    	POP	BC
                           A  2222    ;  447		putch(speed);
00099C DD7E0C              A  2223    	LD	A,(IX+%C)
00099F B7ED62              A  2224    	UEXT	HL
0009A2 6F                  A  2225    	LD	L,A
0009A3 E5                  A  2226    	PUSH	HL
0009A4 CD 00 00 00         A  2227    	CALL	_putch
0009A8 C1                  A  2228    	POP	BC
0009A9 DDF9                A  2229    	LD	SP,IX
0009AB DDE1                A  2230    	POP	IX
0009AD C9                  A  2231    	RET	
                           A  2232    
                           A  2233    
                           A  2234    ;**************************** _vdp_scroll *****
                           A  2235    ;Name                         Addr/Register   S
                           A  2236    ;_putch                              IMPORT  --
                           A  2237    ;speed                                IX+12    
                           A  2238    ;direction                             IX+9    
                           A  2239    ;extent                                IX+6    
                           A  2240    
                           A  2241    
                           A  2242    ; Stack Frame Size: 15 (bytes)
                           A  2243    ;       Spill Code: 0 (instruction)
                           A  2244    
                           A  2245    
                           A  2246    	XREF _getsysvar8bit:ROM
                           A  2247    	XREF _putch:ROM
                           A  2248    	XREF __imuls:ROM
                           A  2249    	XREF __lshru:ROM
                           A  2250    	XREF __stoiu:ROM
                           A  2251    	XREF __frameset0:ROM
                           A  2252    	XREF __frameset:ROM
                           A  2253    	XREF __icmpzero:ROM
                           A  2254    	XREF __ishru_b:ROM
                           A  2255    	XREF __ishrs_b:ROM
                           A  2256    	XDEF _vdp_scroll
                           A  2257    	XDEF _vdp_cursorEnable
                           A  2258    	XDEF _vdp_cursorDisable
                           A  2259    	XDEF _vdp_asciiCodeAt
                           A  2260    	XDEF _vdp_cursorGetYpos
                           A  2261    	XDEF _vdp_cursorGetXpos
                           A  2262    	XDEF _vdp_spriteRefresh
                           A  2263    	XDEF _vdp_spriteActivateTotal
                           A  2264    	XDEF _vdp_spriteMoveBy
                           A  2265    	XDEF _vdp_spriteMoveBySelected
                           A  2266    	XDEF _vdp_spriteMoveTo
                           A  2267    	XDEF _vdp_spriteMoveToSelected
                           A  2268    	XDEF _vdp_spriteHide
                           A  2269    	XDEF _vdp_spriteHideSelected
                           A  2270    	XDEF _vdp_spriteShow
                           A  2271    	XDEF _vdp_spriteShowSelected
                           A  2272    	XDEF _vdp_spriteSetFrame
                           A  2273    	XDEF _vdp_spriteSetFrameSelected
                           A  2274    	XDEF _vdp_spritePreviousFrame
                           A  2275    	XDEF _vdp_spritePreviousFrameSelected
                           A  2276    	XDEF _vdp_spriteNextFrame
                           A  2277    	XDEF _vdp_spriteNextFrameSelected
                           A  2278    	XDEF _vdp_spriteAddFrame
                           A  2279    	XDEF _vdp_spriteAddFrameSelected
                           A  2280    	XDEF _vdp_spriteClearFrames
                           A  2281    	XDEF _vdp_spriteClearFramesSelected
                           A  2282    	XDEF _vdp_spriteSelect
                           A  2283    	XDEF _vdp_bitmapCreateSolidColor
                           A  2284    	XDEF _vdp_bitmapCreateSolidColorSelected
                           A  2285    	XDEF _vdp_bitmapDraw
                           A  2286    	XDEF _vdp_bitmapDrawSelected
                           A  2287    	XDEF _vdp_bitmapSendData
                           A  2288    	XDEF _vdp_bitmapSendDataSelected
                           A  2289    	XDEF _vdp_bitmapSelect
                           A  2290    	XDEF _vdp_plotSetOrigin
                           A  2291    	XDEF _vdp_plotCircleCircumference
                           A  2292    	XDEF _vdp_plotCircleRadius
                           A  2293    	XDEF _vdp_plotTriangle
                           A  2294    	XDEF _vdp_plotPoint
                           A  2295    	XDEF _vdp_plotLineTo
                           A  2296    	XDEF _vdp_plotMoveTo
                           A  2297    	XDEF _vdp_plot
                           A  2298    	XDEF _vdp_plotColour
                           A  2299    	XDEF _vdp_clearGraphics
                           A  2300    	XDEF _vdp_bgcolour
                           A  2301    	XDEF _vdp_fgcolour
                           A  2302    	XDEF _vdp_colour
                           A  2303    	XDEF _vdp_cursorGoto
                           A  2304    	XDEF _vdp_cursorUp
                           A  2305    	XDEF _vdp_cursorHome
                           A  2306    	XDEF _vdp_cls
                           A  2307    	XDEF _vdp_mode
                           A  2308    	XDEF _write32bit
                           A  2309    	XDEF _write16bit
                           A  2310    	END


Errors: 0
Warnings: 0
Lines Assembled: 2311

Zilog eZ80 Macro Assembler Version 4.3 (19073001)06-Mar-23     11:30:07     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optspeed -noreduceopt -nopadbranc
                           A     3    ; -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\vdp.c"
                           A     5    	.assume ADL=1
                           A     6    	SEGMENT CODE
                           A     7    ;    1	#include <defines.h>
                           A     8    ;    2	#include "mos-interface.h"
                           A     9    ;    3	
                           A    10    ;    4	// Generic functions
                           A    11    ;    5	
                           A    12    ;    6	void write16bit(UINT16 w)
                           A    13    ;    7	{
000000                     A    14    _write16bit:
000000 CD 00 00 00         A    15    	CALL	__frameset0
                           A    16    ;    8		putch(w & 0xFF); // write LSB
000004 DD0706              A    17    	LD	BC,(IX+%6)
000007 CD 00 00 00         A    18    	CALL	__stoiu
00000B 7D                  A    19    	LD	A,L
00000C B7ED62              A    20    	UEXT	HL
00000F 6F                  A    21    	LD	L,A
000010 E5                  A    22    	PUSH	HL
000011 CD 00 00 00         A    23    	CALL	_putch
000015 C1                  A    24    	POP	BC
                           A    25    ;    9		putch(w >> 8);	 // write MSB	
000016 DD0706              A    26    	LD	BC,(IX+%6)
000019 CD 00 00 00         A    27    	CALL	__stoiu
00001D E5C1                A    28    	LD	BC,HL
00001F 3B                  A    29    	DEC	SP
000020 C5                  A    30    	PUSH	BC
000021 33                  A    31    	INC	SP
000022 F1                  A    32    	POP	AF
000023 17ED62              A    33    	SEXT	HL
000026 E5                  A    34    	PUSH	HL
000027 C5                  A    35    	PUSH	BC
000028 33                  A    36    	INC	SP
000029 C1                  A    37    	POP	BC
00002A 33                  A    38    	INC	SP
00002B 33                  A    39    	INC	SP
00002C C5                  A    40    	PUSH	BC
00002D CD 00 00 00         A    41    	CALL	_putch
000031 C1                  A    42    	POP	BC
                           A    43    ;   10	}
000032 DDF9                A    44    	LD	SP,IX
000034 DDE1                A    45    	POP	IX
000036 C9                  A    46    	RET	
                           A    47    
                           A    48    
                           A    49    ;**************************** _write16bit *****
                           A    50    ;Name                         Addr/Register   S
                           A    51    ;_putch                              IMPORT  --
                           A    52    ;w                                     IX+6    
                           A    53    
                           A    54    
                           A    55    ; Stack Frame Size: 9 (bytes)
                           A    56    ;       Spill Code: 0 (instruction)
                           A    57    
                           A    58    
                           A    59    ;   11	
                           A    60    ;   12	void write32bit(UINT32 l)
                           A    61    ;   13	{
000037                     A    62    _write32bit:
000037 21FCFFFF            A    63    	LD	HL,-4
00003B CD 00 00 00         A    64    	CALL	__frameset
                           A    65    ;   14		UINT32 temp = l;
                           A    66    ;   15		
                           A    67    ;   16		putch(temp & 0xFF); // write LSB
00003F DD2706              A    68    	LD	HL,(IX+%6)
000042 7D                  A    69    	LD	A,L
000043 B7ED62              A    70    	UEXT	HL
000046 6F                  A    71    	LD	L,A
000047 E5                  A    72    	PUSH	HL
000048 CD 00 00 00         A    73    	CALL	_putch
00004C C1                  A    74    	POP	BC
                           A    75    ;   17		temp = temp >> 8;
00004D DD0707              A    76    	LD	BC,(IX+%7)
000050 AF                  A    77    	XOR	A,A
000051 DD0FFC              A    78    	LD	(IX+%FFFFFFFC),BC
000054 DD77FF              A    79    	LD	(IX+%FFFFFFFF),A
                           A    80    ;   18		putch(temp & 0xFF);
000057 C5E1                A    81    	LD	HL,BC
000059 7D                  A    82    	LD	A,L
00005A B7ED62              A    83    	UEXT	HL
00005D 6F                  A    84    	LD	L,A
00005E E5                  A    85    	PUSH	HL
00005F CD 00 00 00         A    86    	CALL	_putch
000063 C1                  A    87    	POP	BC
                           A    88    ;   19		temp = temp >> 8;
000064 DD07FD              A    89    	LD	BC,(IX+%FFFFFFFD)
000067 AF                  A    90    	XOR	A,A
000068 DD0FFC              A    91    	LD	(IX+%FFFFFFFC),BC
00006B DD77FF              A    92    	LD	(IX+%FFFFFFFF),A
                           A    93    ;   20		putch(temp & 0xFF);
00006E C5E1                A    94    	LD	HL,BC
000070 7D                  A    95    	LD	A,L
000071 B7ED62              A    96    	UEXT	HL
000074 6F                  A    97    	LD	L,A
000075 E5                  A    98    	PUSH	HL
000076 CD 00 00 00         A    99    	CALL	_putch
00007A C1                  A   100    	POP	BC
                           A   101    ;   21		temp = temp >> 8;
00007B DD07FD              A   102    	LD	BC,(IX+%FFFFFFFD)
00007E AF                  A   103    	XOR	A,A
00007F DD0FFC              A   104    	LD	(IX+%FFFFFFFC),BC
000082 DD77FF              A   105    	LD	(IX+%FFFFFFFF),A
                           A   106    ;   22		putch(temp & 0xFF);
000085 C5E1                A   107    	LD	HL,BC
000087 7D                  A   108    	LD	A,L
000088 B7ED62              A   109    	UEXT	HL
00008B 6F                  A   110    	LD	L,A
00008C E5                  A   111    	PUSH	HL
00008D CD 00 00 00         A   112    	CALL	_putch
000091 C1                  A   113    	POP	BC
                           A   114    ;   23		return;	
                           A   115    ;   24	}
000092 DDF9                A   116    	LD	SP,IX
000094 DDE1                A   117    	POP	IX
000096 C9                  A   118    	RET	
                           A   119    
                           A   120    
                           A   121    ;**************************** _write32bit *****
                           A   122    ;Name                         Addr/Register   S
                           A   123    ;_putch                              IMPORT  --
                           A   124    ;temp                                  IX-4    
                           A   125    ;l                                     IX+6    
                           A   126    
                           A   127    
                           A   128    ; Stack Frame Size: 16 (bytes)
                           A   129    ;       Spill Code: 0 (instruction)
                           A   130    
                           A   131    
                           A   132    ;   25	
                           A   133    ;   26	void vdp_mode(unsigned char mode)
                           A   134    ;   27	{
000097                     A   135    _vdp_mode:
000097 CD 00 00 00         A   136    	CALL	__frameset0
                           A   137    ;   28	    putch(22);
00009B 01160000            A   138    	LD	BC,22
00009F C5                  A   139    	PUSH	BC
0000A0 CD 00 00 00         A   140    	CALL	_putch
0000A4 C1                  A   141    	POP	BC
                           A   142    ;   29	    putch(mode);
0000A5 DD7E06              A   143    	LD	A,(IX+%6)
0000A8 B7ED62              A   144    	UEXT	HL
0000AB 6F                  A   145    	LD	L,A
0000AC E5                  A   146    	PUSH	HL
0000AD CD 00 00 00         A   147    	CALL	_putch
0000B1 C1                  A   148    	POP	BC
                           A   149    ;   30	}
0000B2 DDF9                A   150    	LD	SP,IX
0000B4 DDE1                A   151    	POP	IX
0000B6 C9                  A   152    	RET	
                           A   153    
                           A   154    
                           A   155    ;**************************** _vdp_mode *******
                           A   156    ;Name                         Addr/Register   S
                           A   157    ;_putch                              IMPORT  --
                           A   158    ;mode                                  IX+6    
                           A   159    
                           A   160    
                           A   161    ; Stack Frame Size: 9 (bytes)
                           A   162    ;       Spill Code: 0 (instruction)
                           A   163    
                           A   164    
                           A   165    ;   31	
                           A   166    ;   32	// Text functions
                           A   167    ;   33	void vdp_cls()
                           A   168    ;   34	{
0000B7                     A   169    _vdp_cls:
                           A   170    ;   35	    putch(12);
0000B7 010C0000            A   171    	LD	BC,12
0000BB C5                  A   172    	PUSH	BC
0000BC CD 00 00 00         A   173    	CALL	_putch
0000C0 C1                  A   174    	POP	BC
                           A   175    ;   36	}
0000C1 C9                  A   176    	RET	
                           A   177    
                           A   178    
                           A   179    ;**************************** _vdp_cls ********
                           A   180    ;Name                         Addr/Register   S
                           A   181    ;_putch                              IMPORT  --
                           A   182    
                           A   183    
                           A   184    ; Stack Frame Size: 6 (bytes)
                           A   185    ;       Spill Code: 0 (instruction)
                           A   186    
                           A   187    
                           A   188    ;   37	
                           A   189    ;   38	void vdp_cursorHome()
                           A   190    ;   39	{
0000C2                     A   191    _vdp_cursorHome:
                           A   192    ;   40	    putch(30);
0000C2 011E0000            A   193    	LD	BC,30
0000C6 C5                  A   194    	PUSH	BC
0000C7 CD 00 00 00         A   195    	CALL	_putch
0000CB C1                  A   196    	POP	BC
                           A   197    ;   41	}
0000CC C9                  A   198    	RET	
                           A   199    
                           A   200    
                           A   201    ;**************************** _vdp_cursorHome *
                           A   202    ;Name                         Addr/Register   S
                           A   203    ;_putch                              IMPORT  --
                           A   204    
                           A   205    
                           A   206    ; Stack Frame Size: 6 (bytes)
                           A   207    ;       Spill Code: 0 (instruction)
                           A   208    
                           A   209    
                           A   210    ;   42	
                           A   211    ;   43	void vdp_cursorUp()
                           A   212    ;   44	{
0000CD                     A   213    _vdp_cursorUp:
                           A   214    ;   45	    putch(11);
0000CD 010B0000            A   215    	LD	BC,11
0000D1 C5                  A   216    	PUSH	BC
0000D2 CD 00 00 00         A   217    	CALL	_putch
0000D6 C1                  A   218    	POP	BC
                           A   219    ;   46	}
0000D7 C9                  A   220    	RET	
                           A   221    
                           A   222    
                           A   223    ;**************************** _vdp_cursorUp ***
                           A   224    ;Name                         Addr/Register   S
                           A   225    ;_putch                              IMPORT  --
                           A   226    
                           A   227    
                           A   228    ; Stack Frame Size: 6 (bytes)
                           A   229    ;       Spill Code: 0 (instruction)
                           A   230    
                           A   231    
                           A   232    ;   47	
                           A   233    ;   48	void vdp_cursorGoto(unsigned char x, un
                           A   234    ;   49	{
0000D8                     A   235    _vdp_cursorGoto:
0000D8 CD 00 00 00         A   236    	CALL	__frameset0
                           A   237    ;   50	    putch(31); // TAB
0000DC 011F0000            A   238    	LD	BC,31
0000E0 C5                  A   239    	PUSH	BC
0000E1 CD 00 00 00         A   240    	CALL	_putch
0000E5 C1                  A   241    	POP	BC
                           A   242    ;   51	    putch(x);
0000E6 DD7E06              A   243    	LD	A,(IX+%6)
0000E9 B7ED62              A   244    	UEXT	HL
0000EC 6F                  A   245    	LD	L,A
0000ED E5                  A   246    	PUSH	HL
0000EE CD 00 00 00         A   247    	CALL	_putch
0000F2 C1                  A   248    	POP	BC
                           A   249    ;   52	    putch(y);
0000F3 DD7E09              A   250    	LD	A,(IX+%9)
0000F6 B7ED62              A   251    	UEXT	HL
0000F9 6F                  A   252    	LD	L,A
0000FA E5                  A   253    	PUSH	HL
0000FB CD 00 00 00         A   254    	CALL	_putch
0000FF C1                  A   255    	POP	BC
                           A   256    ;   53	}
000100 DDF9                A   257    	LD	SP,IX
000102 DDE1                A   258    	POP	IX
000104 C9                  A   259    	RET	
                           A   260    
                           A   261    
                           A   262    ;**************************** _vdp_cursorGoto *
                           A   263    ;Name                         Addr/Register   S
                           A   264    ;_putch                              IMPORT  --
                           A   265    ;y                                     IX+9    
                           A   266    ;x                                     IX+6    
                           A   267    
                           A   268    
                           A   269    ; Stack Frame Size: 12 (bytes)
                           A   270    ;       Spill Code: 0 (instruction)
                           A   271    
                           A   272    
                           A   273    ;   54	
                           A   274    ;   55	void vdp_colour(unsigned char foregroun
                           A   275    ;   56	{
000105                     A   276    _vdp_colour:
000105 21FDFFFF            A   277    	LD	HL,-3
000109 CD 00 00 00         A   278    	CALL	__frameset
                           A   279    ;   57	    putch(17); // COLOUR
00010D 01110000            A   280    	LD	BC,17
000111 C5                  A   281    	PUSH	BC
000112 CD 00 00 00         A   282    	CALL	_putch
000116 C1                  A   283    	POP	BC
                           A   284    ;   58	    putch(!foreground);
000117 DD7E06              A   285    	LD	A,(IX+%6)
00011A B7                  A   286    	OR	A,A
00011B 20 09               A   287    	JR	NZ,L_8
00011D 01010000            A   288    	LD	BC,1
000121 DD0FFD              A   289    	LD	(IX+%FFFFFFFD),BC
000124 18 07               A   290    	JR	L_9
000126                     A   291    L_8:
000126 01000000            A   292    	LD	BC,0
00012A DD0FFD              A   293    	LD	(IX+%FFFFFFFD),BC
00012D                     A   294    L_9:
00012D DD07FD              A   295    	LD	BC,(IX+%FFFFFFFD)
000130 C5                  A   296    	PUSH	BC
000131 CD 00 00 00         A   297    	CALL	_putch
000135 C1                  A   298    	POP	BC
                           A   299    ;   59	    putch(r);
000136 DD7E09              A   300    	LD	A,(IX+%9)
000139 B7ED62              A   301    	UEXT	HL
00013C 6F                  A   302    	LD	L,A
00013D E5                  A   303    	PUSH	HL
00013E CD 00 00 00         A   304    	CALL	_putch
000142 C1                  A   305    	POP	BC
                           A   306    ;   60	    putch(g);
000143 DD7E0C              A   307    	LD	A,(IX+%C)
000146 B7ED62              A   308    	UEXT	HL
000149 6F                  A   309    	LD	L,A
00014A E5                  A   310    	PUSH	HL
00014B CD 00 00 00         A   311    	CALL	_putch
00014F C1                  A   312    	POP	BC
                           A   313    ;   61	    putch(b);
000150 DD7E0F              A   314    	LD	A,(IX+%F)
000153 B7ED62              A   315    	UEXT	HL
000156 6F                  A   316    	LD	L,A
000157 E5                  A   317    	PUSH	HL
000158 CD 00 00 00         A   318    	CALL	_putch
00015C C1                  A   319    	POP	BC
                           A   320    ;   62	}
00015D DDF9                A   321    	LD	SP,IX
00015F DDE1                A   322    	POP	IX
000161 C9                  A   323    	RET	
                           A   324    
                           A   325    
                           A   326    ;**************************** _vdp_colour *****
                           A   327    ;Name                         Addr/Register   S
                           A   328    ;_putch                              IMPORT  --
                           A   329    ;temp10                                IX-3    
                           A   330    ;b                                    IX+15    
                           A   331    ;g                                    IX+12    
                           A   332    ;r                                     IX+9    
                           A   333    ;foreground                            IX+6    
                           A   334    
                           A   335    
                           A   336    ; Stack Frame Size: 21 (bytes)
                           A   337    ;       Spill Code: 0 (instruction)
                           A   338    
                           A   339    
                           A   340    ;   63	
                           A   341    ;   64	void vdp_fgcolour(unsigned char r, unsi
                           A   342    ;   65	{
000162                     A   343    _vdp_fgcolour:
000162 CD 00 00 00         A   344    	CALL	__frameset0
                           A   345    ;   66	    vdp_colour(1,r,g,b);
000166 DD4E0C              A   346    	LD	C,(IX+%C)
000169 0600                A   347    	LD	B,%0
00016B C5                  A   348    	PUSH	BC
00016C DD4E09              A   349    	LD	C,(IX+%9)
00016F C5                  A   350    	PUSH	BC
000170 DD4E06              A   351    	LD	C,(IX+%6)
000173 C5                  A   352    	PUSH	BC
000174 01010000            A   353    	LD	BC,1
000178 C5                  A   354    	PUSH	BC
000179 CD 05 01 00         A   355    	CALL	_vdp_colour
00017D C1                  A   356    	POP	BC
00017E C1                  A   357    	POP	BC
00017F C1                  A   358    	POP	BC
000180 C1                  A   359    	POP	BC
                           A   360    ;   67	}
000181 DDF9                A   361    	LD	SP,IX
000183 DDE1                A   362    	POP	IX
000185 C9                  A   363    	RET	
                           A   364    
                           A   365    
                           A   366    ;**************************** _vdp_fgcolour ***
                           A   367    ;Name                         Addr/Register   S
                           A   368    ;b                                    IX+12    
                           A   369    ;g                                     IX+9    
                           A   370    ;r                                     IX+6    
                           A   371    
                           A   372    
                           A   373    ; Stack Frame Size: 15 (bytes)
                           A   374    ;       Spill Code: 0 (instruction)
                           A   375    
                           A   376    
                           A   377    ;   68	
                           A   378    ;   69	void vdp_bgcolour(unsigned char r, unsi
                           A   379    ;   70	{
000186                     A   380    _vdp_bgcolour:
000186 CD 00 00 00         A   381    	CALL	__frameset0
                           A   382    ;   71	    vdp_colour(0,r,g,b);
00018A DD4E0C              A   383    	LD	C,(IX+%C)
00018D 0600                A   384    	LD	B,%0
00018F C5                  A   385    	PUSH	BC
000190 DD4E09              A   386    	LD	C,(IX+%9)
000193 C5                  A   387    	PUSH	BC
000194 DD4E06              A   388    	LD	C,(IX+%6)
000197 C5                  A   389    	PUSH	BC
000198 01000000            A   390    	LD	BC,0
00019C C5                  A   391    	PUSH	BC
00019D CD 05 01 00         A   392    	CALL	_vdp_colour
0001A1 C1                  A   393    	POP	BC
0001A2 C1                  A   394    	POP	BC
0001A3 C1                  A   395    	POP	BC
0001A4 C1                  A   396    	POP	BC
                           A   397    ;   72	}
0001A5 DDF9                A   398    	LD	SP,IX
0001A7 DDE1                A   399    	POP	IX
0001A9 C9                  A   400    	RET	
                           A   401    
                           A   402    
                           A   403    ;**************************** _vdp_bgcolour ***
                           A   404    ;Name                         Addr/Register   S
                           A   405    ;b                                    IX+12    
                           A   406    ;g                                     IX+9    
                           A   407    ;r                                     IX+6    
                           A   408    
                           A   409    
                           A   410    ; Stack Frame Size: 15 (bytes)
                           A   411    ;       Spill Code: 0 (instruction)
                           A   412    
                           A   413    
                           A   414    ;   73	
                           A   415    ;   74	//
                           A   416    ;   75	// Graphics functions
                           A   417    ;   76	//
                           A   418    ;   77	
                           A   419    ;   78	void vdp_clearGraphics()
                           A   420    ;   79	{
0001AA                     A   421    _vdp_clearGraphics:
                           A   422    ;   80	    putch(16);    
0001AA 01100000            A   423    	LD	BC,16
0001AE C5                  A   424    	PUSH	BC
0001AF CD 00 00 00         A   425    	CALL	_putch
0001B3 C1                  A   426    	POP	BC
                           A   427    ;   81	}
0001B4 C9                  A   428    	RET	
                           A   429    
                           A   430    
                           A   431    ;**************************** _vdp_clearGraphic
                           A   432    ;Name                         Addr/Register   S
                           A   433    ;_putch                              IMPORT  --
                           A   434    
                           A   435    
                           A   436    ; Stack Frame Size: 6 (bytes)
                           A   437    ;       Spill Code: 0 (instruction)
                           A   438    
                           A   439    
                           A   440    ;   82	
                           A   441    ;   83	void vdp_plotColour(unsigned char r, un
                           A   442    ;   84	{
0001B5                     A   443    _vdp_plotColour:
0001B5 CD 00 00 00         A   444    	CALL	__frameset0
                           A   445    ;   85	    putch(18); // GCOL
0001B9 01120000            A   446    	LD	BC,18
0001BD C5                  A   447    	PUSH	BC
0001BE CD 00 00 00         A   448    	CALL	_putch
0001C2 C1                  A   449    	POP	BC
                           A   450    ;   86	    putch(0);
0001C3 01000000            A   451    	LD	BC,0
0001C7 C5                  A   452    	PUSH	BC
0001C8 CD 00 00 00         A   453    	CALL	_putch
0001CC C1                  A   454    	POP	BC
                           A   455    ;   87	    putch(r);
0001CD DD7E06              A   456    	LD	A,(IX+%6)
0001D0 B7ED62              A   457    	UEXT	HL
0001D3 6F                  A   458    	LD	L,A
0001D4 E5                  A   459    	PUSH	HL
0001D5 CD 00 00 00         A   460    	CALL	_putch
0001D9 C1                  A   461    	POP	BC
                           A   462    ;   88	    putch(g);
0001DA DD7E09              A   463    	LD	A,(IX+%9)
0001DD B7ED62              A   464    	UEXT	HL
0001E0 6F                  A   465    	LD	L,A
0001E1 E5                  A   466    	PUSH	HL
0001E2 CD 00 00 00         A   467    	CALL	_putch
0001E6 C1                  A   468    	POP	BC
                           A   469    ;   89	    putch(b);
0001E7 DD7E0C              A   470    	LD	A,(IX+%C)
0001EA B7ED62              A   471    	UEXT	HL
0001ED 6F                  A   472    	LD	L,A
0001EE E5                  A   473    	PUSH	HL
0001EF CD 00 00 00         A   474    	CALL	_putch
0001F3 C1                  A   475    	POP	BC
                           A   476    ;   90	}
0001F4 DDF9                A   477    	LD	SP,IX
0001F6 DDE1                A   478    	POP	IX
0001F8 C9                  A   479    	RET	
                           A   480    
                           A   481    
                           A   482    ;**************************** _vdp_plotColour *
                           A   483    ;Name                         Addr/Register   S
                           A   484    ;_putch                              IMPORT  --
                           A   485    ;b                                    IX+12    
                           A   486    ;g                                     IX+9    
                           A   487    ;r                                     IX+6    
                           A   488    
                           A   489    
                           A   490    ; Stack Frame Size: 15 (bytes)
                           A   491    ;       Spill Code: 0 (instruction)
                           A   492    
                           A   493    
                           A   494    ;   91	
                           A   495    ;   92	// internal function
                           A   496    ;   93	void vdp_plot(unsigned char mode, unsig
                           A   497    ;   94	{
0001F9                     A   498    _vdp_plot:
0001F9 21FFFFFF            A   499    	LD	HL,-1
0001FD CD 00 00 00         A   500    	CALL	__frameset
                           A   501    ;   95	    putch(25); // PLOT
000201 01190000            A   502    	LD	BC,25
000205 C5                  A   503    	PUSH	BC
000206 CD 00 00 00         A   504    	CALL	_putch
00020A C1                  A   505    	POP	BC
                           A   506    ;   96	    putch(mode);
00020B DD7E06              A   507    	LD	A,(IX+%6)
00020E B7ED62              A   508    	UEXT	HL
000211 6F                  A   509    	LD	L,A
000212 E5                  A   510    	PUSH	HL
000213 CD 00 00 00         A   511    	CALL	_putch
000217 C1                  A   512    	POP	BC
                           A   513    ;   97	    putch(x & 0xFF);
000218 DD7E09              A   514    	LD	A,(IX+%9)
00021B B7ED62              A   515    	UEXT	HL
00021E 6F                  A   516    	LD	L,A
00021F E5                  A   517    	PUSH	HL
000220 DD77FF              A   518    	LD	(IX+%FFFFFFFF),A
000223 CD 00 00 00         A   519    	CALL	_putch
000227 DD7EFF              A   520    	LD	A,(IX+%FFFFFFFF)
00022A C1                  A   521    	POP	BC
                           A   522    ;   98	    putch(x >> 8);
00022B B7ED62              A   523    	UEXT	HL
00022E E5                  A   524    	PUSH	HL
00022F DD2709              A   525    	LD	HL,(IX+%9)
000232 E5                  A   526    	PUSH	HL
000233 33                  A   527    	INC	SP
000234 E1                  A   528    	POP	HL
000235 33                  A   529    	INC	SP
000236 33                  A   530    	INC	SP
000237 E5                  A   531    	PUSH	HL
000238 CD 00 00 00         A   532    	CALL	_putch
00023C C1                  A   533    	POP	BC
                           A   534    ;   99	    putch(y & 0xFF);
00023D DD7E0C              A   535    	LD	A,(IX+%C)
000240 B7ED62              A   536    	UEXT	HL
000243 6F                  A   537    	LD	L,A
000244 E5                  A   538    	PUSH	HL
000245 DD77FF              A   539    	LD	(IX+%FFFFFFFF),A
000248 CD 00 00 00         A   540    	CALL	_putch
00024C DD7EFF              A   541    	LD	A,(IX+%FFFFFFFF)
00024F C1                  A   542    	POP	BC
                           A   543    ;  100	    putch(y >> 8);
000250 B7ED62              A   544    	UEXT	HL
000253 E5                  A   545    	PUSH	HL
000254 DD270C              A   546    	LD	HL,(IX+%C)
000257 E5                  A   547    	PUSH	HL
000258 33                  A   548    	INC	SP
000259 E1                  A   549    	POP	HL
00025A 33                  A   550    	INC	SP
00025B 33                  A   551    	INC	SP
00025C E5                  A   552    	PUSH	HL
00025D CD 00 00 00         A   553    	CALL	_putch
000261 C1                  A   554    	POP	BC
                           A   555    ;  101	}
000262 DDF9                A   556    	LD	SP,IX
000264 DDE1                A   557    	POP	IX
000266 C9                  A   558    	RET	
                           A   559    
                           A   560    
                           A   561    ;**************************** _vdp_plot *******
                           A   562    ;Name                         Addr/Register   S
                           A   563    ;_putch                              IMPORT  --
                           A   564    ;y                                    IX+12    
                           A   565    ;x                                     IX+9    
                           A   566    ;mode                                  IX+6    
                           A   567    
                           A   568    
                           A   569    ; Stack Frame Size: 16 (bytes)
                           A   570    ;       Spill Code: 0 (instruction)
                           A   571    
                           A   572    
                           A   573    ;  102	
                           A   574    ;  103	void vdp_plotMoveTo(unsigned int x, uns
                           A   575    ;  104	{
000267                     A   576    _vdp_plotMoveTo:
000267 CD 00 00 00         A   577    	CALL	__frameset0
                           A   578    ;  105		vdp_plot(0x04,x,y);
00026B DD0709              A   579    	LD	BC,(IX+%9)
00026E C5                  A   580    	PUSH	BC
00026F DD0706              A   581    	LD	BC,(IX+%6)
000272 C5                  A   582    	PUSH	BC
000273 01040000            A   583    	LD	BC,4
000277 C5                  A   584    	PUSH	BC
000278 CD F9 01 00         A   585    	CALL	_vdp_plot
00027C C1                  A   586    	POP	BC
00027D C1                  A   587    	POP	BC
00027E C1                  A   588    	POP	BC
                           A   589    ;  106	}
00027F DDF9                A   590    	LD	SP,IX
000281 DDE1                A   591    	POP	IX
000283 C9                  A   592    	RET	
                           A   593    
                           A   594    
                           A   595    ;**************************** _vdp_plotMoveTo *
                           A   596    ;Name                         Addr/Register   S
                           A   597    ;y                                     IX+9    
                           A   598    ;x                                     IX+6    
                           A   599    
                           A   600    
                           A   601    ; Stack Frame Size: 12 (bytes)
                           A   602    ;       Spill Code: 0 (instruction)
                           A   603    
                           A   604    
                           A   605    ;  107	
                           A   606    ;  108	void vdp_plotLineTo(unsigned int x, uns
                           A   607    ;  109	{
000284                     A   608    _vdp_plotLineTo:
000284 CD 00 00 00         A   609    	CALL	__frameset0
                           A   610    ;  110		vdp_plot(0x05,x,y);
000288 DD0709              A   611    	LD	BC,(IX+%9)
00028B C5                  A   612    	PUSH	BC
00028C DD0706              A   613    	LD	BC,(IX+%6)
00028F C5                  A   614    	PUSH	BC
000290 01050000            A   615    	LD	BC,5
000294 C5                  A   616    	PUSH	BC
000295 CD F9 01 00         A   617    	CALL	_vdp_plot
000299 C1                  A   618    	POP	BC
00029A C1                  A   619    	POP	BC
00029B C1                  A   620    	POP	BC
                           A   621    ;  111	}
00029C DDF9                A   622    	LD	SP,IX
00029E DDE1                A   623    	POP	IX
0002A0 C9                  A   624    	RET	
                           A   625    
                           A   626    
                           A   627    ;**************************** _vdp_plotLineTo *
                           A   628    ;Name                         Addr/Register   S
                           A   629    ;y                                     IX+9    
                           A   630    ;x                                     IX+6    
                           A   631    
                           A   632    
                           A   633    ; Stack Frame Size: 12 (bytes)
                           A   634    ;       Spill Code: 0 (instruction)
                           A   635    
                           A   636    
                           A   637    ;  112	
                           A   638    ;  113	void vdp_plotPoint(unsigned int x, unsi
                           A   639    ;  114	{
0002A1                     A   640    _vdp_plotPoint:
0002A1 CD 00 00 00         A   641    	CALL	__frameset0
                           A   642    ;  115		vdp_plot(0x40,x,y);
0002A5 DD0709              A   643    	LD	BC,(IX+%9)
0002A8 C5                  A   644    	PUSH	BC
0002A9 DD0706              A   645    	LD	BC,(IX+%6)
0002AC C5                  A   646    	PUSH	BC
0002AD 01400000            A   647    	LD	BC,64
0002B1 C5                  A   648    	PUSH	BC
0002B2 CD F9 01 00         A   649    	CALL	_vdp_plot
0002B6 C1                  A   650    	POP	BC
0002B7 C1                  A   651    	POP	BC
0002B8 C1                  A   652    	POP	BC
                           A   653    ;  116	}
0002B9 DDF9                A   654    	LD	SP,IX
0002BB DDE1                A   655    	POP	IX
0002BD C9                  A   656    	RET	
                           A   657    
                           A   658    
                           A   659    ;**************************** _vdp_plotPoint **
                           A   660    ;Name                         Addr/Register   S
                           A   661    ;y                                     IX+9    
                           A   662    ;x                                     IX+6    
                           A   663    
                           A   664    
                           A   665    ; Stack Frame Size: 12 (bytes)
                           A   666    ;       Spill Code: 0 (instruction)
                           A   667    
                           A   668    
                           A   669    ;  117	
                           A   670    ;  118	void vdp_plotTriangle(unsigned int x, u
                           A   671    ;  119	{
0002BE                     A   672    _vdp_plotTriangle:
0002BE CD 00 00 00         A   673    	CALL	__frameset0
                           A   674    ;  120		vdp_plot(0x50,x,y);
0002C2 DD0709              A   675    	LD	BC,(IX+%9)
0002C5 C5                  A   676    	PUSH	BC
0002C6 DD0706              A   677    	LD	BC,(IX+%6)
0002C9 C5                  A   678    	PUSH	BC
0002CA 01500000            A   679    	LD	BC,80
0002CE C5                  A   680    	PUSH	BC
0002CF CD F9 01 00         A   681    	CALL	_vdp_plot
0002D3 C1                  A   682    	POP	BC
0002D4 C1                  A   683    	POP	BC
0002D5 C1                  A   684    	POP	BC
                           A   685    ;  121	}
0002D6 DDF9                A   686    	LD	SP,IX
0002D8 DDE1                A   687    	POP	IX
0002DA C9                  A   688    	RET	
                           A   689    
                           A   690    
                           A   691    ;**************************** _vdp_plotTriangle
                           A   692    ;Name                         Addr/Register   S
                           A   693    ;y                                     IX+9    
                           A   694    ;x                                     IX+6    
                           A   695    
                           A   696    
                           A   697    ; Stack Frame Size: 12 (bytes)
                           A   698    ;       Spill Code: 0 (instruction)
                           A   699    
                           A   700    
                           A   701    ;  122	
                           A   702    ;  123	void vdp_plotCircleRadius(unsigned int 
                           A   703    ;  124	{
0002DB                     A   704    _vdp_plotCircleRadius:
0002DB CD 00 00 00         A   705    	CALL	__frameset0
                           A   706    ;  125		vdp_plot(0x90,r,0);
0002DF 01000000            A   707    	LD	BC,0
0002E3 C5                  A   708    	PUSH	BC
0002E4 DD0706              A   709    	LD	BC,(IX+%6)
0002E7 C5                  A   710    	PUSH	BC
0002E8 01900000            A   711    	LD	BC,144
0002EC C5                  A   712    	PUSH	BC
0002ED CD F9 01 00         A   713    	CALL	_vdp_plot
0002F1 C1                  A   714    	POP	BC
0002F2 C1                  A   715    	POP	BC
0002F3 C1                  A   716    	POP	BC
                           A   717    ;  126	}
0002F4 DDF9                A   718    	LD	SP,IX
0002F6 DDE1                A   719    	POP	IX
0002F8 C9                  A   720    	RET	
                           A   721    
                           A   722    
                           A   723    ;**************************** _vdp_plotCircleRa
                           A   724    ;Name                         Addr/Register   S
                           A   725    ;r                                     IX+6    
                           A   726    
                           A   727    
                           A   728    ; Stack Frame Size: 9 (bytes)
                           A   729    ;       Spill Code: 0 (instruction)
                           A   730    
                           A   731    
                           A   732    ;  127	
                           A   733    ;  128	void vdp_plotCircleCircumference(unsign
                           A   734    ;  129	{
0002F9                     A   735    _vdp_plotCircleCircumference:
0002F9 CD 00 00 00         A   736    	CALL	__frameset0
                           A   737    ;  130		vdp_plot(0x95,x,y);
0002FD DD0709              A   738    	LD	BC,(IX+%9)
000300 C5                  A   739    	PUSH	BC
000301 DD0706              A   740    	LD	BC,(IX+%6)
000304 C5                  A   741    	PUSH	BC
000305 01950000            A   742    	LD	BC,149
000309 C5                  A   743    	PUSH	BC
00030A CD F9 01 00         A   744    	CALL	_vdp_plot
00030E C1                  A   745    	POP	BC
00030F C1                  A   746    	POP	BC
000310 C1                  A   747    	POP	BC
                           A   748    ;  131	}
000311 DDF9                A   749    	LD	SP,IX
000313 DDE1                A   750    	POP	IX
000315 C9                  A   751    	RET	
                           A   752    
                           A   753    
                           A   754    ;**************************** _vdp_plotCircleCi
                           A   755    ;Name                         Addr/Register   S
                           A   756    ;y                                     IX+9    
                           A   757    ;x                                     IX+6    
                           A   758    
                           A   759    
                           A   760    ; Stack Frame Size: 12 (bytes)
                           A   761    ;       Spill Code: 0 (instruction)
                           A   762    
                           A   763    
                           A   764    ;  132	
                           A   765    ;  133	void vdp_plotSetOrigin(unsigned int x, 
                           A   766    ;  134	{
000316                     A   767    _vdp_plotSetOrigin:
000316 21FFFFFF            A   768    	LD	HL,-1
00031A CD 00 00 00         A   769    	CALL	__frameset
                           A   770    ;  135	    putch(29); //Graphics ORIGIN
00031E 011D0000            A   771    	LD	BC,29
000322 C5                  A   772    	PUSH	BC
000323 CD 00 00 00         A   773    	CALL	_putch
000327 C1                  A   774    	POP	BC
                           A   775    ;  136	    putch(x & 0xF);
000328 DD7E06              A   776    	LD	A,(IX+%6)
00032B E60F                A   777    	AND	A,%F
00032D B7ED62              A   778    	UEXT	HL
000330 6F                  A   779    	LD	L,A
000331 E5                  A   780    	PUSH	HL
000332 DD77FF              A   781    	LD	(IX+%FFFFFFFF),A
000335 CD 00 00 00         A   782    	CALL	_putch
000339 DD7EFF              A   783    	LD	A,(IX+%FFFFFFFF)
00033C C1                  A   784    	POP	BC
                           A   785    ;  137	    putch(x >> 8);
00033D B7ED62              A   786    	UEXT	HL
000340 E5                  A   787    	PUSH	HL
000341 DD2706              A   788    	LD	HL,(IX+%6)
000344 E5                  A   789    	PUSH	HL
000345 33                  A   790    	INC	SP
000346 E1                  A   791    	POP	HL
000347 33                  A   792    	INC	SP
000348 33                  A   793    	INC	SP
000349 E5                  A   794    	PUSH	HL
00034A CD 00 00 00         A   795    	CALL	_putch
00034E C1                  A   796    	POP	BC
                           A   797    ;  138	    putch(y & 0xF);
00034F DD7E09              A   798    	LD	A,(IX+%9)
000352 E60F                A   799    	AND	A,%F
000354 B7ED62              A   800    	UEXT	HL
000357 6F                  A   801    	LD	L,A
000358 E5                  A   802    	PUSH	HL
000359 DD77FF              A   803    	LD	(IX+%FFFFFFFF),A
00035C CD 00 00 00         A   804    	CALL	_putch
000360 DD7EFF              A   805    	LD	A,(IX+%FFFFFFFF)
000363 C1                  A   806    	POP	BC
                           A   807    ;  139	    putch(y >> 8);
000364 B7ED62              A   808    	UEXT	HL
000367 E5                  A   809    	PUSH	HL
000368 DD2709              A   810    	LD	HL,(IX+%9)
00036B E5                  A   811    	PUSH	HL
00036C 33                  A   812    	INC	SP
00036D E1                  A   813    	POP	HL
00036E 33                  A   814    	INC	SP
00036F 33                  A   815    	INC	SP
000370 E5                  A   816    	PUSH	HL
000371 CD 00 00 00         A   817    	CALL	_putch
000375 C1                  A   818    	POP	BC
                           A   819    ;  140	}
000376 DDF9                A   820    	LD	SP,IX
000378 DDE1                A   821    	POP	IX
00037A C9                  A   822    	RET	
                           A   823    
                           A   824    
                           A   825    ;**************************** _vdp_plotSetOrigi
                           A   826    ;Name                         Addr/Register   S
                           A   827    ;_putch                              IMPORT  --
                           A   828    ;y                                     IX+9    
                           A   829    ;x                                     IX+6    
                           A   830    
                           A   831    
                           A   832    ; Stack Frame Size: 13 (bytes)
                           A   833    ;       Spill Code: 0 (instruction)
                           A   834    
                           A   835    
                           A   836    ;  141	
                           A   837    ;  142	// Bitmap VDP functions
                           A   838    ;  143	void vdp_bitmapSelect(UINT8 id)
                           A   839    ;  144	{
00037B                     A   840    _vdp_bitmapSelect:
00037B CD 00 00 00         A   841    	CALL	__frameset0
                           A   842    ;  145		putch(23); // vdu_sys
00037F 01170000            A   843    	LD	BC,23
000383 C5                  A   844    	PUSH	BC
000384 CD 00 00 00         A   845    	CALL	_putch
000388 C1                  A   846    	POP	BC
                           A   847    ;  146		putch(27); // sprite command
000389 011B0000            A   848    	LD	BC,27
00038D C5                  A   849    	PUSH	BC
00038E CD 00 00 00         A   850    	CALL	_putch
000392 C1                  A   851    	POP	BC
                           A   852    ;  147		putch(0);  // select command
000393 01000000            A   853    	LD	BC,0
000397 C5                  A   854    	PUSH	BC
000398 CD 00 00 00         A   855    	CALL	_putch
00039C C1                  A   856    	POP	BC
                           A   857    ;  148		putch(id); // bitmap_id
00039D DD7E06              A   858    	LD	A,(IX+%6)
0003A0 B7ED62              A   859    	UEXT	HL
0003A3 6F                  A   860    	LD	L,A
0003A4 E5                  A   861    	PUSH	HL
0003A5 CD 00 00 00         A   862    	CALL	_putch
0003A9 C1                  A   863    	POP	BC
                           A   864    ;  149		return;	
                           A   865    ;  150	}
0003AA DDF9                A   866    	LD	SP,IX
0003AC DDE1                A   867    	POP	IX
0003AE C9                  A   868    	RET	
                           A   869    
                           A   870    
                           A   871    ;**************************** _vdp_bitmapSelect
                           A   872    ;Name                         Addr/Register   S
                           A   873    ;_putch                              IMPORT  --
                           A   874    ;id                                    IX+6    
                           A   875    
                           A   876    
                           A   877    ; Stack Frame Size: 9 (bytes)
                           A   878    ;       Spill Code: 0 (instruction)
                           A   879    
                           A   880    
                           A   881    ;  151	
                           A   882    ;  152	void vdp_bitmapSendDataSelected(UINT16 
                           A   883    ;  153	{
0003AF                     A   884    _vdp_bitmapSendDataSelected:
0003AF 21FEFFFF            A   885    	LD	HL,-2
0003B3 CD 00 00 00         A   886    	CALL	__frameset
                           A   887    ;  154		UINT16 n;
                           A   888    ;  155		
                           A   889    ;  156		putch(23); // vdu_sys
0003B7 01170000            A   890    	LD	BC,23
0003BB C5                  A   891    	PUSH	BC
0003BC CD 00 00 00         A   892    	CALL	_putch
0003C0 C1                  A   893    	POP	BC
                           A   894    ;  157		putch(27); // sprite command
0003C1 011B0000            A   895    	LD	BC,27
0003C5 C5                  A   896    	PUSH	BC
0003C6 CD 00 00 00         A   897    	CALL	_putch
0003CA C1                  A   898    	POP	BC
                           A   899    ;  158		putch(1);  // send data to selected
0003CB 01010000            A   900    	LD	BC,1
0003CF C5                  A   901    	PUSH	BC
0003D0 CD 00 00 00         A   902    	CALL	_putch
0003D4 C1                  A   903    	POP	BC
                           A   904    ;  159		
                           A   905    ;  160		write16bit(width);
0003D5 DD0706              A   906    	LD	BC,(IX+%6)
0003D8 C5                  A   907    	PUSH	BC
0003D9 CD 00 00 00         A   908    	CALL	_write16bit
0003DD C1                  A   909    	POP	BC
                           A   910    ;  161		write16bit(height);
0003DE DD0709              A   911    	LD	BC,(IX+%9)
0003E1 C5                  A   912    	PUSH	BC
0003E2 CD 00 00 00         A   913    	CALL	_write16bit
0003E6 C1                  A   914    	POP	BC
                           A   915    ;  162		
                           A   916    ;  163		for(n = 0; n < (width*height); n++)
0003E7 DD36FE00            A   917    	LD	(IX+%FFFFFFFE),%0
0003EB DD36FF00            A   918    	LD	(IX+%FFFFFFFF),%0
0003EF 18 2B               A   919    	JR	L_28
0003F1                     A   920    L_26:
                           A   921    ;  164		{
                           A   922    ;  165			write32bit(data[n]);
0003F1 DD07FE              A   923    	LD	BC,(IX+%FFFFFFFE)
0003F4 CD 00 00 00         A   924    	CALL	__stoiu
0003F8 29                  A   925    	ADD	HL,HL
0003F9 29                  A   926    	ADD	HL,HL
0003FA DD070C              A   927    	LD	BC,(IX+%C)
0003FD 09                  A   928    	ADD	HL,BC
0003FE E5FDE1              A   929    	LD	IY,HL
000401 FD0700              A   930    	LD	BC,(IY)
000404 FD7E03              A   931    	LD	A,(IY+%3)
000407 2600                A   932    	LD	H,%0
000409 6F                  A   933    	LD	L,A
00040A E5                  A   934    	PUSH	HL
00040B C5                  A   935    	PUSH	BC
00040C CD 37 00 00         A   936    	CALL	_write32bit
000410 C1                  A   937    	POP	BC
000411 C1                  A   938    	POP	BC
000412 DD27FE              A   939    	LD	HL,(IX+%FFFFFFFE)
000415 23                  A   940    	INC	HL
000416 DD75FE              A   941    	LD	(IX+%FFFFFFFE),L
000419 DD74FF              A   942    	LD	(IX+%FFFFFFFF),H
                           A   943    ;  166			//delayms(1);
                           A   944    ;  167		}
00041C                     A   945    L_28:
00041C DD0706              A   946    	LD	BC,(IX+%6)
00041F CD 00 00 00         A   947    	CALL	__stoiu
000423 E5D1                A   948    	LD	DE,HL
000425 DD0709              A   949    	LD	BC,(IX+%9)
000428 CD 00 00 00         A   950    	CALL	__stoiu
00042C E5C1                A   951    	LD	BC,HL
00042E D5E1                A   952    	LD	HL,DE
000430 CD 00 00 00         A   953    	CALL	__imuls
000434 E5D1                A   954    	LD	DE,HL
000436 DD07FE              A   955    	LD	BC,(IX+%FFFFFFFE)
000439 CD 00 00 00         A   956    	CALL	__stoiu
00043D B7                  A   957    	OR	A,A
00043E ED52                A   958    	SBC	HL,DE
000440 FA F1 03 00         A   959    	JP	M,L_26
                           A   960    ;  168		return;		
                           A   961    ;  169	}
000444 DDF9                A   962    	LD	SP,IX
000446 DDE1                A   963    	POP	IX
000448 C9                  A   964    	RET	
                           A   965    
                           A   966    
                           A   967    ;**************************** _vdp_bitmapSendDa
                           A   968    ;Name                         Addr/Register   S
                           A   969    ;_putch                              IMPORT  --
                           A   970    ;n                                     IX-2    
                           A   971    ;data                                 IX+12    
                           A   972    ;height                                IX+9    
                           A   973    ;width                                 IX+6    
                           A   974    
                           A   975    
                           A   976    ; Stack Frame Size: 17 (bytes)
                           A   977    ;       Spill Code: 0 (instruction)
                           A   978    
                           A   979    
                           A   980    ;  170	
                           A   981    ;  171	void vdp_bitmapSendData(UINT8 id, UINT1
                           A   982    ;  172	{
000449                     A   983    _vdp_bitmapSendData:
000449 CD 00 00 00         A   984    	CALL	__frameset0
                           A   985    ;  173		vdp_bitmapSelect(id);
00044D DD4E06              A   986    	LD	C,(IX+%6)
000450 0600                A   987    	LD	B,%0
000452 C5                  A   988    	PUSH	BC
000453 CD 7B 03 00         A   989    	CALL	_vdp_bitmapSelect
000457 C1                  A   990    	POP	BC
                           A   991    ;  174		vdp_bitmapSendDataSelected(width, h
000458 DD070F              A   992    	LD	BC,(IX+%F)
00045B C5                  A   993    	PUSH	BC
00045C DD070C              A   994    	LD	BC,(IX+%C)
00045F C5                  A   995    	PUSH	BC
000460 DD0709              A   996    	LD	BC,(IX+%9)
000463 C5                  A   997    	PUSH	BC
000464 CD AF 03 00         A   998    	CALL	_vdp_bitmapSendDataSelected
000468 C1                  A   999    	POP	BC
000469 C1                  A  1000    	POP	BC
00046A C1                  A  1001    	POP	BC
                           A  1002    ;  175		return;	
                           A  1003    ;  176	}
00046B DDF9                A  1004    	LD	SP,IX
00046D DDE1                A  1005    	POP	IX
00046F C9                  A  1006    	RET	
                           A  1007    
                           A  1008    
                           A  1009    ;**************************** _vdp_bitmapSendDa
                           A  1010    ;Name                         Addr/Register   S
                           A  1011    ;data                                 IX+15    
                           A  1012    ;height                               IX+12    
                           A  1013    ;width                                 IX+9    
                           A  1014    ;id                                    IX+6    
                           A  1015    
                           A  1016    
                           A  1017    ; Stack Frame Size: 18 (bytes)
                           A  1018    ;       Spill Code: 0 (instruction)
                           A  1019    
                           A  1020    
                           A  1021    ;  177	
                           A  1022    ;  178	void vdp_bitmapDrawSelected(UINT16 x, U
                           A  1023    ;  179	{
000470                     A  1024    _vdp_bitmapDrawSelected:
000470 CD 00 00 00         A  1025    	CALL	__frameset0
                           A  1026    ;  180		putch(23); // vdu_sys
000474 01170000            A  1027    	LD	BC,23
000478 C5                  A  1028    	PUSH	BC
000479 CD 00 00 00         A  1029    	CALL	_putch
00047D C1                  A  1030    	POP	BC
                           A  1031    ;  181		putch(27); // sprite command
00047E 011B0000            A  1032    	LD	BC,27
000482 C5                  A  1033    	PUSH	BC
000483 CD 00 00 00         A  1034    	CALL	_putch
000487 C1                  A  1035    	POP	BC
                           A  1036    ;  182		putch(3);  // draw selected bitmap
000488 01030000            A  1037    	LD	BC,3
00048C C5                  A  1038    	PUSH	BC
00048D CD 00 00 00         A  1039    	CALL	_putch
000491 C1                  A  1040    	POP	BC
                           A  1041    ;  183		
                           A  1042    ;  184		write16bit(x);
000492 DD0706              A  1043    	LD	BC,(IX+%6)
000495 C5                  A  1044    	PUSH	BC
000496 CD 00 00 00         A  1045    	CALL	_write16bit
00049A C1                  A  1046    	POP	BC
                           A  1047    ;  185		write16bit(y);
00049B DD0709              A  1048    	LD	BC,(IX+%9)
00049E C5                  A  1049    	PUSH	BC
00049F CD 00 00 00         A  1050    	CALL	_write16bit
0004A3 C1                  A  1051    	POP	BC
                           A  1052    ;  186		
                           A  1053    ;  187		return;
                           A  1054    ;  188	}
0004A4 DDF9                A  1055    	LD	SP,IX
0004A6 DDE1                A  1056    	POP	IX
0004A8 C9                  A  1057    	RET	
                           A  1058    
                           A  1059    
                           A  1060    ;**************************** _vdp_bitmapDrawSe
                           A  1061    ;Name                         Addr/Register   S
                           A  1062    ;_putch                              IMPORT  --
                           A  1063    ;y                                     IX+9    
                           A  1064    ;x                                     IX+6    
                           A  1065    
                           A  1066    
                           A  1067    ; Stack Frame Size: 12 (bytes)
                           A  1068    ;       Spill Code: 0 (instruction)
                           A  1069    
                           A  1070    
                           A  1071    ;  189	
                           A  1072    ;  190	void vdp_bitmapDraw(UINT8 id, UINT16 x,
                           A  1073    ;  191	{
0004A9                     A  1074    _vdp_bitmapDraw:
0004A9 CD 00 00 00         A  1075    	CALL	__frameset0
                           A  1076    ;  192		vdp_bitmapSelect(id);
0004AD DD4E06              A  1077    	LD	C,(IX+%6)
0004B0 0600                A  1078    	LD	B,%0
0004B2 C5                  A  1079    	PUSH	BC
0004B3 CD 7B 03 00         A  1080    	CALL	_vdp_bitmapSelect
0004B7 C1                  A  1081    	POP	BC
                           A  1082    ;  193		vdp_bitmapDrawSelected(x,y);
0004B8 DD070C              A  1083    	LD	BC,(IX+%C)
0004BB C5                  A  1084    	PUSH	BC
0004BC DD0709              A  1085    	LD	BC,(IX+%9)
0004BF C5                  A  1086    	PUSH	BC
0004C0 CD 70 04 00         A  1087    	CALL	_vdp_bitmapDrawSelected
0004C4 C1                  A  1088    	POP	BC
0004C5 C1                  A  1089    	POP	BC
                           A  1090    ;  194		return;	
                           A  1091    ;  195	}
0004C6 DDF9                A  1092    	LD	SP,IX
0004C8 DDE1                A  1093    	POP	IX
0004CA C9                  A  1094    	RET	
                           A  1095    
                           A  1096    
                           A  1097    ;**************************** _vdp_bitmapDraw *
                           A  1098    ;Name                         Addr/Register   S
                           A  1099    ;y                                    IX+12    
                           A  1100    ;x                                     IX+9    
                           A  1101    ;id                                    IX+6    
                           A  1102    
                           A  1103    
                           A  1104    ; Stack Frame Size: 15 (bytes)
                           A  1105    ;       Spill Code: 0 (instruction)
                           A  1106    
                           A  1107    
                           A  1108    ;  196	
                           A  1109    ;  197	void vdp_bitmapCreateSolidColorSelected
                           A  1110    ;  198	{
0004CB                     A  1111    _vdp_bitmapCreateSolidColorSelected:
0004CB CD 00 00 00         A  1112    	CALL	__frameset0
                           A  1113    ;  199		putch(23); // vdu_sys
0004CF 01170000            A  1114    	LD	BC,23
0004D3 C5                  A  1115    	PUSH	BC
0004D4 CD 00 00 00         A  1116    	CALL	_putch
0004D8 C1                  A  1117    	POP	BC
                           A  1118    ;  200		putch(27); // sprite command
0004D9 011B0000            A  1119    	LD	BC,27
0004DD C5                  A  1120    	PUSH	BC
0004DE CD 00 00 00         A  1121    	CALL	_putch
0004E2 C1                  A  1122    	POP	BC
                           A  1123    ;  201		putch(2);  // define in single colo
0004E3 01020000            A  1124    	LD	BC,2
0004E7 C5                  A  1125    	PUSH	BC
0004E8 CD 00 00 00         A  1126    	CALL	_putch
0004EC C1                  A  1127    	POP	BC
                           A  1128    ;  202		
                           A  1129    ;  203		write16bit(width);
0004ED DD0706              A  1130    	LD	BC,(IX+%6)
0004F0 C5                  A  1131    	PUSH	BC
0004F1 CD 00 00 00         A  1132    	CALL	_write16bit
0004F5 C1                  A  1133    	POP	BC
                           A  1134    ;  204		write16bit(height);
0004F6 DD0709              A  1135    	LD	BC,(IX+%9)
0004F9 C5                  A  1136    	PUSH	BC
0004FA CD 00 00 00         A  1137    	CALL	_write16bit
0004FE C1                  A  1138    	POP	BC
                           A  1139    ;  205		write32bit(abgr);
0004FF DD4E0F              A  1140    	LD	C,(IX+%F)
000502 0600                A  1141    	LD	B,%0
000504 C5                  A  1142    	PUSH	BC
000505 DD070C              A  1143    	LD	BC,(IX+%C)
000508 C5                  A  1144    	PUSH	BC
000509 CD 37 00 00         A  1145    	CALL	_write32bit
00050D C1                  A  1146    	POP	BC
00050E C1                  A  1147    	POP	BC
                           A  1148    ;  206		return;		
                           A  1149    ;  207	}
00050F DDF9                A  1150    	LD	SP,IX
000511 DDE1                A  1151    	POP	IX
000513 C9                  A  1152    	RET	
                           A  1153    
                           A  1154    
                           A  1155    ;**************************** _vdp_bitmapCreate
                           A  1156    ;Name                         Addr/Register   S
                           A  1157    ;_putch                              IMPORT  --
                           A  1158    ;abgr                                 IX+12    
                           A  1159    ;height                                IX+9    
                           A  1160    ;width                                 IX+6    
                           A  1161    
                           A  1162    
                           A  1163    ; Stack Frame Size: 18 (bytes)
                           A  1164    ;       Spill Code: 0 (instruction)
                           A  1165    
                           A  1166    
                           A  1167    ;  208	
                           A  1168    ;  209	void vdp_bitmapCreateSolidColor(UINT8 i
                           A  1169    ;  210	{
000514                     A  1170    _vdp_bitmapCreateSolidColor:
000514 CD 00 00 00         A  1171    	CALL	__frameset0
                           A  1172    ;  211		vdp_bitmapSelect(id);
000518 DD4E06              A  1173    	LD	C,(IX+%6)
00051B 0600                A  1174    	LD	B,%0
00051D C5                  A  1175    	PUSH	BC
00051E CD 7B 03 00         A  1176    	CALL	_vdp_bitmapSelect
000522 C1                  A  1177    	POP	BC
                           A  1178    ;  212		vdp_bitmapCreateSolidColorSelected(
000523 DD4E12              A  1179    	LD	C,(IX+%12)
000526 0600                A  1180    	LD	B,%0
000528 C5                  A  1181    	PUSH	BC
000529 DD070F              A  1182    	LD	BC,(IX+%F)
00052C C5                  A  1183    	PUSH	BC
00052D DD070C              A  1184    	LD	BC,(IX+%C)
000530 C5                  A  1185    	PUSH	BC
000531 DD0709              A  1186    	LD	BC,(IX+%9)
000534 C5                  A  1187    	PUSH	BC
000535 CD CB 04 00         A  1188    	CALL	_vdp_bitmapCreateSolidColorSelected
000539 C1                  A  1189    	POP	BC
00053A C1                  A  1190    	POP	BC
00053B C1                  A  1191    	POP	BC
00053C C1                  A  1192    	POP	BC
                           A  1193    ;  213		return;	
                           A  1194    ;  214	}
00053D DDF9                A  1195    	LD	SP,IX
00053F DDE1                A  1196    	POP	IX
000541 C9                  A  1197    	RET	
                           A  1198    
                           A  1199    
                           A  1200    ;**************************** _vdp_bitmapCreate
                           A  1201    ;Name                         Addr/Register   S
                           A  1202    ;abgr                                 IX+15    
                           A  1203    ;height                               IX+12    
                           A  1204    ;width                                 IX+9    
                           A  1205    ;id                                    IX+6    
                           A  1206    
                           A  1207    
                           A  1208    ; Stack Frame Size: 21 (bytes)
                           A  1209    ;       Spill Code: 0 (instruction)
                           A  1210    
                           A  1211    
                           A  1212    ;  215	
                           A  1213    ;  216	// Sprite VDP functions
                           A  1214    ;  217	void vdp_spriteSelect(UINT8 id)
                           A  1215    ;  218	{
000542                     A  1216    _vdp_spriteSelect:
000542 CD 00 00 00         A  1217    	CALL	__frameset0
                           A  1218    ;  219		putch(23); // vdu_sys
000546 01170000            A  1219    	LD	BC,23
00054A C5                  A  1220    	PUSH	BC
00054B CD 00 00 00         A  1221    	CALL	_putch
00054F C1                  A  1222    	POP	BC
                           A  1223    ;  220		putch(27); // sprite command
000550 011B0000            A  1224    	LD	BC,27
000554 C5                  A  1225    	PUSH	BC
000555 CD 00 00 00         A  1226    	CALL	_putch
000559 C1                  A  1227    	POP	BC
                           A  1228    ;  221		putch(4);  // select sprite
00055A 01040000            A  1229    	LD	BC,4
00055E C5                  A  1230    	PUSH	BC
00055F CD 00 00 00         A  1231    	CALL	_putch
000563 C1                  A  1232    	POP	BC
                           A  1233    ;  222		putch(id);
000564 DD7E06              A  1234    	LD	A,(IX+%6)
000567 B7ED62              A  1235    	UEXT	HL
00056A 6F                  A  1236    	LD	L,A
00056B E5                  A  1237    	PUSH	HL
00056C CD 00 00 00         A  1238    	CALL	_putch
000570 C1                  A  1239    	POP	BC
                           A  1240    ;  223		return;			
                           A  1241    ;  224	}
000571 DDF9                A  1242    	LD	SP,IX
000573 DDE1                A  1243    	POP	IX
000575 C9                  A  1244    	RET	
                           A  1245    
                           A  1246    
                           A  1247    ;**************************** _vdp_spriteSelect
                           A  1248    ;Name                         Addr/Register   S
                           A  1249    ;_putch                              IMPORT  --
                           A  1250    ;id                                    IX+6    
                           A  1251    
                           A  1252    
                           A  1253    ; Stack Frame Size: 9 (bytes)
                           A  1254    ;       Spill Code: 0 (instruction)
                           A  1255    
                           A  1256    
                           A  1257    ;  225	
                           A  1258    ;  226	void vdp_spriteClearFramesSelected(void
                           A  1259    ;  227	{
000576                     A  1260    _vdp_spriteClearFramesSelected:
                           A  1261    ;  228		putch(23); // vdu_sys
000576 01170000            A  1262    	LD	BC,23
00057A C5                  A  1263    	PUSH	BC
00057B CD 00 00 00         A  1264    	CALL	_putch
00057F C1                  A  1265    	POP	BC
                           A  1266    ;  229		putch(27); // sprite command
000580 011B0000            A  1267    	LD	BC,27
000584 C5                  A  1268    	PUSH	BC
000585 CD 00 00 00         A  1269    	CALL	_putch
000589 C1                  A  1270    	POP	BC
                           A  1271    ;  230		putch(5);  // clear frames
00058A 01050000            A  1272    	LD	BC,5
00058E C5                  A  1273    	PUSH	BC
00058F CD 00 00 00         A  1274    	CALL	_putch
000593 C1                  A  1275    	POP	BC
                           A  1276    ;  231		return;				
                           A  1277    ;  232	}
000594 C9                  A  1278    	RET	
                           A  1279    
                           A  1280    
                           A  1281    ;**************************** _vdp_spriteClearF
                           A  1282    ;Name                         Addr/Register   S
                           A  1283    ;_putch                              IMPORT  --
                           A  1284    
                           A  1285    
                           A  1286    ; Stack Frame Size: 6 (bytes)
                           A  1287    ;       Spill Code: 0 (instruction)
                           A  1288    
                           A  1289    
                           A  1290    ;  233	
                           A  1291    ;  234	void vdp_spriteClearFrames(UINT8 bitmap
                           A  1292    ;  235	{
000595                     A  1293    _vdp_spriteClearFrames:
000595 CD 00 00 00         A  1294    	CALL	__frameset0
                           A  1295    ;  236		vdp_spriteSelect(bitmapid);
000599 DD4E06              A  1296    	LD	C,(IX+%6)
00059C 0600                A  1297    	LD	B,%0
00059E C5                  A  1298    	PUSH	BC
00059F CD 42 05 00         A  1299    	CALL	_vdp_spriteSelect
0005A3 C1                  A  1300    	POP	BC
                           A  1301    ;  237		vdp_spriteClearFramesSelected();
0005A4 CD 76 05 00         A  1302    	CALL	_vdp_spriteClearFramesSelected
                           A  1303    ;  238		return;				
                           A  1304    ;  239	}
0005A8 DDF9                A  1305    	LD	SP,IX
0005AA DDE1                A  1306    	POP	IX
0005AC C9                  A  1307    	RET	
                           A  1308    
                           A  1309    
                           A  1310    ;**************************** _vdp_spriteClearF
                           A  1311    ;Name                         Addr/Register   S
                           A  1312    ;bitmapid                              IX+6    
                           A  1313    
                           A  1314    
                           A  1315    ; Stack Frame Size: 9 (bytes)
                           A  1316    ;       Spill Code: 0 (instruction)
                           A  1317    
                           A  1318    
                           A  1319    ;  240	
                           A  1320    ;  241	void vdp_spriteAddFrameSelected(UINT8 b
                           A  1321    ;  242	{
0005AD                     A  1322    _vdp_spriteAddFrameSelected:
0005AD CD 00 00 00         A  1323    	CALL	__frameset0
                           A  1324    ;  243		putch(23); // vdu_sys
0005B1 01170000            A  1325    	LD	BC,23
0005B5 C5                  A  1326    	PUSH	BC
0005B6 CD 00 00 00         A  1327    	CALL	_putch
0005BA C1                  A  1328    	POP	BC
                           A  1329    ;  244		putch(27); // sprite command
0005BB 011B0000            A  1330    	LD	BC,27
0005BF C5                  A  1331    	PUSH	BC
0005C0 CD 00 00 00         A  1332    	CALL	_putch
0005C4 C1                  A  1333    	POP	BC
                           A  1334    ;  245		putch(6);  // add frame
0005C5 01060000            A  1335    	LD	BC,6
0005C9 C5                  A  1336    	PUSH	BC
0005CA CD 00 00 00         A  1337    	CALL	_putch
0005CE C1                  A  1338    	POP	BC
                           A  1339    ;  246		putch(bitmapid);
0005CF DD7E06              A  1340    	LD	A,(IX+%6)
0005D2 B7ED62              A  1341    	UEXT	HL
0005D5 6F                  A  1342    	LD	L,A
0005D6 E5                  A  1343    	PUSH	HL
0005D7 CD 00 00 00         A  1344    	CALL	_putch
0005DB C1                  A  1345    	POP	BC
                           A  1346    ;  247		return;	
                           A  1347    ;  248	}
0005DC DDF9                A  1348    	LD	SP,IX
0005DE DDE1                A  1349    	POP	IX
0005E0 C9                  A  1350    	RET	
                           A  1351    
                           A  1352    
                           A  1353    ;**************************** _vdp_spriteAddFra
                           A  1354    ;Name                         Addr/Register   S
                           A  1355    ;_putch                              IMPORT  --
                           A  1356    ;bitmapid                              IX+6    
                           A  1357    
                           A  1358    
                           A  1359    ; Stack Frame Size: 9 (bytes)
                           A  1360    ;       Spill Code: 0 (instruction)
                           A  1361    
                           A  1362    
                           A  1363    ;  249	
                           A  1364    ;  250	void vdp_spriteAddFrame(UINT8 id, UINT8
                           A  1365    ;  251	{
0005E1                     A  1366    _vdp_spriteAddFrame:
0005E1 CD 00 00 00         A  1367    	CALL	__frameset0
                           A  1368    ;  252		vdp_spriteSelect(id);
0005E5 DD4E06              A  1369    	LD	C,(IX+%6)
0005E8 0600                A  1370    	LD	B,%0
0005EA C5                  A  1371    	PUSH	BC
0005EB CD 42 05 00         A  1372    	CALL	_vdp_spriteSelect
0005EF C1                  A  1373    	POP	BC
                           A  1374    ;  253		vdp_spriteAddFrameSelected(bitmapid
0005F0 DD4E09              A  1375    	LD	C,(IX+%9)
0005F3 0600                A  1376    	LD	B,%0
0005F5 C5                  A  1377    	PUSH	BC
0005F6 CD AD 05 00         A  1378    	CALL	_vdp_spriteAddFrameSelected
0005FA C1                  A  1379    	POP	BC
                           A  1380    ;  254		return;	
                           A  1381    ;  255	}
0005FB DDF9                A  1382    	LD	SP,IX
0005FD DDE1                A  1383    	POP	IX
0005FF C9                  A  1384    	RET	
                           A  1385    
                           A  1386    
                           A  1387    ;**************************** _vdp_spriteAddFra
                           A  1388    ;Name                         Addr/Register   S
                           A  1389    ;bitmapid                              IX+9    
                           A  1390    ;id                                    IX+6    
                           A  1391    
                           A  1392    
                           A  1393    ; Stack Frame Size: 12 (bytes)
                           A  1394    ;       Spill Code: 0 (instruction)
                           A  1395    
                           A  1396    
                           A  1397    ;  256	
                           A  1398    ;  257	void vdp_spriteNextFrameSelected(void)
                           A  1399    ;  258	{
000600                     A  1400    _vdp_spriteNextFrameSelected:
                           A  1401    ;  259		putch(23); // vdu_sys
000600 01170000            A  1402    	LD	BC,23
000604 C5                  A  1403    	PUSH	BC
000605 CD 00 00 00         A  1404    	CALL	_putch
000609 C1                  A  1405    	POP	BC
                           A  1406    ;  260		putch(27); // sprite command
00060A 011B0000            A  1407    	LD	BC,27
00060E C5                  A  1408    	PUSH	BC
00060F CD 00 00 00         A  1409    	CALL	_putch
000613 C1                  A  1410    	POP	BC
                           A  1411    ;  261		putch(8);  // next frame
000614 01080000            A  1412    	LD	BC,8
000618 C5                  A  1413    	PUSH	BC
000619 CD 00 00 00         A  1414    	CALL	_putch
00061D C1                  A  1415    	POP	BC
                           A  1416    ;  262		return;			
                           A  1417    ;  263	}
00061E C9                  A  1418    	RET	
                           A  1419    
                           A  1420    
                           A  1421    ;**************************** _vdp_spriteNextFr
                           A  1422    ;Name                         Addr/Register   S
                           A  1423    ;_putch                              IMPORT  --
                           A  1424    
                           A  1425    
                           A  1426    ; Stack Frame Size: 6 (bytes)
                           A  1427    ;       Spill Code: 0 (instruction)
                           A  1428    
                           A  1429    
                           A  1430    ;  264	
                           A  1431    ;  265	void vdp_spriteNextFrame(UINT8 id)
                           A  1432    ;  266	{
00061F                     A  1433    _vdp_spriteNextFrame:
00061F CD 00 00 00         A  1434    	CALL	__frameset0
                           A  1435    ;  267		vdp_spriteSelect(id);
000623 DD4E06              A  1436    	LD	C,(IX+%6)
000626 0600                A  1437    	LD	B,%0
000628 C5                  A  1438    	PUSH	BC
000629 CD 42 05 00         A  1439    	CALL	_vdp_spriteSelect
00062D C1                  A  1440    	POP	BC
                           A  1441    ;  268		vdp_spriteNextFrameSelected();
00062E CD 00 06 00         A  1442    	CALL	_vdp_spriteNextFrameSelected
                           A  1443    ;  269		return;
                           A  1444    ;  270	}
000632 DDF9                A  1445    	LD	SP,IX
000634 DDE1                A  1446    	POP	IX
000636 C9                  A  1447    	RET	
                           A  1448    
                           A  1449    
                           A  1450    ;**************************** _vdp_spriteNextFr
                           A  1451    ;Name                         Addr/Register   S
                           A  1452    ;id                                    IX+6    
                           A  1453    
                           A  1454    
                           A  1455    ; Stack Frame Size: 9 (bytes)
                           A  1456    ;       Spill Code: 0 (instruction)
                           A  1457    
                           A  1458    
                           A  1459    ;  271	
                           A  1460    ;  272	void vdp_spritePreviousFrameSelected(vo
                           A  1461    ;  273	{
000637                     A  1462    _vdp_spritePreviousFrameSelected:
                           A  1463    ;  274		putch(23); // vdu_sys
000637 01170000            A  1464    	LD	BC,23
00063B C5                  A  1465    	PUSH	BC
00063C CD 00 00 00         A  1466    	CALL	_putch
000640 C1                  A  1467    	POP	BC
                           A  1468    ;  275		putch(27); // sprite command
000641 011B0000            A  1469    	LD	BC,27
000645 C5                  A  1470    	PUSH	BC
000646 CD 00 00 00         A  1471    	CALL	_putch
00064A C1                  A  1472    	POP	BC
                           A  1473    ;  276		putch(9); // previous frame
00064B 01090000            A  1474    	LD	BC,9
00064F C5                  A  1475    	PUSH	BC
000650 CD 00 00 00         A  1476    	CALL	_putch
000654 C1                  A  1477    	POP	BC
                           A  1478    ;  277		return;	
                           A  1479    ;  278	}
000655 C9                  A  1480    	RET	
                           A  1481    
                           A  1482    
                           A  1483    ;**************************** _vdp_spritePrevio
                           A  1484    ;Name                         Addr/Register   S
                           A  1485    ;_putch                              IMPORT  --
                           A  1486    
                           A  1487    
                           A  1488    ; Stack Frame Size: 6 (bytes)
                           A  1489    ;       Spill Code: 0 (instruction)
                           A  1490    
                           A  1491    
                           A  1492    ;  279	
                           A  1493    ;  280	void vdp_spritePreviousFrame(UINT8 id)
                           A  1494    ;  281	{
000656                     A  1495    _vdp_spritePreviousFrame:
000656 CD 00 00 00         A  1496    	CALL	__frameset0
                           A  1497    ;  282		vdp_spriteSelect(id);
00065A DD4E06              A  1498    	LD	C,(IX+%6)
00065D 0600                A  1499    	LD	B,%0
00065F C5                  A  1500    	PUSH	BC
000660 CD 42 05 00         A  1501    	CALL	_vdp_spriteSelect
000664 C1                  A  1502    	POP	BC
                           A  1503    ;  283		vdp_spritePreviousFrameSelected();
000665 CD 37 06 00         A  1504    	CALL	_vdp_spritePreviousFrameSelected
                           A  1505    ;  284		return;
                           A  1506    ;  285	}
000669 DDF9                A  1507    	LD	SP,IX
00066B DDE1                A  1508    	POP	IX
00066D C9                  A  1509    	RET	
                           A  1510    
                           A  1511    
                           A  1512    ;**************************** _vdp_spritePrevio
                           A  1513    ;Name                         Addr/Register   S
                           A  1514    ;id                                    IX+6    
                           A  1515    
                           A  1516    
                           A  1517    ; Stack Frame Size: 9 (bytes)
                           A  1518    ;       Spill Code: 0 (instruction)
                           A  1519    
                           A  1520    
                           A  1521    ;  286	
                           A  1522    ;  287	void vdp_spriteSetFrameSelected(UINT8 f
                           A  1523    ;  288	{
00066E                     A  1524    _vdp_spriteSetFrameSelected:
00066E CD 00 00 00         A  1525    	CALL	__frameset0
                           A  1526    ;  289		putch(23); // vdu_sys
000672 01170000            A  1527    	LD	BC,23
000676 C5                  A  1528    	PUSH	BC
000677 CD 00 00 00         A  1529    	CALL	_putch
00067B C1                  A  1530    	POP	BC
                           A  1531    ;  290		putch(27); // sprite command
00067C 011B0000            A  1532    	LD	BC,27
000680 C5                  A  1533    	PUSH	BC
000681 CD 00 00 00         A  1534    	CALL	_putch
000685 C1                  A  1535    	POP	BC
                           A  1536    ;  291		putch(10); // set current frame
000686 010A0000            A  1537    	LD	BC,10
00068A C5                  A  1538    	PUSH	BC
00068B CD 00 00 00         A  1539    	CALL	_putch
00068F C1                  A  1540    	POP	BC
                           A  1541    ;  292		putch(framenumber);
000690 DD7E06              A  1542    	LD	A,(IX+%6)
000693 B7ED62              A  1543    	UEXT	HL
000696 6F                  A  1544    	LD	L,A
000697 E5                  A  1545    	PUSH	HL
000698 CD 00 00 00         A  1546    	CALL	_putch
00069C C1                  A  1547    	POP	BC
                           A  1548    ;  293		return;	
                           A  1549    ;  294	}
00069D DDF9                A  1550    	LD	SP,IX
00069F DDE1                A  1551    	POP	IX
0006A1 C9                  A  1552    	RET	
                           A  1553    
                           A  1554    
                           A  1555    ;**************************** _vdp_spriteSetFra
                           A  1556    ;Name                         Addr/Register   S
                           A  1557    ;_putch                              IMPORT  --
                           A  1558    ;framenumber                           IX+6    
                           A  1559    
                           A  1560    
                           A  1561    ; Stack Frame Size: 9 (bytes)
                           A  1562    ;       Spill Code: 0 (instruction)
                           A  1563    
                           A  1564    
                           A  1565    ;  295	
                           A  1566    ;  296	void vdp_spriteSetFrame(UINT8 id, UINT8
                           A  1567    ;  297	{
0006A2                     A  1568    _vdp_spriteSetFrame:
0006A2 CD 00 00 00         A  1569    	CALL	__frameset0
                           A  1570    ;  298		vdp_spriteSelect(id);
0006A6 DD4E06              A  1571    	LD	C,(IX+%6)
0006A9 0600                A  1572    	LD	B,%0
0006AB C5                  A  1573    	PUSH	BC
0006AC CD 42 05 00         A  1574    	CALL	_vdp_spriteSelect
0006B0 C1                  A  1575    	POP	BC
                           A  1576    ;  299		vdp_spriteNextFrameSelected();
0006B1 CD 00 06 00         A  1577    	CALL	_vdp_spriteNextFrameSelected
                           A  1578    ;  300		return;
                           A  1579    ;  301	}
0006B5 DDF9                A  1580    	LD	SP,IX
0006B7 DDE1                A  1581    	POP	IX
0006B9 C9                  A  1582    	RET	
                           A  1583    
                           A  1584    
                           A  1585    ;**************************** _vdp_spriteSetFra
                           A  1586    ;Name                         Addr/Register   S
                           A  1587    ;framenumber                           IX+9    
                           A  1588    ;id                                    IX+6    
                           A  1589    
                           A  1590    
                           A  1591    ; Stack Frame Size: 12 (bytes)
                           A  1592    ;       Spill Code: 0 (instruction)
                           A  1593    
                           A  1594    
                           A  1595    ;  302	
                           A  1596    ;  303	void vdp_spriteShowSelected(void)
                           A  1597    ;  304	{
0006BA                     A  1598    _vdp_spriteShowSelected:
                           A  1599    ;  305		putch(23); // vdu_sys
0006BA 01170000            A  1600    	LD	BC,23
0006BE C5                  A  1601    	PUSH	BC
0006BF CD 00 00 00         A  1602    	CALL	_putch
0006C3 C1                  A  1603    	POP	BC
                           A  1604    ;  306		putch(27); // sprite command
0006C4 011B0000            A  1605    	LD	BC,27
0006C8 C5                  A  1606    	PUSH	BC
0006C9 CD 00 00 00         A  1607    	CALL	_putch
0006CD C1                  A  1608    	POP	BC
                           A  1609    ;  307		putch(11); // show sprite
0006CE 010B0000            A  1610    	LD	BC,11
0006D2 C5                  A  1611    	PUSH	BC
0006D3 CD 00 00 00         A  1612    	CALL	_putch
0006D7 C1                  A  1613    	POP	BC
                           A  1614    ;  308		return;			
                           A  1615    ;  309	}
0006D8 C9                  A  1616    	RET	
                           A  1617    
                           A  1618    
                           A  1619    ;**************************** _vdp_spriteShowSe
                           A  1620    ;Name                         Addr/Register   S
                           A  1621    ;_putch                              IMPORT  --
                           A  1622    
                           A  1623    
                           A  1624    ; Stack Frame Size: 6 (bytes)
                           A  1625    ;       Spill Code: 0 (instruction)
                           A  1626    
                           A  1627    
                           A  1628    ;  310	
                           A  1629    ;  311	void vdp_spriteShow(UINT8 id)
                           A  1630    ;  312	{
0006D9                     A  1631    _vdp_spriteShow:
0006D9 CD 00 00 00         A  1632    	CALL	__frameset0
                           A  1633    ;  313		vdp_spriteSelect(id);
0006DD DD4E06              A  1634    	LD	C,(IX+%6)
0006E0 0600                A  1635    	LD	B,%0
0006E2 C5                  A  1636    	PUSH	BC
0006E3 CD 42 05 00         A  1637    	CALL	_vdp_spriteSelect
0006E7 C1                  A  1638    	POP	BC
                           A  1639    ;  314		vdp_spriteShowSelected();
0006E8 CD BA 06 00         A  1640    	CALL	_vdp_spriteShowSelected
                           A  1641    ;  315		return;
                           A  1642    ;  316	}
0006EC DDF9                A  1643    	LD	SP,IX
0006EE DDE1                A  1644    	POP	IX
0006F0 C9                  A  1645    	RET	
                           A  1646    
                           A  1647    
                           A  1648    ;**************************** _vdp_spriteShow *
                           A  1649    ;Name                         Addr/Register   S
                           A  1650    ;id                                    IX+6    
                           A  1651    
                           A  1652    
                           A  1653    ; Stack Frame Size: 9 (bytes)
                           A  1654    ;       Spill Code: 0 (instruction)
                           A  1655    
                           A  1656    
                           A  1657    ;  317	
                           A  1658    ;  318	void vdp_spriteHideSelected(void)
                           A  1659    ;  319	{
0006F1                     A  1660    _vdp_spriteHideSelected:
                           A  1661    ;  320		putch(23); // vdu_sys
0006F1 01170000            A  1662    	LD	BC,23
0006F5 C5                  A  1663    	PUSH	BC
0006F6 CD 00 00 00         A  1664    	CALL	_putch
0006FA C1                  A  1665    	POP	BC
                           A  1666    ;  321		putch(27); // sprite command
0006FB 011B0000            A  1667    	LD	BC,27
0006FF C5                  A  1668    	PUSH	BC
000700 CD 00 00 00         A  1669    	CALL	_putch
000704 C1                  A  1670    	POP	BC
                           A  1671    ;  322		putch(12); // hide sprite
000705 010C0000            A  1672    	LD	BC,12
000709 C5                  A  1673    	PUSH	BC
00070A CD 00 00 00         A  1674    	CALL	_putch
00070E C1                  A  1675    	POP	BC
                           A  1676    ;  323		return;		
                           A  1677    ;  324	}
00070F C9                  A  1678    	RET	
                           A  1679    
                           A  1680    
                           A  1681    ;**************************** _vdp_spriteHideSe
                           A  1682    ;Name                         Addr/Register   S
                           A  1683    ;_putch                              IMPORT  --
                           A  1684    
                           A  1685    
                           A  1686    ; Stack Frame Size: 6 (bytes)
                           A  1687    ;       Spill Code: 0 (instruction)
                           A  1688    
                           A  1689    
                           A  1690    ;  325	
                           A  1691    ;  326	void vdp_spriteHide(UINT8 id)
                           A  1692    ;  327	{
000710                     A  1693    _vdp_spriteHide:
000710 CD 00 00 00         A  1694    	CALL	__frameset0
                           A  1695    ;  328		vdp_spriteSelect(id);
000714 DD4E06              A  1696    	LD	C,(IX+%6)
000717 0600                A  1697    	LD	B,%0
000719 C5                  A  1698    	PUSH	BC
00071A CD 42 05 00         A  1699    	CALL	_vdp_spriteSelect
00071E C1                  A  1700    	POP	BC
                           A  1701    ;  329		vdp_spriteHideSelected();
00071F CD F1 06 00         A  1702    	CALL	_vdp_spriteHideSelected
                           A  1703    ;  330		return;
                           A  1704    ;  331	}
000723 DDF9                A  1705    	LD	SP,IX
000725 DDE1                A  1706    	POP	IX
000727 C9                  A  1707    	RET	
                           A  1708    
                           A  1709    
                           A  1710    ;**************************** _vdp_spriteHide *
                           A  1711    ;Name                         Addr/Register   S
                           A  1712    ;id                                    IX+6    
                           A  1713    
                           A  1714    
                           A  1715    ; Stack Frame Size: 9 (bytes)
                           A  1716    ;       Spill Code: 0 (instruction)
                           A  1717    
                           A  1718    
                           A  1719    ;  332	
                           A  1720    ;  333	void vdp_spriteMoveToSelected(UINT16 x,
                           A  1721    ;  334	{
000728                     A  1722    _vdp_spriteMoveToSelected:
000728 CD 00 00 00         A  1723    	CALL	__frameset0
                           A  1724    ;  335		putch(23); // vdu_sys
00072C 01170000            A  1725    	LD	BC,23
000730 C5                  A  1726    	PUSH	BC
000731 CD 00 00 00         A  1727    	CALL	_putch
000735 C1                  A  1728    	POP	BC
                           A  1729    ;  336		putch(27); // sprite command
000736 011B0000            A  1730    	LD	BC,27
00073A C5                  A  1731    	PUSH	BC
00073B CD 00 00 00         A  1732    	CALL	_putch
00073F C1                  A  1733    	POP	BC
                           A  1734    ;  337		putch(13); // move to
000740 010D0000            A  1735    	LD	BC,13
000744 C5                  A  1736    	PUSH	BC
000745 CD 00 00 00         A  1737    	CALL	_putch
000749 C1                  A  1738    	POP	BC
                           A  1739    ;  338		write16bit(x);
00074A DD0706              A  1740    	LD	BC,(IX+%6)
00074D C5                  A  1741    	PUSH	BC
00074E CD 00 00 00         A  1742    	CALL	_write16bit
000752 C1                  A  1743    	POP	BC
                           A  1744    ;  339		write16bit(y);
000753 DD0709              A  1745    	LD	BC,(IX+%9)
000756 C5                  A  1746    	PUSH	BC
000757 CD 00 00 00         A  1747    	CALL	_write16bit
00075B C1                  A  1748    	POP	BC
                           A  1749    ;  340		return;	
                           A  1750    ;  341	}
00075C DDF9                A  1751    	LD	SP,IX
00075E DDE1                A  1752    	POP	IX
000760 C9                  A  1753    	RET	
                           A  1754    
                           A  1755    
                           A  1756    ;**************************** _vdp_spriteMoveTo
                           A  1757    ;Name                         Addr/Register   S
                           A  1758    ;_putch                              IMPORT  --
                           A  1759    ;y                                     IX+9    
                           A  1760    ;x                                     IX+6    
                           A  1761    
                           A  1762    
                           A  1763    ; Stack Frame Size: 12 (bytes)
                           A  1764    ;       Spill Code: 0 (instruction)
                           A  1765    
                           A  1766    
                           A  1767    ;  342	
                           A  1768    ;  343	void vdp_spriteMoveTo(UINT8 id, UINT16 
                           A  1769    ;  344	{
000761                     A  1770    _vdp_spriteMoveTo:
000761 CD 00 00 00         A  1771    	CALL	__frameset0
                           A  1772    ;  345		vdp_spriteSelect(id);
000765 DD4E06              A  1773    	LD	C,(IX+%6)
000768 0600                A  1774    	LD	B,%0
00076A C5                  A  1775    	PUSH	BC
00076B CD 42 05 00         A  1776    	CALL	_vdp_spriteSelect
00076F C1                  A  1777    	POP	BC
                           A  1778    ;  346		vdp_spriteMoveToSelected(x,y);
000770 DD070C              A  1779    	LD	BC,(IX+%C)
000773 C5                  A  1780    	PUSH	BC
000774 DD0709              A  1781    	LD	BC,(IX+%9)
000777 C5                  A  1782    	PUSH	BC
000778 CD 28 07 00         A  1783    	CALL	_vdp_spriteMoveToSelected
00077C C1                  A  1784    	POP	BC
00077D C1                  A  1785    	POP	BC
                           A  1786    ;  347		return;
                           A  1787    ;  348	}
00077E DDF9                A  1788    	LD	SP,IX
000780 DDE1                A  1789    	POP	IX
000782 C9                  A  1790    	RET	
                           A  1791    
                           A  1792    
                           A  1793    ;**************************** _vdp_spriteMoveTo
                           A  1794    ;Name                         Addr/Register   S
                           A  1795    ;y                                    IX+12    
                           A  1796    ;x                                     IX+9    
                           A  1797    ;id                                    IX+6    
                           A  1798    
                           A  1799    
                           A  1800    ; Stack Frame Size: 15 (bytes)
                           A  1801    ;       Spill Code: 0 (instruction)
                           A  1802    
                           A  1803    
                           A  1804    ;  349	
                           A  1805    ;  350	void vdp_spriteMoveBySelected(UINT16 x,
                           A  1806    ;  351	{
000783                     A  1807    _vdp_spriteMoveBySelected:
000783 CD 00 00 00         A  1808    	CALL	__frameset0
                           A  1809    ;  352		putch(23); // vdu_sys
000787 01170000            A  1810    	LD	BC,23
00078B C5                  A  1811    	PUSH	BC
00078C CD 00 00 00         A  1812    	CALL	_putch
000790 C1                  A  1813    	POP	BC
                           A  1814    ;  353		putch(27); // sprite command
000791 011B0000            A  1815    	LD	BC,27
000795 C5                  A  1816    	PUSH	BC
000796 CD 00 00 00         A  1817    	CALL	_putch
00079A C1                  A  1818    	POP	BC
                           A  1819    ;  354		putch(14); // move by
00079B 010E0000            A  1820    	LD	BC,14
00079F C5                  A  1821    	PUSH	BC
0007A0 CD 00 00 00         A  1822    	CALL	_putch
0007A4 C1                  A  1823    	POP	BC
                           A  1824    ;  355		write16bit(x);
0007A5 DD0706              A  1825    	LD	BC,(IX+%6)
0007A8 C5                  A  1826    	PUSH	BC
0007A9 CD 00 00 00         A  1827    	CALL	_write16bit
0007AD C1                  A  1828    	POP	BC
                           A  1829    ;  356		write16bit(y);
0007AE DD0709              A  1830    	LD	BC,(IX+%9)
0007B1 C5                  A  1831    	PUSH	BC
0007B2 CD 00 00 00         A  1832    	CALL	_write16bit
0007B6 C1                  A  1833    	POP	BC
                           A  1834    ;  357		return;	
                           A  1835    ;  358	}
0007B7 DDF9                A  1836    	LD	SP,IX
0007B9 DDE1                A  1837    	POP	IX
0007BB C9                  A  1838    	RET	
                           A  1839    
                           A  1840    
                           A  1841    ;**************************** _vdp_spriteMoveBy
                           A  1842    ;Name                         Addr/Register   S
                           A  1843    ;_putch                              IMPORT  --
                           A  1844    ;y                                     IX+9    
                           A  1845    ;x                                     IX+6    
                           A  1846    
                           A  1847    
                           A  1848    ; Stack Frame Size: 12 (bytes)
                           A  1849    ;       Spill Code: 0 (instruction)
                           A  1850    
                           A  1851    
                           A  1852    ;  359	
                           A  1853    ;  360	void vdp_spriteMoveBy(UINT8 id, UINT16 
                           A  1854    ;  361	{
0007BC                     A  1855    _vdp_spriteMoveBy:
0007BC CD 00 00 00         A  1856    	CALL	__frameset0
                           A  1857    ;  362		vdp_spriteSelect(id);
0007C0 DD4E06              A  1858    	LD	C,(IX+%6)
0007C3 0600                A  1859    	LD	B,%0
0007C5 C5                  A  1860    	PUSH	BC
0007C6 CD 42 05 00         A  1861    	CALL	_vdp_spriteSelect
0007CA C1                  A  1862    	POP	BC
                           A  1863    ;  363		vdp_spriteMoveBySelected(x,y);
0007CB DD070C              A  1864    	LD	BC,(IX+%C)
0007CE C5                  A  1865    	PUSH	BC
0007CF DD0709              A  1866    	LD	BC,(IX+%9)
0007D2 C5                  A  1867    	PUSH	BC
0007D3 CD 83 07 00         A  1868    	CALL	_vdp_spriteMoveBySelected
0007D7 C1                  A  1869    	POP	BC
0007D8 C1                  A  1870    	POP	BC
                           A  1871    ;  364		return;
                           A  1872    ;  365	}
0007D9 DDF9                A  1873    	LD	SP,IX
0007DB DDE1                A  1874    	POP	IX
0007DD C9                  A  1875    	RET	
                           A  1876    
                           A  1877    
                           A  1878    ;**************************** _vdp_spriteMoveBy
                           A  1879    ;Name                         Addr/Register   S
                           A  1880    ;y                                    IX+12    
                           A  1881    ;x                                     IX+9    
                           A  1882    ;id                                    IX+6    
                           A  1883    
                           A  1884    
                           A  1885    ; Stack Frame Size: 15 (bytes)
                           A  1886    ;       Spill Code: 0 (instruction)
                           A  1887    
                           A  1888    
                           A  1889    ;  366	
                           A  1890    ;  367	void vdp_spriteActivateTotal(UINT8 numb
                           A  1891    ;  368	{
0007DE                     A  1892    _vdp_spriteActivateTotal:
0007DE CD 00 00 00         A  1893    	CALL	__frameset0
                           A  1894    ;  369		putch(23); // vdu_sys
0007E2 01170000            A  1895    	LD	BC,23
0007E6 C5                  A  1896    	PUSH	BC
0007E7 CD 00 00 00         A  1897    	CALL	_putch
0007EB C1                  A  1898    	POP	BC
                           A  1899    ;  370		putch(27); // sprite command
0007EC 011B0000            A  1900    	LD	BC,27
0007F0 C5                  A  1901    	PUSH	BC
0007F1 CD 00 00 00         A  1902    	CALL	_putch
0007F5 C1                  A  1903    	POP	BC
                           A  1904    ;  371		putch(7);  // set number of sprites
0007F6 01070000            A  1905    	LD	BC,7
0007FA C5                  A  1906    	PUSH	BC
0007FB CD 00 00 00         A  1907    	CALL	_putch
0007FF C1                  A  1908    	POP	BC
                           A  1909    ;  372		putch(number);
000800 DD7E06              A  1910    	LD	A,(IX+%6)
000803 B7ED62              A  1911    	UEXT	HL
000806 6F                  A  1912    	LD	L,A
000807 E5                  A  1913    	PUSH	HL
000808 CD 00 00 00         A  1914    	CALL	_putch
00080C C1                  A  1915    	POP	BC
                           A  1916    ;  373		return;	
                           A  1917    ;  374	}
00080D DDF9                A  1918    	LD	SP,IX
00080F DDE1                A  1919    	POP	IX
000811 C9                  A  1920    	RET	
                           A  1921    
                           A  1922    
                           A  1923    ;**************************** _vdp_spriteActiva
                           A  1924    ;Name                         Addr/Register   S
                           A  1925    ;_putch                              IMPORT  --
                           A  1926    ;number                                IX+6    
                           A  1927    
                           A  1928    
                           A  1929    ; Stack Frame Size: 9 (bytes)
                           A  1930    ;       Spill Code: 0 (instruction)
                           A  1931    
                           A  1932    
                           A  1933    ;  375	
                           A  1934    ;  376	void vdp_spriteRefresh(void)
                           A  1935    ;  377	{
000812                     A  1936    _vdp_spriteRefresh:
                           A  1937    ;  378		putch(23);	// vdu_sys
000812 01170000            A  1938    	LD	BC,23
000816 C5                  A  1939    	PUSH	BC
000817 CD 00 00 00         A  1940    	CALL	_putch
00081B C1                  A  1941    	POP	BC
                           A  1942    ;  379		putch(27);	// sprite command
00081C 011B0000            A  1943    	LD	BC,27
000820 C5                  A  1944    	PUSH	BC
000821 CD 00 00 00         A  1945    	CALL	_putch
000825 C1                  A  1946    	POP	BC
                           A  1947    ;  380		putch(15);	// refresh all sprites
000826 010F0000            A  1948    	LD	BC,15
00082A C5                  A  1949    	PUSH	BC
00082B CD 00 00 00         A  1950    	CALL	_putch
00082F C1                  A  1951    	POP	BC
                           A  1952    ;  381		return;
                           A  1953    ;  382	}
000830 C9                  A  1954    	RET	
                           A  1955    
                           A  1956    
                           A  1957    ;**************************** _vdp_spriteRefres
                           A  1958    ;Name                         Addr/Register   S
                           A  1959    ;_putch                              IMPORT  --
                           A  1960    
                           A  1961    
                           A  1962    ; Stack Frame Size: 6 (bytes)
                           A  1963    ;       Spill Code: 0 (instruction)
                           A  1964    
                           A  1965    
                           A  1966    ;  383	
                           A  1967    ;  384	UINT8 vdp_cursorGetXpos(void)
                           A  1968    ;  385	{
000831                     A  1969    _vdp_cursorGetXpos:
000831 21FDFFFF            A  1970    	LD	HL,-3
000835 CD 00 00 00         A  1971    	CALL	__frameset
                           A  1972    ;  386		unsigned int delay;
                           A  1973    ;  387		
                           A  1974    ;  388		putch(23);	// VDP command
000839 01170000            A  1975    	LD	BC,23
00083D C5                  A  1976    	PUSH	BC
00083E CD 00 00 00         A  1977    	CALL	_putch
000842 C1                  A  1978    	POP	BC
                           A  1979    ;  389		putch(0);	// VDP command
000843 01000000            A  1980    	LD	BC,0
000847 C5                  A  1981    	PUSH	BC
000848 CD 00 00 00         A  1982    	CALL	_putch
00084C C1                  A  1983    	POP	BC
                           A  1984    ;  390		putch(2);	// Request cursor posit
00084D 01020000            A  1985    	LD	BC,2
000851 C5                  A  1986    	PUSH	BC
000852 CD 00 00 00         A  1987    	CALL	_putch
000856 C1                  A  1988    	POP	BC
                           A  1989    ;  391		
                           A  1990    ;  392		delay = 255;
000857 01FF0000            A  1991    	LD	BC,255
00085B DD0FFD              A  1992    	LD	(IX+%FFFFFFFD),BC
                           A  1993    ;  393		while(delay--);
00085E                     A  1994    L_59:
00085E DD27FD              A  1995    	LD	HL,(IX+%FFFFFFFD)
000861 DD31FD              A  1996    	LD	IY,(IX+%FFFFFFFD)
000864 ED33FF              A  1997    	LEA	IY,IY+%FFFFFFFF
000867 DD3EFD              A  1998    	LD	(IX+%FFFFFFFD),IY
00086A 01000000            A  1999    	LD	BC,0
00086E B7                  A  2000    	OR	A,A
00086F ED42                A  2001    	SBC	HL,BC
000871 20 EB               A  2002    	JR	NZ,L_59
                           A  2003    ;  394		return(getsysvar8bit(sysvar_cursorX
000873 01070000            A  2004    	LD	BC,7
000877 C5                  A  2005    	PUSH	BC
000878 CD 00 00 00         A  2006    	CALL	_getsysvar8bit
00087C C1                  A  2007    	POP	BC
                           A  2008    ;  395	}
00087D DDF9                A  2009    	LD	SP,IX
00087F DDE1                A  2010    	POP	IX
000881 C9                  A  2011    	RET	
                           A  2012    
                           A  2013    
                           A  2014    ;**************************** _vdp_cursorGetXpo
                           A  2015    ;Name                         Addr/Register   S
                           A  2016    ;_getsysvar8bit                      IMPORT  --
                           A  2017    ;_putch                              IMPORT  --
                           A  2018    ;delay                                 IX-3    
                           A  2019    
                           A  2020    
                           A  2021    ; Stack Frame Size: 9 (bytes)
                           A  2022    ;       Spill Code: 0 (instruction)
                           A  2023    
                           A  2024    
                           A  2025    ;  396	
                           A  2026    ;  397	UINT8 vdp_cursorGetYpos(void)
                           A  2027    ;  398	{
000882                     A  2028    _vdp_cursorGetYpos:
000882 21FDFFFF            A  2029    	LD	HL,-3
000886 CD 00 00 00         A  2030    	CALL	__frameset
                           A  2031    ;  399		unsigned int delay;
                           A  2032    ;  400		
                           A  2033    ;  401		putch(23);	// VDP command
00088A 01170000            A  2034    	LD	BC,23
00088E C5                  A  2035    	PUSH	BC
00088F CD 00 00 00         A  2036    	CALL	_putch
000893 C1                  A  2037    	POP	BC
                           A  2038    ;  402		putch(0);	// VDP command
000894 01000000            A  2039    	LD	BC,0
000898 C5                  A  2040    	PUSH	BC
000899 CD 00 00 00         A  2041    	CALL	_putch
00089D C1                  A  2042    	POP	BC
                           A  2043    ;  403		putch(2);	// Request cursor posit
00089E 01020000            A  2044    	LD	BC,2
0008A2 C5                  A  2045    	PUSH	BC
0008A3 CD 00 00 00         A  2046    	CALL	_putch
0008A7 C1                  A  2047    	POP	BC
                           A  2048    ;  404		
                           A  2049    ;  405		delay = 255;
0008A8 01FF0000            A  2050    	LD	BC,255
0008AC DD0FFD              A  2051    	LD	(IX+%FFFFFFFD),BC
                           A  2052    ;  406		while(delay--);
0008AF                     A  2053    L_64:
0008AF DD27FD              A  2054    	LD	HL,(IX+%FFFFFFFD)
0008B2 DD31FD              A  2055    	LD	IY,(IX+%FFFFFFFD)
0008B5 ED33FF              A  2056    	LEA	IY,IY+%FFFFFFFF
0008B8 DD3EFD              A  2057    	LD	(IX+%FFFFFFFD),IY
0008BB 01000000            A  2058    	LD	BC,0
0008BF B7                  A  2059    	OR	A,A
0008C0 ED42                A  2060    	SBC	HL,BC
0008C2 20 EB               A  2061    	JR	NZ,L_64
                           A  2062    ;  407		return(getsysvar8bit(sysvar_cursorY
0008C4 01080000            A  2063    	LD	BC,8
0008C8 C5                  A  2064    	PUSH	BC
0008C9 CD 00 00 00         A  2065    	CALL	_getsysvar8bit
0008CD C1                  A  2066    	POP	BC
                           A  2067    ;  408	}
0008CE DDF9                A  2068    	LD	SP,IX
0008D0 DDE1                A  2069    	POP	IX
0008D2 C9                  A  2070    	RET	
                           A  2071    
                           A  2072    
                           A  2073    ;**************************** _vdp_cursorGetYpo
                           A  2074    ;Name                         Addr/Register   S
                           A  2075    ;_getsysvar8bit                      IMPORT  --
                           A  2076    ;_putch                              IMPORT  --
                           A  2077    ;delay                                 IX-3    
                           A  2078    
                           A  2079    
                           A  2080    ; Stack Frame Size: 9 (bytes)
                           A  2081    ;       Spill Code: 0 (instruction)
                           A  2082    
                           A  2083    
                           A  2084    ;  409	
                           A  2085    ;  410	char vdp_asciiCodeAt(unsigned char x, u
                           A  2086    ;  411	{
0008D3                     A  2087    _vdp_asciiCodeAt:
0008D3 21FDFFFF            A  2088    	LD	HL,-3
0008D7 CD 00 00 00         A  2089    	CALL	__frameset
                           A  2090    ;  412		unsigned int delay;
                           A  2091    ;  413		
                           A  2092    ;  414		putch(23);	// VDP command
0008DB 01170000            A  2093    	LD	BC,23
0008DF C5                  A  2094    	PUSH	BC
0008E0 CD 00 00 00         A  2095    	CALL	_putch
0008E4 C1                  A  2096    	POP	BC
                           A  2097    ;  415		putch(0);	// VDP command
0008E5 01000000            A  2098    	LD	BC,0
0008E9 C5                  A  2099    	PUSH	BC
0008EA CD 00 00 00         A  2100    	CALL	_putch
0008EE C1                  A  2101    	POP	BC
                           A  2102    ;  416		putch(3);	// Request ascii code a
0008EF 01030000            A  2103    	LD	BC,3
0008F3 C5                  A  2104    	PUSH	BC
0008F4 CD 00 00 00         A  2105    	CALL	_putch
0008F8 C1                  A  2106    	POP	BC
                           A  2107    ;  417		putch(x);
0008F9 DD7E06              A  2108    	LD	A,(IX+%6)
0008FC B7ED62              A  2109    	UEXT	HL
0008FF 6F                  A  2110    	LD	L,A
000900 E5                  A  2111    	PUSH	HL
000901 CD 00 00 00         A  2112    	CALL	_putch
000905 C1                  A  2113    	POP	BC
                           A  2114    ;  418		putch(0);
000906 01000000            A  2115    	LD	BC,0
00090A C5                  A  2116    	PUSH	BC
00090B CD 00 00 00         A  2117    	CALL	_putch
00090F C1                  A  2118    	POP	BC
                           A  2119    ;  419		putch(y);
000910 DD7E09              A  2120    	LD	A,(IX+%9)
000913 B7ED62              A  2121    	UEXT	HL
000916 6F                  A  2122    	LD	L,A
000917 E5                  A  2123    	PUSH	HL
000918 CD 00 00 00         A  2124    	CALL	_putch
00091C C1                  A  2125    	POP	BC
                           A  2126    ;  420		putch(0);
00091D 01000000            A  2127    	LD	BC,0
000921 C5                  A  2128    	PUSH	BC
000922 CD 00 00 00         A  2129    	CALL	_putch
000926 C1                  A  2130    	POP	BC
                           A  2131    ;  421		
                           A  2132    ;  422		delay = 64000;
000927 0100FA00            A  2133    	LD	BC,64000
00092B DD0FFD              A  2134    	LD	(IX+%FFFFFFFD),BC
                           A  2135    ;  423		while(delay--);
00092E                     A  2136    L_69:
00092E DD27FD              A  2137    	LD	HL,(IX+%FFFFFFFD)
000931 DD31FD              A  2138    	LD	IY,(IX+%FFFFFFFD)
000934 ED33FF              A  2139    	LEA	IY,IY+%FFFFFFFF
000937 DD3EFD              A  2140    	LD	(IX+%FFFFFFFD),IY
00093A 01000000            A  2141    	LD	BC,0
00093E B7                  A  2142    	OR	A,A
00093F ED42                A  2143    	SBC	HL,BC
000941 20 EB               A  2144    	JR	NZ,L_69
                           A  2145    ;  424		return(getsysvar8bit(sysvar_scrchar
000943 01090000            A  2146    	LD	BC,9
000947 C5                  A  2147    	PUSH	BC
000948 CD 00 00 00         A  2148    	CALL	_getsysvar8bit
00094C C1                  A  2149    	POP	BC
                           A  2150    ;  425	}
00094D DDF9                A  2151    	LD	SP,IX
00094F DDE1                A  2152    	POP	IX
000951 C9                  A  2153    	RET	
                           A  2154    
                           A  2155    
                           A  2156    ;**************************** _vdp_asciiCodeAt 
                           A  2157    ;Name                         Addr/Register   S
                           A  2158    ;_getsysvar8bit                      IMPORT  --
                           A  2159    ;_putch                              IMPORT  --
                           A  2160    ;delay                                 IX-3    
                           A  2161    ;y                                     IX+9    
                           A  2162    ;x                                     IX+6    
                           A  2163    
                           A  2164    
                           A  2165    ; Stack Frame Size: 15 (bytes)
                           A  2166    ;       Spill Code: 0 (instruction)
                           A  2167    
                           A  2168    
                           A  2169    ;  426	
                           A  2170    ;  427	void vdp_cursorDisable(void)
                           A  2171    ;  428	{
000952                     A  2172    _vdp_cursorDisable:
                           A  2173    ;  429		putch(23);
000952 01170000            A  2174    	LD	BC,23
000956 C5                  A  2175    	PUSH	BC
000957 CD 00 00 00         A  2176    	CALL	_putch
00095B C1                  A  2177    	POP	BC
                           A  2178    ;  430		putch(1);
00095C 01010000            A  2179    	LD	BC,1
000960 C5                  A  2180    	PUSH	BC
000961 CD 00 00 00         A  2181    	CALL	_putch
000965 C1                  A  2182    	POP	BC
                           A  2183    ;  431		putch(0);
000966 01000000            A  2184    	LD	BC,0
00096A C5                  A  2185    	PUSH	BC
00096B CD 00 00 00         A  2186    	CALL	_putch
00096F C1                  A  2187    	POP	BC
                           A  2188    ;  432	}
000970 C9                  A  2189    	RET	
                           A  2190    
                           A  2191    
                           A  2192    ;**************************** _vdp_cursorDisabl
                           A  2193    ;Name                         Addr/Register   S
                           A  2194    ;_putch                              IMPORT  --
                           A  2195    
                           A  2196    
                           A  2197    ; Stack Frame Size: 6 (bytes)
                           A  2198    ;       Spill Code: 0 (instruction)
                           A  2199    
                           A  2200    
                           A  2201    ;  433	
                           A  2202    ;  434	void vdp_cursorEnable(void)
                           A  2203    ;  435	{
000971                     A  2204    _vdp_cursorEnable:
                           A  2205    ;  436		putch(23);
000971 01170000            A  2206    	LD	BC,23
000975 C5                  A  2207    	PUSH	BC
000976 CD 00 00 00         A  2208    	CALL	_putch
00097A C1                  A  2209    	POP	BC
                           A  2210    ;  437		putch(1);
00097B 01010000            A  2211    	LD	BC,1
00097F C5                  A  2212    	PUSH	BC
000980 CD 00 00 00         A  2213    	CALL	_putch
000984 C1                  A  2214    	POP	BC
                           A  2215    ;  438		putch(1);
000985 01010000            A  2216    	LD	BC,1
000989 C5                  A  2217    	PUSH	BC
00098A CD 00 00 00         A  2218    	CALL	_putch
00098E C1                  A  2219    	POP	BC
                           A  2220    ;  439	}
00098F C9                  A  2221    	RET	
                           A  2222    
                           A  2223    
                           A  2224    ;**************************** _vdp_cursorEnable
                           A  2225    ;Name                         Addr/Register   S
                           A  2226    ;_putch                              IMPORT  --
                           A  2227    
                           A  2228    
                           A  2229    ; Stack Frame Size: 6 (bytes)
                           A  2230    ;       Spill Code: 0 (instruction)
                           A  2231    
                           A  2232    
                           A  2233    ;  440	
                           A  2234    ;  441	void vdp_scroll(unsigned char extent, u
                           A  2235    ;  442	{
000990                     A  2236    _vdp_scroll:
000990 CD 00 00 00         A  2237    	CALL	__frameset0
                           A  2238    ;  443		putch(23);
000994 01170000            A  2239    	LD	BC,23
000998 C5                  A  2240    	PUSH	BC
000999 CD 00 00 00         A  2241    	CALL	_putch
00099D C1                  A  2242    	POP	BC
                           A  2243    ;  444		putch(7);	// scroll
00099E 01070000            A  2244    	LD	BC,7
0009A2 C5                  A  2245    	PUSH	BC
0009A3 CD 00 00 00         A  2246    	CALL	_putch
0009A7 C1                  A  2247    	POP	BC
                           A  2248    ;  445		putch(extent);
0009A8 DD7E06              A  2249    	LD	A,(IX+%6)
0009AB B7ED62              A  2250    	UEXT	HL
0009AE 6F                  A  2251    	LD	L,A
0009AF E5                  A  2252    	PUSH	HL
0009B0 CD 00 00 00         A  2253    	CALL	_putch
0009B4 C1                  A  2254    	POP	BC
                           A  2255    ;  446		putch(direction);
0009B5 DD7E09              A  2256    	LD	A,(IX+%9)
0009B8 B7ED62              A  2257    	UEXT	HL
0009BB 6F                  A  2258    	LD	L,A
0009BC E5                  A  2259    	PUSH	HL
0009BD CD 00 00 00         A  2260    	CALL	_putch
0009C1 C1                  A  2261    	POP	BC
                           A  2262    ;  447		putch(speed);
0009C2 DD7E0C              A  2263    	LD	A,(IX+%C)
0009C5 B7ED62              A  2264    	UEXT	HL
0009C8 6F                  A  2265    	LD	L,A
0009C9 E5                  A  2266    	PUSH	HL
0009CA CD 00 00 00         A  2267    	CALL	_putch
0009CE C1                  A  2268    	POP	BC
0009CF DDF9                A  2269    	LD	SP,IX
0009D1 DDE1                A  2270    	POP	IX
0009D3 C9                  A  2271    	RET	
                           A  2272    
                           A  2273    
                           A  2274    ;**************************** _vdp_scroll *****
                           A  2275    ;Name                         Addr/Register   S
                           A  2276    ;_putch                              IMPORT  --
                           A  2277    ;speed                                IX+12    
                           A  2278    ;direction                             IX+9    
                           A  2279    ;extent                                IX+6    
                           A  2280    
                           A  2281    
                           A  2282    ; Stack Frame Size: 15 (bytes)
                           A  2283    ;       Spill Code: 0 (instruction)
                           A  2284    
                           A  2285    
                           A  2286    	XREF _getsysvar8bit:ROM
                           A  2287    	XREF _putch:ROM
                           A  2288    	XREF __imuls:ROM
                           A  2289    	XREF __stoiu:ROM
                           A  2290    	XREF __frameset0:ROM
                           A  2291    	XREF __frameset:ROM
                           A  2292    	XDEF _vdp_scroll
                           A  2293    	XDEF _vdp_cursorEnable
                           A  2294    	XDEF _vdp_cursorDisable
                           A  2295    	XDEF _vdp_asciiCodeAt
                           A  2296    	XDEF _vdp_cursorGetYpos
                           A  2297    	XDEF _vdp_cursorGetXpos
                           A  2298    	XDEF _vdp_spriteRefresh
                           A  2299    	XDEF _vdp_spriteActivateTotal
                           A  2300    	XDEF _vdp_spriteMoveBy
                           A  2301    	XDEF _vdp_spriteMoveBySelected
                           A  2302    	XDEF _vdp_spriteMoveTo
                           A  2303    	XDEF _vdp_spriteMoveToSelected
                           A  2304    	XDEF _vdp_spriteHide
                           A  2305    	XDEF _vdp_spriteHideSelected
                           A  2306    	XDEF _vdp_spriteShow
                           A  2307    	XDEF _vdp_spriteShowSelected
                           A  2308    	XDEF _vdp_spriteSetFrame
                           A  2309    	XDEF _vdp_spriteSetFrameSelected
                           A  2310    	XDEF _vdp_spritePreviousFrame
                           A  2311    	XDEF _vdp_spritePreviousFrameSelected
                           A  2312    	XDEF _vdp_spriteNextFrame
                           A  2313    	XDEF _vdp_spriteNextFrameSelected
                           A  2314    	XDEF _vdp_spriteAddFrame
                           A  2315    	XDEF _vdp_spriteAddFrameSelected
                           A  2316    	XDEF _vdp_spriteClearFrames
                           A  2317    	XDEF _vdp_spriteClearFramesSelected
                           A  2318    	XDEF _vdp_spriteSelect
                           A  2319    	XDEF _vdp_bitmapCreateSolidColor
                           A  2320    	XDEF _vdp_bitmapCreateSolidColorSelected
                           A  2321    	XDEF _vdp_bitmapDraw
                           A  2322    	XDEF _vdp_bitmapDrawSelected
                           A  2323    	XDEF _vdp_bitmapSendData
                           A  2324    	XDEF _vdp_bitmapSendDataSelected
                           A  2325    	XDEF _vdp_bitmapSelect
                           A  2326    	XDEF _vdp_plotSetOrigin
                           A  2327    	XDEF _vdp_plotCircleCircumference
                           A  2328    	XDEF _vdp_plotCircleRadius
                           A  2329    	XDEF _vdp_plotTriangle
                           A  2330    	XDEF _vdp_plotPoint
                           A  2331    	XDEF _vdp_plotLineTo
                           A  2332    	XDEF _vdp_plotMoveTo
                           A  2333    	XDEF _vdp_plot
                           A  2334    	XDEF _vdp_plotColour
                           A  2335    	XDEF _vdp_clearGraphics
                           A  2336    	XDEF _vdp_bgcolour
                           A  2337    	XDEF _vdp_fgcolour
                           A  2338    	XDEF _vdp_colour
                           A  2339    	XDEF _vdp_cursorGoto
                           A  2340    	XDEF _vdp_cursorUp
                           A  2341    	XDEF _vdp_cursorHome
                           A  2342    	XDEF _vdp_cls
                           A  2343    	XDEF _vdp_mode
                           A  2344    	XDEF _write32bit
                           A  2345    	XDEF _write16bit
                           A  2346    	END


Errors: 0
Warnings: 0
Lines Assembled: 2347

Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED06-Mar-23     12:35:48     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -noglobalopt -nolocalcse -optsize -nomodsect 
                           A     3    ; -padbranch -debug -peephole -const=ROM 
                           A     4    	FILE	"..\vdp.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    .PADBRANCH CCODE
                           A     8    	SEGMENT CODE
                           A     9    ;    1	#include <defines.h>
                           A    10    ;    2	#include "mos-interface.h"
                           A    11    ;    3	
                           A    12    ;    4	// Generic functions
                           A    13    ;    5	
                           A    14    ;    6	void write16bit(UINT16 w)
                           A    15    ;    7	{
040301                     A    16    _write16bit:
                           A    17    .DEFINE "_write16bit"
                           A    18    
                           A    19    .VALUE _write16bit
                           A    20    
                           A    21    .CLASS 2
                           A    22    
                           A    23    .TYPE 65
                           A    24    
                           A    25    .ENDEF
                           A    26    
                           A    27    .BEGFUNC "write16bit",7,"_write16bit"
                           A    28    
                           A    29    .LINE 7
                           A    30    
                           A    31    .DEFINE "w"
                           A    32    
                           A    33    .CLASS 65
                           A    34    
                           A    35    .VALUE 6
                           A    36    
                           A    37    .TYPE 13
                           A    38    
                           A    39    .ENDEF
                           A    40    
040301 DDE5                A    41    	PUSH	IX
040303 DD210000 00         A    42    	LD	IX,0
040308 DD39                A    43    	ADD	IX,SP
                           A    44    ;    8		putch(w & 0xFF); // write LSB
                           A    45    .LINE 8
                           A    46    
04030A DD0706              A    47    	LD	BC,(IX+%6)
04030D CD 05 10 04         A    48    	CALL	__stoiu
040311 7D                  A    49    	LD	A,L
040312 B7ED62              A    50    	UEXT	HL
040315 6F                  A    51    	LD	L,A
040316 E5                  A    52    	PUSH	HL
040317 CD 28 0E 04         A    53    	CALL	_putch
04031B C1                  A    54    	POP	BC
                           A    55    ;    9		putch(w >> 8);	 // write MSB	
                           A    56    .LINE 9
                           A    57    
04031C DD0706              A    58    	LD	BC,(IX+%6)
04031F CD 05 10 04         A    59    	CALL	__stoiu
040323 3E08                A    60    	LD	A,%8
040325 CD 0F 0F 04         A    61    	CALL	__ishrs_b
040329 E5                  A    62    	PUSH	HL
04032A CD 28 0E 04         A    63    	CALL	_putch
04032E C1                  A    64    	POP	BC
                           A    65    ;   10	}
                           A    66    .LINE 10
                           A    67    
04032F DDF9                A    68    	LD	SP,IX
040331 DDE1                A    69    	POP	IX
040333 C9                  A    70    	RET	
                           A    71    
                           A    72    
                           A    73    ;**************************** _write16bit *****
                           A    74    ;Name                         Addr/Register   S
                           A    75    ;_putch                              IMPORT  --
                           A    76    ;w                                     IX+6    
                           A    77    
                           A    78    
                           A    79    ; Stack Frame Size: 9 (bytes)
                           A    80    ;       Spill Code: 0 (instruction)
                           A    81    
                           A    82    
                           A    83    .ENDFUNC "write16bit",10,"_write16bit"
                           A    84    ;   11	
                           A    85    ;   12	void write32bit(UINT32 l)
                           A    86    ;   13	{
040334                     A    87    _write32bit:
                           A    88    .DEFINE "_write32bit"
                           A    89    
                           A    90    .VALUE _write32bit
                           A    91    
                           A    92    .CLASS 2
                           A    93    
                           A    94    .TYPE 65
                           A    95    
                           A    96    .ENDEF
                           A    97    
                           A    98    .BEGFUNC "write32bit",13,"_write32bit"
                           A    99    
                           A   100    .LINE 13
                           A   101    
                           A   102    .DEFINE "l"
                           A   103    
                           A   104    .CLASS 65
                           A   105    
                           A   106    .VALUE 6
                           A   107    
                           A   108    .TYPE 15
                           A   109    
                           A   110    .ENDEF
                           A   111    
                           A   112    .DEFINE "temp"
                           A   113    
                           A   114    .CLASS 65
                           A   115    
                           A   116    .VALUE -4
                           A   117    
                           A   118    .TYPE 15
                           A   119    
                           A   120    .ENDEF
                           A   121    
040334 DDE5                A   122    	PUSH	IX
040336 DD210000 00         A   123    	LD	IX,0
04033B DD39                A   124    	ADD	IX,SP
04033D C5                  A   125    	PUSH	BC
04033E 3B                  A   126    	DEC	SP
                           A   127    ;   14		UINT32 temp = l;
                           A   128    .LINE 14
                           A   129    
04033F DD0706              A   130    	LD	BC,(IX+%6)
040342 DD7E09              A   131    	LD	A,(IX+%9)
040345 DD0FFC              A   132    	LD	(IX+%FFFFFFFC),BC
040348 DD77FF              A   133    	LD	(IX+%FFFFFFFF),A
                           A   134    ;   15		
                           A   135    ;   16		putch(temp & 0xFF); // write LSB
                           A   136    .LINE 16
                           A   137    
04034B DD27FC              A   138    	LD	HL,(IX+%FFFFFFFC)
04034E 7D                  A   139    	LD	A,L
04034F B7ED62              A   140    	UEXT	HL
040352 6F                  A   141    	LD	L,A
040353 E5                  A   142    	PUSH	HL
040354 CD 28 0E 04         A   143    	CALL	_putch
040358 C1                  A   144    	POP	BC
                           A   145    ;   17		temp = temp >> 8;
                           A   146    .LINE 17
                           A   147    
040359 DD07FC              A   148    	LD	BC,(IX+%FFFFFFFC)
04035C DD7EFF              A   149    	LD	A,(IX+%FFFFFFFF)
04035F 2E08                A   150    	LD	L,%8
040361 CD 00 11 04         A   151    	CALL	__lshru
040365 DD0FFC              A   152    	LD	(IX+%FFFFFFFC),BC
040368 DD77FF              A   153    	LD	(IX+%FFFFFFFF),A
                           A   154    ;   18		putch(temp & 0xFF);
                           A   155    .LINE 18
                           A   156    
04036B DD27FC              A   157    	LD	HL,(IX+%FFFFFFFC)
04036E 7D                  A   158    	LD	A,L
04036F B7ED62              A   159    	UEXT	HL
040372 6F                  A   160    	LD	L,A
040373 E5                  A   161    	PUSH	HL
040374 CD 28 0E 04         A   162    	CALL	_putch
040378 C1                  A   163    	POP	BC
                           A   164    ;   19		temp = temp >> 8;
                           A   165    .LINE 19
                           A   166    
040379 DD07FC              A   167    	LD	BC,(IX+%FFFFFFFC)
04037C DD7EFF              A   168    	LD	A,(IX+%FFFFFFFF)
04037F 2E08                A   169    	LD	L,%8
040381 CD 00 11 04         A   170    	CALL	__lshru
040385 DD0FFC              A   171    	LD	(IX+%FFFFFFFC),BC
040388 DD77FF              A   172    	LD	(IX+%FFFFFFFF),A
                           A   173    ;   20		putch(temp & 0xFF);
                           A   174    .LINE 20
                           A   175    
04038B DD27FC              A   176    	LD	HL,(IX+%FFFFFFFC)
04038E 7D                  A   177    	LD	A,L
04038F B7ED62              A   178    	UEXT	HL
040392 6F                  A   179    	LD	L,A
040393 E5                  A   180    	PUSH	HL
040394 CD 28 0E 04         A   181    	CALL	_putch
040398 C1                  A   182    	POP	BC
                           A   183    ;   21		temp = temp >> 8;
                           A   184    .LINE 21
                           A   185    
040399 DD07FC              A   186    	LD	BC,(IX+%FFFFFFFC)
04039C DD7EFF              A   187    	LD	A,(IX+%FFFFFFFF)
04039F 2E08                A   188    	LD	L,%8
0403A1 CD 00 11 04         A   189    	CALL	__lshru
0403A5 DD0FFC              A   190    	LD	(IX+%FFFFFFFC),BC
0403A8 DD77FF              A   191    	LD	(IX+%FFFFFFFF),A
                           A   192    ;   22		putch(temp & 0xFF);
                           A   193    .LINE 22
                           A   194    
0403AB DD27FC              A   195    	LD	HL,(IX+%FFFFFFFC)
0403AE 7D                  A   196    	LD	A,L
0403AF B7ED62              A   197    	UEXT	HL
0403B2 6F                  A   198    	LD	L,A
0403B3 E5                  A   199    	PUSH	HL
0403B4 CD 28 0E 04         A   200    	CALL	_putch
0403B8 C1                  A   201    	POP	BC
                           A   202    ;   23		return;	
                           A   203    ;   24	}
                           A   204    .LINE 24
                           A   205    
0403B9 DDF9                A   206    	LD	SP,IX
0403BB DDE1                A   207    	POP	IX
0403BD C9                  A   208    	RET	
                           A   209    
                           A   210    
                           A   211    ;**************************** _write32bit *****
                           A   212    ;Name                         Addr/Register   S
                           A   213    ;_putch                              IMPORT  --
                           A   214    ;temp                                  IX-4    
                           A   215    ;l                                     IX+6    
                           A   216    
                           A   217    
                           A   218    ; Stack Frame Size: 16 (bytes)
                           A   219    ;       Spill Code: 0 (instruction)
                           A   220    
                           A   221    
                           A   222    .ENDFUNC "write32bit",24,"_write32bit"
                           A   223    ;   25	
                           A   224    ;   26	void vdp_mode(unsigned char mode)
                           A   225    ;   27	{
0403BE                     A   226    _vdp_mode:
                           A   227    .DEFINE "_vdp_mode"
                           A   228    
                           A   229    .VALUE _vdp_mode
                           A   230    
                           A   231    .CLASS 2
                           A   232    
                           A   233    .TYPE 65
                           A   234    
                           A   235    .ENDEF
                           A   236    
                           A   237    .BEGFUNC "vdp_mode",27,"_vdp_mode"
                           A   238    
                           A   239    .LINE 27
                           A   240    
                           A   241    .DEFINE "mode"
                           A   242    
                           A   243    .CLASS 65
                           A   244    
                           A   245    .VALUE 6
                           A   246    
                           A   247    .TYPE 12
                           A   248    
                           A   249    .ENDEF
                           A   250    
0403BE DDE5                A   251    	PUSH	IX
0403C0 DD210000 00         A   252    	LD	IX,0
0403C5 DD39                A   253    	ADD	IX,SP
                           A   254    ;   28	    putch(22);
                           A   255    .LINE 28
                           A   256    
0403C7 01160000            A   257    	LD	BC,22
0403CB C5                  A   258    	PUSH	BC
0403CC CD 28 0E 04         A   259    	CALL	_putch
0403D0 C1                  A   260    	POP	BC
                           A   261    ;   29	    putch(mode);
                           A   262    .LINE 29
                           A   263    
0403D1 DD7E06              A   264    	LD	A,(IX+%6)
0403D4 B7ED62              A   265    	UEXT	HL
0403D7 6F                  A   266    	LD	L,A
0403D8 E5                  A   267    	PUSH	HL
0403D9 CD 28 0E 04         A   268    	CALL	_putch
0403DD C1                  A   269    	POP	BC
                           A   270    ;   30	}
                           A   271    .LINE 30
                           A   272    
0403DE DDF9                A   273    	LD	SP,IX
0403E0 DDE1                A   274    	POP	IX
0403E2 C9                  A   275    	RET	
                           A   276    
                           A   277    
                           A   278    ;**************************** _vdp_mode *******
                           A   279    ;Name                         Addr/Register   S
                           A   280    ;_putch                              IMPORT  --
                           A   281    ;mode                                  IX+6    
                           A   282    
                           A   283    
                           A   284    ; Stack Frame Size: 9 (bytes)
                           A   285    ;       Spill Code: 0 (instruction)
                           A   286    
                           A   287    
                           A   288    .ENDFUNC "vdp_mode",30,"_vdp_mode"
                           A   289    ;   31	
                           A   290    ;   32	// Text functions
                           A   291    ;   33	void vdp_cls()
                           A   292    ;   34	{
0403E3                     A   293    _vdp_cls:
                           A   294    .DEFINE "_vdp_cls"
                           A   295    
                           A   296    .VALUE _vdp_cls
                           A   297    
                           A   298    .CLASS 2
                           A   299    
                           A   300    .TYPE 65
                           A   301    
                           A   302    .ENDEF
                           A   303    
                           A   304    .BEGFUNC "vdp_cls",34,"_vdp_cls"
                           A   305    
0403E3 DDE5                A   306    	PUSH	IX
0403E5 DD210000 00         A   307    	LD	IX,0
0403EA DD39                A   308    	ADD	IX,SP
                           A   309    ;   35	    putch(12);
                           A   310    .LINE 35
                           A   311    
0403EC 010C0000            A   312    	LD	BC,12
0403F0 C5                  A   313    	PUSH	BC
0403F1 CD 28 0E 04         A   314    	CALL	_putch
0403F5 C1                  A   315    	POP	BC
                           A   316    ;   36	}
                           A   317    .LINE 36
                           A   318    
0403F6 DDF9                A   319    	LD	SP,IX
0403F8 DDE1                A   320    	POP	IX
0403FA C9                  A   321    	RET	
                           A   322    
                           A   323    
                           A   324    ;**************************** _vdp_cls ********
                           A   325    ;Name                         Addr/Register   S
                           A   326    ;_putch                              IMPORT  --
                           A   327    
                           A   328    
                           A   329    ; Stack Frame Size: 6 (bytes)
                           A   330    ;       Spill Code: 0 (instruction)
                           A   331    
                           A   332    
                           A   333    .ENDFUNC "vdp_cls",36,"_vdp_cls"
                           A   334    ;   37	
                           A   335    ;   38	void vdp_cursorHome()
                           A   336    ;   39	{
0403FB                     A   337    _vdp_cursorHome:
                           A   338    .DEFINE "_vdp_cursorHome"
                           A   339    
                           A   340    .VALUE _vdp_cursorHome
                           A   341    
                           A   342    .CLASS 2
                           A   343    
                           A   344    .TYPE 65
                           A   345    
                           A   346    .ENDEF
                           A   347    
                           A   348    .BEGFUNC "vdp_cursorHome",39,"_vdp_cursorHome"
                           A   349    
0403FB DDE5                A   350    	PUSH	IX
0403FD DD210000 00         A   351    	LD	IX,0
040402 DD39                A   352    	ADD	IX,SP
                           A   353    ;   40	    putch(30);
                           A   354    .LINE 40
                           A   355    
040404 011E0000            A   356    	LD	BC,30
040408 C5                  A   357    	PUSH	BC
040409 CD 28 0E 04         A   358    	CALL	_putch
04040D C1                  A   359    	POP	BC
                           A   360    ;   41	}
                           A   361    .LINE 41
                           A   362    
04040E DDF9                A   363    	LD	SP,IX
040410 DDE1                A   364    	POP	IX
040412 C9                  A   365    	RET	
                           A   366    
                           A   367    
                           A   368    ;**************************** _vdp_cursorHome *
                           A   369    ;Name                         Addr/Register   S
                           A   370    ;_putch                              IMPORT  --
                           A   371    
                           A   372    
                           A   373    ; Stack Frame Size: 6 (bytes)
                           A   374    ;       Spill Code: 0 (instruction)
                           A   375    
                           A   376    
                           A   377    .ENDFUNC "vdp_cursorHome",41,"_vdp_cursorHome"
                           A   378    ;   42	
                           A   379    ;   43	void vdp_cursorUp()
                           A   380    ;   44	{
040413                     A   381    _vdp_cursorUp:
                           A   382    .DEFINE "_vdp_cursorUp"
                           A   383    
                           A   384    .VALUE _vdp_cursorUp
                           A   385    
                           A   386    .CLASS 2
                           A   387    
                           A   388    .TYPE 65
                           A   389    
                           A   390    .ENDEF
                           A   391    
                           A   392    .BEGFUNC "vdp_cursorUp",44,"_vdp_cursorUp"
                           A   393    
040413 DDE5                A   394    	PUSH	IX
040415 DD210000 00         A   395    	LD	IX,0
04041A DD39                A   396    	ADD	IX,SP
                           A   397    ;   45	    putch(11);
                           A   398    .LINE 45
                           A   399    
04041C 010B0000            A   400    	LD	BC,11
040420 C5                  A   401    	PUSH	BC
040421 CD 28 0E 04         A   402    	CALL	_putch
040425 C1                  A   403    	POP	BC
                           A   404    ;   46	}
                           A   405    .LINE 46
                           A   406    
040426 DDF9                A   407    	LD	SP,IX
040428 DDE1                A   408    	POP	IX
04042A C9                  A   409    	RET	
                           A   410    
                           A   411    
                           A   412    ;**************************** _vdp_cursorUp ***
                           A   413    ;Name                         Addr/Register   S
                           A   414    ;_putch                              IMPORT  --
                           A   415    
                           A   416    
                           A   417    ; Stack Frame Size: 6 (bytes)
                           A   418    ;       Spill Code: 0 (instruction)
                           A   419    
                           A   420    
                           A   421    .ENDFUNC "vdp_cursorUp",46,"_vdp_cursorUp"
                           A   422    ;   47	
                           A   423    ;   48	void vdp_cursorGoto(unsigned char x, un
                           A   424    ;   49	{
04042B                     A   425    _vdp_cursorGoto:
                           A   426    .DEFINE "_vdp_cursorGoto"
                           A   427    
                           A   428    .VALUE _vdp_cursorGoto
                           A   429    
                           A   430    .CLASS 2
                           A   431    
                           A   432    .TYPE 65
                           A   433    
                           A   434    .ENDEF
                           A   435    
                           A   436    .BEGFUNC "vdp_cursorGoto",49,"_vdp_cursorGoto"
                           A   437    
                           A   438    .LINE 49
                           A   439    
                           A   440    .DEFINE "x"
                           A   441    
                           A   442    .CLASS 65
                           A   443    
                           A   444    .VALUE 6
                           A   445    
                           A   446    .TYPE 12
                           A   447    
                           A   448    .ENDEF
                           A   449    
                           A   450    .DEFINE "y"
                           A   451    
                           A   452    .CLASS 65
                           A   453    
                           A   454    .VALUE 9
                           A   455    
                           A   456    .TYPE 12
                           A   457    
                           A   458    .ENDEF
                           A   459    
04042B DDE5                A   460    	PUSH	IX
04042D DD210000 00         A   461    	LD	IX,0
040432 DD39                A   462    	ADD	IX,SP
                           A   463    ;   50	    putch(31); // TAB
                           A   464    .LINE 50
                           A   465    
040434 011F0000            A   466    	LD	BC,31
040438 C5                  A   467    	PUSH	BC
040439 CD 28 0E 04         A   468    	CALL	_putch
04043D C1                  A   469    	POP	BC
                           A   470    ;   51	    putch(x);
                           A   471    .LINE 51
                           A   472    
04043E DD7E06              A   473    	LD	A,(IX+%6)
040441 B7ED62              A   474    	UEXT	HL
040444 6F                  A   475    	LD	L,A
040445 E5                  A   476    	PUSH	HL
040446 CD 28 0E 04         A   477    	CALL	_putch
04044A C1                  A   478    	POP	BC
                           A   479    ;   52	    putch(y);
                           A   480    .LINE 52
                           A   481    
04044B DD7E09              A   482    	LD	A,(IX+%9)
04044E B7ED62              A   483    	UEXT	HL
040451 6F                  A   484    	LD	L,A
040452 E5                  A   485    	PUSH	HL
040453 CD 28 0E 04         A   486    	CALL	_putch
040457 C1                  A   487    	POP	BC
                           A   488    ;   53	}
                           A   489    .LINE 53
                           A   490    
040458 DDF9                A   491    	LD	SP,IX
04045A DDE1                A   492    	POP	IX
04045C C9                  A   493    	RET	
                           A   494    
                           A   495    
                           A   496    ;**************************** _vdp_cursorGoto *
                           A   497    ;Name                         Addr/Register   S
                           A   498    ;_putch                              IMPORT  --
                           A   499    ;y                                     IX+9    
                           A   500    ;x                                     IX+6    
                           A   501    
                           A   502    
                           A   503    ; Stack Frame Size: 12 (bytes)
                           A   504    ;       Spill Code: 0 (instruction)
                           A   505    
                           A   506    
                           A   507    .ENDFUNC "vdp_cursorGoto",53,"_vdp_cursorGoto"
                           A   508    ;   54	
                           A   509    ;   55	void vdp_colour(unsigned char foregroun
                           A   510    ;   56	{
04045D                     A   511    _vdp_colour:
                           A   512    .DEFINE "_vdp_colour"
                           A   513    
                           A   514    .VALUE _vdp_colour
                           A   515    
                           A   516    .CLASS 2
                           A   517    
                           A   518    .TYPE 65
                           A   519    
                           A   520    .ENDEF
                           A   521    
                           A   522    .BEGFUNC "vdp_colour",56,"_vdp_colour"
                           A   523    
                           A   524    .LINE 56
                           A   525    
                           A   526    .DEFINE "foreground"
                           A   527    
                           A   528    .CLASS 65
                           A   529    
                           A   530    .VALUE 6
                           A   531    
                           A   532    .TYPE 12
                           A   533    
                           A   534    .ENDEF
                           A   535    
                           A   536    .DEFINE "r"
                           A   537    
                           A   538    .CLASS 65
                           A   539    
                           A   540    .VALUE 9
                           A   541    
                           A   542    .TYPE 12
                           A   543    
                           A   544    .ENDEF
                           A   545    
                           A   546    .DEFINE "g"
                           A   547    
                           A   548    .CLASS 65
                           A   549    
                           A   550    .VALUE 12
                           A   551    
                           A   552    .TYPE 12
                           A   553    
                           A   554    .ENDEF
                           A   555    
                           A   556    .DEFINE "b"
                           A   557    
                           A   558    .CLASS 65
                           A   559    
                           A   560    .VALUE 15
                           A   561    
                           A   562    .TYPE 12
                           A   563    
                           A   564    .ENDEF
                           A   565    
04045D DDE5                A   566    	PUSH	IX
04045F DD210000 00         A   567    	LD	IX,0
040464 DD39                A   568    	ADD	IX,SP
040466 C5                  A   569    	PUSH	BC
                           A   570    ;   57	    putch(17); // COLOUR
                           A   571    .LINE 57
                           A   572    
040467 01110000            A   573    	LD	BC,17
04046B C5                  A   574    	PUSH	BC
04046C CD 28 0E 04         A   575    	CALL	_putch
040470 C1                  A   576    	POP	BC
                           A   577    ;   58	    putch(!foreground);
                           A   578    .LINE 58
                           A   579    
040471 DD7E06              A   580    	LD	A,(IX+%6)
040474 B7                  A   581    	OR	A,A
040475 20 09               A   582    	JR	NZ,L_8
040477 01010000            A   583    	LD	BC,1
04047B DD0FFD              A   584    	LD	(IX+%FFFFFFFD),BC
04047E 18 07               A   585    	JR	L_9
040480                     A   586    L_8:
040480 01000000            A   587    	LD	BC,0
040484 DD0FFD              A   588    	LD	(IX+%FFFFFFFD),BC
040487                     A   589    L_9:
040487 DD07FD              A   590    	LD	BC,(IX+%FFFFFFFD)
04048A C5                  A   591    	PUSH	BC
04048B CD 28 0E 04         A   592    	CALL	_putch
04048F C1                  A   593    	POP	BC
                           A   594    ;   59	    putch(r);
                           A   595    .LINE 59
                           A   596    
040490 DD7E09              A   597    	LD	A,(IX+%9)
040493 B7ED62              A   598    	UEXT	HL
040496 6F                  A   599    	LD	L,A
040497 E5                  A   600    	PUSH	HL
040498 CD 28 0E 04         A   601    	CALL	_putch
04049C C1                  A   602    	POP	BC
                           A   603    ;   60	    putch(g);
                           A   604    .LINE 60
                           A   605    
04049D DD7E0C              A   606    	LD	A,(IX+%C)
0404A0 B7ED62              A   607    	UEXT	HL
0404A3 6F                  A   608    	LD	L,A
0404A4 E5                  A   609    	PUSH	HL
0404A5 CD 28 0E 04         A   610    	CALL	_putch
0404A9 C1                  A   611    	POP	BC
                           A   612    ;   61	    putch(b);
                           A   613    .LINE 61
                           A   614    
0404AA DD7E0F              A   615    	LD	A,(IX+%F)
0404AD B7ED62              A   616    	UEXT	HL
0404B0 6F                  A   617    	LD	L,A
0404B1 E5                  A   618    	PUSH	HL
0404B2 CD 28 0E 04         A   619    	CALL	_putch
0404B6 C1                  A   620    	POP	BC
                           A   621    ;   62	}
                           A   622    .LINE 62
                           A   623    
0404B7 DDF9                A   624    	LD	SP,IX
0404B9 DDE1                A   625    	POP	IX
0404BB C9                  A   626    	RET	
                           A   627    
                           A   628    
                           A   629    ;**************************** _vdp_colour *****
                           A   630    ;Name                         Addr/Register   S
                           A   631    ;_putch                              IMPORT  --
                           A   632    ;temp10                                IX-3    
                           A   633    ;b                                    IX+15    
                           A   634    ;g                                    IX+12    
                           A   635    ;r                                     IX+9    
                           A   636    ;foreground                            IX+6    
                           A   637    
                           A   638    
                           A   639    ; Stack Frame Size: 21 (bytes)
                           A   640    ;       Spill Code: 0 (instruction)
                           A   641    
                           A   642    
                           A   643    .ENDFUNC "vdp_colour",62,"_vdp_colour"
                           A   644    ;   63	
                           A   645    ;   64	void vdp_fgcolour(unsigned char r, unsi
                           A   646    ;   65	{
0404BC                     A   647    _vdp_fgcolour:
                           A   648    .DEFINE "_vdp_fgcolour"
                           A   649    
                           A   650    .VALUE _vdp_fgcolour
                           A   651    
                           A   652    .CLASS 2
                           A   653    
                           A   654    .TYPE 65
                           A   655    
                           A   656    .ENDEF
                           A   657    
                           A   658    .BEGFUNC "vdp_fgcolour",65,"_vdp_fgcolour"
                           A   659    
                           A   660    .LINE 65
                           A   661    
                           A   662    .DEFINE "r"
                           A   663    
                           A   664    .CLASS 65
                           A   665    
                           A   666    .VALUE 6
                           A   667    
                           A   668    .TYPE 12
                           A   669    
                           A   670    .ENDEF
                           A   671    
                           A   672    .DEFINE "g"
                           A   673    
                           A   674    .CLASS 65
                           A   675    
                           A   676    .VALUE 9
                           A   677    
                           A   678    .TYPE 12
                           A   679    
                           A   680    .ENDEF
                           A   681    
                           A   682    .DEFINE "b"
                           A   683    
                           A   684    .CLASS 65
                           A   685    
                           A   686    .VALUE 12
                           A   687    
                           A   688    .TYPE 12
                           A   689    
                           A   690    .ENDEF
                           A   691    
0404BC DDE5                A   692    	PUSH	IX
0404BE DD210000 00         A   693    	LD	IX,0
0404C3 DD39                A   694    	ADD	IX,SP
                           A   695    ;   66	    vdp_colour(1,r,g,b);
                           A   696    .LINE 66
                           A   697    
0404C5 DD4E0C              A   698    	LD	C,(IX+%C)
0404C8 0600                A   699    	LD	B,%0
0404CA C5                  A   700    	PUSH	BC
0404CB DD4E09              A   701    	LD	C,(IX+%9)
0404CE C5                  A   702    	PUSH	BC
0404CF DD4E06              A   703    	LD	C,(IX+%6)
0404D2 C5                  A   704    	PUSH	BC
0404D3 01010000            A   705    	LD	BC,1
0404D7 C5                  A   706    	PUSH	BC
0404D8 CD 5D 04 04         A   707    	CALL	_vdp_colour
0404DC C1                  A   708    	POP	BC
0404DD C1                  A   709    	POP	BC
0404DE C1                  A   710    	POP	BC
0404DF C1                  A   711    	POP	BC
                           A   712    ;   67	}
                           A   713    .LINE 67
                           A   714    
0404E0 DDF9                A   715    	LD	SP,IX
0404E2 DDE1                A   716    	POP	IX
0404E4 C9                  A   717    	RET	
                           A   718    
                           A   719    
                           A   720    ;**************************** _vdp_fgcolour ***
                           A   721    ;Name                         Addr/Register   S
                           A   722    ;b                                    IX+12    
                           A   723    ;g                                     IX+9    
                           A   724    ;r                                     IX+6    
                           A   725    
                           A   726    
                           A   727    ; Stack Frame Size: 15 (bytes)
                           A   728    ;       Spill Code: 0 (instruction)
                           A   729    
                           A   730    
                           A   731    .ENDFUNC "vdp_fgcolour",67,"_vdp_fgcolour"
                           A   732    ;   68	
                           A   733    ;   69	void vdp_bgcolour(unsigned char r, unsi
                           A   734    ;   70	{
0404E5                     A   735    _vdp_bgcolour:
                           A   736    .DEFINE "_vdp_bgcolour"
                           A   737    
                           A   738    .VALUE _vdp_bgcolour
                           A   739    
                           A   740    .CLASS 2
                           A   741    
                           A   742    .TYPE 65
                           A   743    
                           A   744    .ENDEF
                           A   745    
                           A   746    .BEGFUNC "vdp_bgcolour",70,"_vdp_bgcolour"
                           A   747    
                           A   748    .LINE 70
                           A   749    
                           A   750    .DEFINE "r"
                           A   751    
                           A   752    .CLASS 65
                           A   753    
                           A   754    .VALUE 6
                           A   755    
                           A   756    .TYPE 12
                           A   757    
                           A   758    .ENDEF
                           A   759    
                           A   760    .DEFINE "g"
                           A   761    
                           A   762    .CLASS 65
                           A   763    
                           A   764    .VALUE 9
                           A   765    
                           A   766    .TYPE 12
                           A   767    
                           A   768    .ENDEF
                           A   769    
                           A   770    .DEFINE "b"
                           A   771    
                           A   772    .CLASS 65
                           A   773    
                           A   774    .VALUE 12
                           A   775    
                           A   776    .TYPE 12
                           A   777    
                           A   778    .ENDEF
                           A   779    
0404E5 DDE5                A   780    	PUSH	IX
0404E7 DD210000 00         A   781    	LD	IX,0
0404EC DD39                A   782    	ADD	IX,SP
                           A   783    ;   71	    vdp_colour(0,r,g,b);
                           A   784    .LINE 71
                           A   785    
0404EE DD4E0C              A   786    	LD	C,(IX+%C)
0404F1 0600                A   787    	LD	B,%0
0404F3 C5                  A   788    	PUSH	BC
0404F4 DD4E09              A   789    	LD	C,(IX+%9)
0404F7 C5                  A   790    	PUSH	BC
0404F8 DD4E06              A   791    	LD	C,(IX+%6)
0404FB C5                  A   792    	PUSH	BC
0404FC 01000000            A   793    	LD	BC,0
040500 C5                  A   794    	PUSH	BC
040501 CD 5D 04 04         A   795    	CALL	_vdp_colour
040505 C1                  A   796    	POP	BC
040506 C1                  A   797    	POP	BC
040507 C1                  A   798    	POP	BC
040508 C1                  A   799    	POP	BC
                           A   800    ;   72	}
                           A   801    .LINE 72
                           A   802    
040509 DDF9                A   803    	LD	SP,IX
04050B DDE1                A   804    	POP	IX
04050D C9                  A   805    	RET	
                           A   806    
                           A   807    
                           A   808    ;**************************** _vdp_bgcolour ***
                           A   809    ;Name                         Addr/Register   S
                           A   810    ;b                                    IX+12    
                           A   811    ;g                                     IX+9    
                           A   812    ;r                                     IX+6    
                           A   813    
                           A   814    
                           A   815    ; Stack Frame Size: 15 (bytes)
                           A   816    ;       Spill Code: 0 (instruction)
                           A   817    
                           A   818    
                           A   819    .ENDFUNC "vdp_bgcolour",72,"_vdp_bgcolour"
                           A   820    ;   73	
                           A   821    ;   74	//
                           A   822    ;   75	// Graphics functions
                           A   823    ;   76	//
                           A   824    ;   77	
                           A   825    ;   78	void vdp_clearGraphics()
                           A   826    ;   79	{
04050E                     A   827    _vdp_clearGraphics:
                           A   828    .DEFINE "_vdp_clearGraphics"
                           A   829    
                           A   830    .VALUE _vdp_clearGraphics
                           A   831    
                           A   832    .CLASS 2
                           A   833    
                           A   834    .TYPE 65
                           A   835    
                           A   836    .ENDEF
                           A   837    
                           A   838    .BEGFUNC "vdp_clearGraphics",79,"_vdp_clearGrap
                           A   839    
04050E DDE5                A   840    	PUSH	IX
040510 DD210000 00         A   841    	LD	IX,0
040515 DD39                A   842    	ADD	IX,SP
                           A   843    ;   80	    putch(16);    
                           A   844    .LINE 80
                           A   845    
040517 01100000            A   846    	LD	BC,16
04051B C5                  A   847    	PUSH	BC
04051C CD 28 0E 04         A   848    	CALL	_putch
040520 C1                  A   849    	POP	BC
                           A   850    ;   81	}
                           A   851    .LINE 81
                           A   852    
040521 DDF9                A   853    	LD	SP,IX
040523 DDE1                A   854    	POP	IX
040525 C9                  A   855    	RET	
                           A   856    
                           A   857    
                           A   858    ;**************************** _vdp_clearGraphic
                           A   859    ;Name                         Addr/Register   S
                           A   860    ;_putch                              IMPORT  --
                           A   861    
                           A   862    
                           A   863    ; Stack Frame Size: 6 (bytes)
                           A   864    ;       Spill Code: 0 (instruction)
                           A   865    
                           A   866    
                           A   867    .ENDFUNC "vdp_clearGraphics",81,"_vdp_clearGrap
                           A   868    ;   82	
                           A   869    ;   83	void vdp_plotColour(unsigned char r, un
                           A   870    ;   84	{
040526                     A   871    _vdp_plotColour:
                           A   872    .DEFINE "_vdp_plotColour"
                           A   873    
                           A   874    .VALUE _vdp_plotColour
                           A   875    
                           A   876    .CLASS 2
                           A   877    
                           A   878    .TYPE 65
                           A   879    
                           A   880    .ENDEF
                           A   881    
                           A   882    .BEGFUNC "vdp_plotColour",84,"_vdp_plotColour"
                           A   883    
                           A   884    .LINE 84
                           A   885    
                           A   886    .DEFINE "r"
                           A   887    
                           A   888    .CLASS 65
                           A   889    
                           A   890    .VALUE 6
                           A   891    
                           A   892    .TYPE 12
                           A   893    
                           A   894    .ENDEF
                           A   895    
                           A   896    .DEFINE "g"
                           A   897    
                           A   898    .CLASS 65
                           A   899    
                           A   900    .VALUE 9
                           A   901    
                           A   902    .TYPE 12
                           A   903    
                           A   904    .ENDEF
                           A   905    
                           A   906    .DEFINE "b"
                           A   907    
                           A   908    .CLASS 65
                           A   909    
                           A   910    .VALUE 12
                           A   911    
                           A   912    .TYPE 12
                           A   913    
                           A   914    .ENDEF
                           A   915    
040526 DDE5                A   916    	PUSH	IX
040528 DD210000 00         A   917    	LD	IX,0
04052D DD39                A   918    	ADD	IX,SP
                           A   919    ;   85	    putch(18); // GCOL
                           A   920    .LINE 85
                           A   921    
04052F 01120000            A   922    	LD	BC,18
040533 C5                  A   923    	PUSH	BC
040534 CD 28 0E 04         A   924    	CALL	_putch
040538 C1                  A   925    	POP	BC
                           A   926    ;   86	    putch(0);
                           A   927    .LINE 86
                           A   928    
040539 01000000            A   929    	LD	BC,0
04053D C5                  A   930    	PUSH	BC
04053E CD 28 0E 04         A   931    	CALL	_putch
040542 C1                  A   932    	POP	BC
                           A   933    ;   87	    putch(r);
                           A   934    .LINE 87
                           A   935    
040543 DD7E06              A   936    	LD	A,(IX+%6)
040546 B7ED62              A   937    	UEXT	HL
040549 6F                  A   938    	LD	L,A
04054A E5                  A   939    	PUSH	HL
04054B CD 28 0E 04         A   940    	CALL	_putch
04054F C1                  A   941    	POP	BC
                           A   942    ;   88	    putch(g);
                           A   943    .LINE 88
                           A   944    
040550 DD7E09              A   945    	LD	A,(IX+%9)
040553 B7ED62              A   946    	UEXT	HL
040556 6F                  A   947    	LD	L,A
040557 E5                  A   948    	PUSH	HL
040558 CD 28 0E 04         A   949    	CALL	_putch
04055C C1                  A   950    	POP	BC
                           A   951    ;   89	    putch(b);
                           A   952    .LINE 89
                           A   953    
04055D DD7E0C              A   954    	LD	A,(IX+%C)
040560 B7ED62              A   955    	UEXT	HL
040563 6F                  A   956    	LD	L,A
040564 E5                  A   957    	PUSH	HL
040565 CD 28 0E 04         A   958    	CALL	_putch
040569 C1                  A   959    	POP	BC
                           A   960    ;   90	}
                           A   961    .LINE 90
                           A   962    
04056A DDF9                A   963    	LD	SP,IX
04056C DDE1                A   964    	POP	IX
04056E C9                  A   965    	RET	
                           A   966    
                           A   967    
                           A   968    ;**************************** _vdp_plotColour *
                           A   969    ;Name                         Addr/Register   S
                           A   970    ;_putch                              IMPORT  --
                           A   971    ;b                                    IX+12    
                           A   972    ;g                                     IX+9    
                           A   973    ;r                                     IX+6    
                           A   974    
                           A   975    
                           A   976    ; Stack Frame Size: 15 (bytes)
                           A   977    ;       Spill Code: 0 (instruction)
                           A   978    
                           A   979    
                           A   980    .ENDFUNC "vdp_plotColour",90,"_vdp_plotColour"
                           A   981    ;   91	
                           A   982    ;   92	// internal function
                           A   983    ;   93	void vdp_plot(unsigned char mode, unsig
                           A   984    ;   94	{
04056F                     A   985    _vdp_plot:
                           A   986    .DEFINE "_vdp_plot"
                           A   987    
                           A   988    .VALUE _vdp_plot
                           A   989    
                           A   990    .CLASS 2
                           A   991    
                           A   992    .TYPE 65
                           A   993    
                           A   994    .ENDEF
                           A   995    
                           A   996    .BEGFUNC "vdp_plot",94,"_vdp_plot"
                           A   997    
                           A   998    .LINE 94
                           A   999    
                           A  1000    .DEFINE "mode"
                           A  1001    
                           A  1002    .CLASS 65
                           A  1003    
                           A  1004    .VALUE 6
                           A  1005    
                           A  1006    .TYPE 12
                           A  1007    
                           A  1008    .ENDEF
                           A  1009    
                           A  1010    .DEFINE "x"
                           A  1011    
                           A  1012    .CLASS 65
                           A  1013    
                           A  1014    .VALUE 9
                           A  1015    
                           A  1016    .TYPE 14
                           A  1017    
                           A  1018    .ENDEF
                           A  1019    
                           A  1020    .DEFINE "y"
                           A  1021    
                           A  1022    .CLASS 65
                           A  1023    
                           A  1024    .VALUE 12
                           A  1025    
                           A  1026    .TYPE 14
                           A  1027    
                           A  1028    .ENDEF
                           A  1029    
04056F DDE5                A  1030    	PUSH	IX
040571 DD210000 00         A  1031    	LD	IX,0
040576 DD39                A  1032    	ADD	IX,SP
                           A  1033    ;   95	    putch(25); // PLOT
                           A  1034    .LINE 95
                           A  1035    
040578 01190000            A  1036    	LD	BC,25
04057C C5                  A  1037    	PUSH	BC
04057D CD 28 0E 04         A  1038    	CALL	_putch
040581 C1                  A  1039    	POP	BC
                           A  1040    ;   96	    putch(mode);
                           A  1041    .LINE 96
                           A  1042    
040582 DD7E06              A  1043    	LD	A,(IX+%6)
040585 B7ED62              A  1044    	UEXT	HL
040588 6F                  A  1045    	LD	L,A
040589 E5                  A  1046    	PUSH	HL
04058A CD 28 0E 04         A  1047    	CALL	_putch
04058E C1                  A  1048    	POP	BC
                           A  1049    ;   97	    putch(x & 0xFF);
                           A  1050    .LINE 97
                           A  1051    
04058F DD7E09              A  1052    	LD	A,(IX+%9)
040592 B7ED62              A  1053    	UEXT	HL
040595 6F                  A  1054    	LD	L,A
040596 E5                  A  1055    	PUSH	HL
040597 CD 28 0E 04         A  1056    	CALL	_putch
04059B C1                  A  1057    	POP	BC
                           A  1058    ;   98	    putch(x >> 8);
                           A  1059    .LINE 98
                           A  1060    
04059C DD2709              A  1061    	LD	HL,(IX+%9)
04059F 3E08                A  1062    	LD	A,%8
0405A1 CD E4 11 04         A  1063    	CALL	__ishru_b
0405A5 E5                  A  1064    	PUSH	HL
0405A6 CD 28 0E 04         A  1065    	CALL	_putch
0405AA C1                  A  1066    	POP	BC
                           A  1067    ;   99	    putch(y & 0xFF);
                           A  1068    .LINE 99
                           A  1069    
0405AB DD7E0C              A  1070    	LD	A,(IX+%C)
0405AE B7ED62              A  1071    	UEXT	HL
0405B1 6F                  A  1072    	LD	L,A
0405B2 E5                  A  1073    	PUSH	HL
0405B3 CD 28 0E 04         A  1074    	CALL	_putch
0405B7 C1                  A  1075    	POP	BC
                           A  1076    ;  100	    putch(y >> 8);
                           A  1077    .LINE 100
                           A  1078    
0405B8 DD270C              A  1079    	LD	HL,(IX+%C)
0405BB 3E08                A  1080    	LD	A,%8
0405BD CD E4 11 04         A  1081    	CALL	__ishru_b
0405C1 E5                  A  1082    	PUSH	HL
0405C2 CD 28 0E 04         A  1083    	CALL	_putch
0405C6 C1                  A  1084    	POP	BC
                           A  1085    ;  101	}
                           A  1086    .LINE 101
                           A  1087    
0405C7 DDF9                A  1088    	LD	SP,IX
0405C9 DDE1                A  1089    	POP	IX
0405CB C9                  A  1090    	RET	
                           A  1091    
                           A  1092    
                           A  1093    ;**************************** _vdp_plot *******
                           A  1094    ;Name                         Addr/Register   S
                           A  1095    ;_putch                              IMPORT  --
                           A  1096    ;y                                    IX+12    
                           A  1097    ;x                                     IX+9    
                           A  1098    ;mode                                  IX+6    
                           A  1099    
                           A  1100    
                           A  1101    ; Stack Frame Size: 15 (bytes)
                           A  1102    ;       Spill Code: 0 (instruction)
                           A  1103    
                           A  1104    
                           A  1105    .ENDFUNC "vdp_plot",101,"_vdp_plot"
                           A  1106    ;  102	
                           A  1107    ;  103	void vdp_plotMoveTo(unsigned int x, uns
                           A  1108    ;  104	{
0405CC                     A  1109    _vdp_plotMoveTo:
                           A  1110    .DEFINE "_vdp_plotMoveTo"
                           A  1111    
                           A  1112    .VALUE _vdp_plotMoveTo
                           A  1113    
                           A  1114    .CLASS 2
                           A  1115    
                           A  1116    .TYPE 65
                           A  1117    
                           A  1118    .ENDEF
                           A  1119    
                           A  1120    .BEGFUNC "vdp_plotMoveTo",104,"_vdp_plotMoveTo"
                           A  1121    
                           A  1122    .LINE 104
                           A  1123    
                           A  1124    .DEFINE "x"
                           A  1125    
                           A  1126    .CLASS 65
                           A  1127    
                           A  1128    .VALUE 6
                           A  1129    
                           A  1130    .TYPE 14
                           A  1131    
                           A  1132    .ENDEF
                           A  1133    
                           A  1134    .DEFINE "y"
                           A  1135    
                           A  1136    .CLASS 65
                           A  1137    
                           A  1138    .VALUE 9
                           A  1139    
                           A  1140    .TYPE 14
                           A  1141    
                           A  1142    .ENDEF
                           A  1143    
0405CC DDE5                A  1144    	PUSH	IX
0405CE DD210000 00         A  1145    	LD	IX,0
0405D3 DD39                A  1146    	ADD	IX,SP
                           A  1147    ;  105		vdp_plot(0x04,x,y);
                           A  1148    .LINE 105
                           A  1149    
0405D5 DD0709              A  1150    	LD	BC,(IX+%9)
0405D8 C5                  A  1151    	PUSH	BC
0405D9 DD0706              A  1152    	LD	BC,(IX+%6)
0405DC C5                  A  1153    	PUSH	BC
0405DD 01040000            A  1154    	LD	BC,4
0405E1 C5                  A  1155    	PUSH	BC
0405E2 CD 6F 05 04         A  1156    	CALL	_vdp_plot
0405E6 C1                  A  1157    	POP	BC
0405E7 C1                  A  1158    	POP	BC
0405E8 C1                  A  1159    	POP	BC
                           A  1160    ;  106	}
                           A  1161    .LINE 106
                           A  1162    
0405E9 DDF9                A  1163    	LD	SP,IX
0405EB DDE1                A  1164    	POP	IX
0405ED C9                  A  1165    	RET	
                           A  1166    
                           A  1167    
                           A  1168    ;**************************** _vdp_plotMoveTo *
                           A  1169    ;Name                         Addr/Register   S
                           A  1170    ;y                                     IX+9    
                           A  1171    ;x                                     IX+6    
                           A  1172    
                           A  1173    
                           A  1174    ; Stack Frame Size: 12 (bytes)
                           A  1175    ;       Spill Code: 0 (instruction)
                           A  1176    
                           A  1177    
                           A  1178    .ENDFUNC "vdp_plotMoveTo",106,"_vdp_plotMoveTo"
                           A  1179    ;  107	
                           A  1180    ;  108	void vdp_plotLineTo(unsigned int x, uns
                           A  1181    ;  109	{
0405EE                     A  1182    _vdp_plotLineTo:
                           A  1183    .DEFINE "_vdp_plotLineTo"
                           A  1184    
                           A  1185    .VALUE _vdp_plotLineTo
                           A  1186    
                           A  1187    .CLASS 2
                           A  1188    
                           A  1189    .TYPE 65
                           A  1190    
                           A  1191    .ENDEF
                           A  1192    
                           A  1193    .BEGFUNC "vdp_plotLineTo",109,"_vdp_plotLineTo"
                           A  1194    
                           A  1195    .LINE 109
                           A  1196    
                           A  1197    .DEFINE "x"
                           A  1198    
                           A  1199    .CLASS 65
                           A  1200    
                           A  1201    .VALUE 6
                           A  1202    
                           A  1203    .TYPE 14
                           A  1204    
                           A  1205    .ENDEF
                           A  1206    
                           A  1207    .DEFINE "y"
                           A  1208    
                           A  1209    .CLASS 65
                           A  1210    
                           A  1211    .VALUE 9
                           A  1212    
                           A  1213    .TYPE 14
                           A  1214    
                           A  1215    .ENDEF
                           A  1216    
0405EE DDE5                A  1217    	PUSH	IX
0405F0 DD210000 00         A  1218    	LD	IX,0
0405F5 DD39                A  1219    	ADD	IX,SP
                           A  1220    ;  110		vdp_plot(0x05,x,y);
                           A  1221    .LINE 110
                           A  1222    
0405F7 DD0709              A  1223    	LD	BC,(IX+%9)
0405FA C5                  A  1224    	PUSH	BC
0405FB DD0706              A  1225    	LD	BC,(IX+%6)
0405FE C5                  A  1226    	PUSH	BC
0405FF 01050000            A  1227    	LD	BC,5
040603 C5                  A  1228    	PUSH	BC
040604 CD 6F 05 04         A  1229    	CALL	_vdp_plot
040608 C1                  A  1230    	POP	BC
040609 C1                  A  1231    	POP	BC
04060A C1                  A  1232    	POP	BC
                           A  1233    ;  111	}
                           A  1234    .LINE 111
                           A  1235    
04060B DDF9                A  1236    	LD	SP,IX
04060D DDE1                A  1237    	POP	IX
04060F C9                  A  1238    	RET	
                           A  1239    
                           A  1240    
                           A  1241    ;**************************** _vdp_plotLineTo *
                           A  1242    ;Name                         Addr/Register   S
                           A  1243    ;y                                     IX+9    
                           A  1244    ;x                                     IX+6    
                           A  1245    
                           A  1246    
                           A  1247    ; Stack Frame Size: 12 (bytes)
                           A  1248    ;       Spill Code: 0 (instruction)
                           A  1249    
                           A  1250    
                           A  1251    .ENDFUNC "vdp_plotLineTo",111,"_vdp_plotLineTo"
                           A  1252    ;  112	
                           A  1253    ;  113	void vdp_plotPoint(unsigned int x, unsi
                           A  1254    ;  114	{
040610                     A  1255    _vdp_plotPoint:
                           A  1256    .DEFINE "_vdp_plotPoint"
                           A  1257    
                           A  1258    .VALUE _vdp_plotPoint
                           A  1259    
                           A  1260    .CLASS 2
                           A  1261    
                           A  1262    .TYPE 65
                           A  1263    
                           A  1264    .ENDEF
                           A  1265    
                           A  1266    .BEGFUNC "vdp_plotPoint",114,"_vdp_plotPoint"
                           A  1267    
                           A  1268    .LINE 114
                           A  1269    
                           A  1270    .DEFINE "x"
                           A  1271    
                           A  1272    .CLASS 65
                           A  1273    
                           A  1274    .VALUE 6
                           A  1275    
                           A  1276    .TYPE 14
                           A  1277    
                           A  1278    .ENDEF
                           A  1279    
                           A  1280    .DEFINE "y"
                           A  1281    
                           A  1282    .CLASS 65
                           A  1283    
                           A  1284    .VALUE 9
                           A  1285    
                           A  1286    .TYPE 14
                           A  1287    
                           A  1288    .ENDEF
                           A  1289    
040610 DDE5                A  1290    	PUSH	IX
040612 DD210000 00         A  1291    	LD	IX,0
040617 DD39                A  1292    	ADD	IX,SP
                           A  1293    ;  115		vdp_plot(0x40,x,y);
                           A  1294    .LINE 115
                           A  1295    
040619 DD0709              A  1296    	LD	BC,(IX+%9)
04061C C5                  A  1297    	PUSH	BC
04061D DD0706              A  1298    	LD	BC,(IX+%6)
040620 C5                  A  1299    	PUSH	BC
040621 01400000            A  1300    	LD	BC,64
040625 C5                  A  1301    	PUSH	BC
040626 CD 6F 05 04         A  1302    	CALL	_vdp_plot
04062A C1                  A  1303    	POP	BC
04062B C1                  A  1304    	POP	BC
04062C C1                  A  1305    	POP	BC
                           A  1306    ;  116	}
                           A  1307    .LINE 116
                           A  1308    
04062D DDF9                A  1309    	LD	SP,IX
04062F DDE1                A  1310    	POP	IX
040631 C9                  A  1311    	RET	
                           A  1312    
                           A  1313    
                           A  1314    ;**************************** _vdp_plotPoint **
                           A  1315    ;Name                         Addr/Register   S
                           A  1316    ;y                                     IX+9    
                           A  1317    ;x                                     IX+6    
                           A  1318    
                           A  1319    
                           A  1320    ; Stack Frame Size: 12 (bytes)
                           A  1321    ;       Spill Code: 0 (instruction)
                           A  1322    
                           A  1323    
                           A  1324    .ENDFUNC "vdp_plotPoint",116,"_vdp_plotPoint"
                           A  1325    ;  117	
                           A  1326    ;  118	void vdp_plotTriangle(unsigned int x, u
                           A  1327    ;  119	{
040632                     A  1328    _vdp_plotTriangle:
                           A  1329    .DEFINE "_vdp_plotTriangle"
                           A  1330    
                           A  1331    .VALUE _vdp_plotTriangle
                           A  1332    
                           A  1333    .CLASS 2
                           A  1334    
                           A  1335    .TYPE 65
                           A  1336    
                           A  1337    .ENDEF
                           A  1338    
                           A  1339    .BEGFUNC "vdp_plotTriangle",119,"_vdp_plotTrian
                           A  1340    
                           A  1341    .LINE 119
                           A  1342    
                           A  1343    .DEFINE "x"
                           A  1344    
                           A  1345    .CLASS 65
                           A  1346    
                           A  1347    .VALUE 6
                           A  1348    
                           A  1349    .TYPE 14
                           A  1350    
                           A  1351    .ENDEF
                           A  1352    
                           A  1353    .DEFINE "y"
                           A  1354    
                           A  1355    .CLASS 65
                           A  1356    
                           A  1357    .VALUE 9
                           A  1358    
                           A  1359    .TYPE 14
                           A  1360    
                           A  1361    .ENDEF
                           A  1362    
040632 DDE5                A  1363    	PUSH	IX
040634 DD210000 00         A  1364    	LD	IX,0
040639 DD39                A  1365    	ADD	IX,SP
                           A  1366    ;  120		vdp_plot(0x50,x,y);
                           A  1367    .LINE 120
                           A  1368    
04063B DD0709              A  1369    	LD	BC,(IX+%9)
04063E C5                  A  1370    	PUSH	BC
04063F DD0706              A  1371    	LD	BC,(IX+%6)
040642 C5                  A  1372    	PUSH	BC
040643 01500000            A  1373    	LD	BC,80
040647 C5                  A  1374    	PUSH	BC
040648 CD 6F 05 04         A  1375    	CALL	_vdp_plot
04064C C1                  A  1376    	POP	BC
04064D C1                  A  1377    	POP	BC
04064E C1                  A  1378    	POP	BC
                           A  1379    ;  121	}
                           A  1380    .LINE 121
                           A  1381    
04064F DDF9                A  1382    	LD	SP,IX
040651 DDE1                A  1383    	POP	IX
040653 C9                  A  1384    	RET	
                           A  1385    
                           A  1386    
                           A  1387    ;**************************** _vdp_plotTriangle
                           A  1388    ;Name                         Addr/Register   S
                           A  1389    ;y                                     IX+9    
                           A  1390    ;x                                     IX+6    
                           A  1391    
                           A  1392    
                           A  1393    ; Stack Frame Size: 12 (bytes)
                           A  1394    ;       Spill Code: 0 (instruction)
                           A  1395    
                           A  1396    
                           A  1397    .ENDFUNC "vdp_plotTriangle",121,"_vdp_plotTrian
                           A  1398    ;  122	
                           A  1399    ;  123	void vdp_plotCircleRadius(unsigned int 
                           A  1400    ;  124	{
040654                     A  1401    _vdp_plotCircleRadius:
                           A  1402    .DEFINE "_vdp_plotCircleRadius"
                           A  1403    
                           A  1404    .VALUE _vdp_plotCircleRadius
                           A  1405    
                           A  1406    .CLASS 2
                           A  1407    
                           A  1408    .TYPE 65
                           A  1409    
                           A  1410    .ENDEF
                           A  1411    
                           A  1412    .BEGFUNC "vdp_plotCircleRadius",124,"_vdp_plotC
                           A  1413    
                           A  1414    .LINE 124
                           A  1415    
                           A  1416    .DEFINE "r"
                           A  1417    
                           A  1418    .CLASS 65
                           A  1419    
                           A  1420    .VALUE 6
                           A  1421    
                           A  1422    .TYPE 14
                           A  1423    
                           A  1424    .ENDEF
                           A  1425    
040654 DDE5                A  1426    	PUSH	IX
040656 DD210000 00         A  1427    	LD	IX,0
04065B DD39                A  1428    	ADD	IX,SP
                           A  1429    ;  125		vdp_plot(0x90,r,0);
                           A  1430    .LINE 125
                           A  1431    
04065D 01000000            A  1432    	LD	BC,0
040661 C5                  A  1433    	PUSH	BC
040662 DD0706              A  1434    	LD	BC,(IX+%6)
040665 C5                  A  1435    	PUSH	BC
040666 01900000            A  1436    	LD	BC,144
04066A C5                  A  1437    	PUSH	BC
04066B CD 6F 05 04         A  1438    	CALL	_vdp_plot
04066F C1                  A  1439    	POP	BC
040670 C1                  A  1440    	POP	BC
040671 C1                  A  1441    	POP	BC
                           A  1442    ;  126	}
                           A  1443    .LINE 126
                           A  1444    
040672 DDF9                A  1445    	LD	SP,IX
040674 DDE1                A  1446    	POP	IX
040676 C9                  A  1447    	RET	
                           A  1448    
                           A  1449    
                           A  1450    ;**************************** _vdp_plotCircleRa
                           A  1451    ;Name                         Addr/Register   S
                           A  1452    ;r                                     IX+6    
                           A  1453    
                           A  1454    
                           A  1455    ; Stack Frame Size: 9 (bytes)
                           A  1456    ;       Spill Code: 0 (instruction)
                           A  1457    
                           A  1458    
                           A  1459    .ENDFUNC "vdp_plotCircleRadius",126,"_vdp_plotC
                           A  1460    ;  127	
                           A  1461    ;  128	void vdp_plotCircleCircumference(unsign
                           A  1462    ;  129	{
040677                     A  1463    _vdp_plotCircleCircumference:
                           A  1464    .DEFINE "_vdp_plotCircleCircumference"
                           A  1465    
                           A  1466    .VALUE _vdp_plotCircleCircumference
                           A  1467    
                           A  1468    .CLASS 2
                           A  1469    
                           A  1470    .TYPE 65
                           A  1471    
                           A  1472    .ENDEF
                           A  1473    
                           A  1474    .BEGFUNC "vdp_plotCircleCircumference",129,"_vd
                           A  1475    
                           A  1476    .LINE 129
                           A  1477    
                           A  1478    .DEFINE "x"
                           A  1479    
                           A  1480    .CLASS 65
                           A  1481    
                           A  1482    .VALUE 6
                           A  1483    
                           A  1484    .TYPE 14
                           A  1485    
                           A  1486    .ENDEF
                           A  1487    
                           A  1488    .DEFINE "y"
                           A  1489    
                           A  1490    .CLASS 65
                           A  1491    
                           A  1492    .VALUE 9
                           A  1493    
                           A  1494    .TYPE 14
                           A  1495    
                           A  1496    .ENDEF
                           A  1497    
040677 DDE5                A  1498    	PUSH	IX
040679 DD210000 00         A  1499    	LD	IX,0
04067E DD39                A  1500    	ADD	IX,SP
                           A  1501    ;  130		vdp_plot(0x95,x,y);
                           A  1502    .LINE 130
                           A  1503    
040680 DD0709              A  1504    	LD	BC,(IX+%9)
040683 C5                  A  1505    	PUSH	BC
040684 DD0706              A  1506    	LD	BC,(IX+%6)
040687 C5                  A  1507    	PUSH	BC
040688 01950000            A  1508    	LD	BC,149
04068C C5                  A  1509    	PUSH	BC
04068D CD 6F 05 04         A  1510    	CALL	_vdp_plot
040691 C1                  A  1511    	POP	BC
040692 C1                  A  1512    	POP	BC
040693 C1                  A  1513    	POP	BC
                           A  1514    ;  131	}
                           A  1515    .LINE 131
                           A  1516    
040694 DDF9                A  1517    	LD	SP,IX
040696 DDE1                A  1518    	POP	IX
040698 C9                  A  1519    	RET	
                           A  1520    
                           A  1521    
                           A  1522    ;**************************** _vdp_plotCircleCi
                           A  1523    ;Name                         Addr/Register   S
                           A  1524    ;y                                     IX+9    
                           A  1525    ;x                                     IX+6    
                           A  1526    
                           A  1527    
                           A  1528    ; Stack Frame Size: 12 (bytes)
                           A  1529    ;       Spill Code: 0 (instruction)
                           A  1530    
                           A  1531    
                           A  1532    .ENDFUNC "vdp_plotCircleCircumference",131,"_vd
                           A  1533    ;  132	
                           A  1534    ;  133	void vdp_plotSetOrigin(unsigned int x, 
                           A  1535    ;  134	{
040699                     A  1536    _vdp_plotSetOrigin:
                           A  1537    .DEFINE "_vdp_plotSetOrigin"
                           A  1538    
                           A  1539    .VALUE _vdp_plotSetOrigin
                           A  1540    
                           A  1541    .CLASS 2
                           A  1542    
                           A  1543    .TYPE 65
                           A  1544    
                           A  1545    .ENDEF
                           A  1546    
                           A  1547    .BEGFUNC "vdp_plotSetOrigin",134,"_vdp_plotSetO
                           A  1548    
                           A  1549    .LINE 134
                           A  1550    
                           A  1551    .DEFINE "x"
                           A  1552    
                           A  1553    .CLASS 65
                           A  1554    
                           A  1555    .VALUE 6
                           A  1556    
                           A  1557    .TYPE 14
                           A  1558    
                           A  1559    .ENDEF
                           A  1560    
                           A  1561    .DEFINE "y"
                           A  1562    
                           A  1563    .CLASS 65
                           A  1564    
                           A  1565    .VALUE 9
                           A  1566    
                           A  1567    .TYPE 14
                           A  1568    
                           A  1569    .ENDEF
                           A  1570    
040699 DDE5                A  1571    	PUSH	IX
04069B DD210000 00         A  1572    	LD	IX,0
0406A0 DD39                A  1573    	ADD	IX,SP
                           A  1574    ;  135	    putch(29); //Graphics ORIGIN
                           A  1575    .LINE 135
                           A  1576    
0406A2 011D0000            A  1577    	LD	BC,29
0406A6 C5                  A  1578    	PUSH	BC
0406A7 CD 28 0E 04         A  1579    	CALL	_putch
0406AB C1                  A  1580    	POP	BC
                           A  1581    ;  136	    putch(x & 0xF);
                           A  1582    .LINE 136
                           A  1583    
0406AC DD7E06              A  1584    	LD	A,(IX+%6)
0406AF E60F                A  1585    	AND	A,%F
0406B1 B7ED62              A  1586    	UEXT	HL
0406B4 6F                  A  1587    	LD	L,A
0406B5 E5                  A  1588    	PUSH	HL
0406B6 CD 28 0E 04         A  1589    	CALL	_putch
0406BA C1                  A  1590    	POP	BC
                           A  1591    ;  137	    putch(x >> 8);
                           A  1592    .LINE 137
                           A  1593    
0406BB DD2706              A  1594    	LD	HL,(IX+%6)
0406BE 3E08                A  1595    	LD	A,%8
0406C0 CD E4 11 04         A  1596    	CALL	__ishru_b
0406C4 E5                  A  1597    	PUSH	HL
0406C5 CD 28 0E 04         A  1598    	CALL	_putch
0406C9 C1                  A  1599    	POP	BC
                           A  1600    ;  138	    putch(y & 0xF);
                           A  1601    .LINE 138
                           A  1602    
0406CA DD7E09              A  1603    	LD	A,(IX+%9)
0406CD E60F                A  1604    	AND	A,%F
0406CF B7ED62              A  1605    	UEXT	HL
0406D2 6F                  A  1606    	LD	L,A
0406D3 E5                  A  1607    	PUSH	HL
0406D4 CD 28 0E 04         A  1608    	CALL	_putch
0406D8 C1                  A  1609    	POP	BC
                           A  1610    ;  139	    putch(y >> 8);
                           A  1611    .LINE 139
                           A  1612    
0406D9 DD2709              A  1613    	LD	HL,(IX+%9)
0406DC 3E08                A  1614    	LD	A,%8
0406DE CD E4 11 04         A  1615    	CALL	__ishru_b
0406E2 E5                  A  1616    	PUSH	HL
0406E3 CD 28 0E 04         A  1617    	CALL	_putch
0406E7 C1                  A  1618    	POP	BC
                           A  1619    ;  140	}
                           A  1620    .LINE 140
                           A  1621    
0406E8 DDF9                A  1622    	LD	SP,IX
0406EA DDE1                A  1623    	POP	IX
0406EC C9                  A  1624    	RET	
                           A  1625    
                           A  1626    
                           A  1627    ;**************************** _vdp_plotSetOrigi
                           A  1628    ;Name                         Addr/Register   S
                           A  1629    ;_putch                              IMPORT  --
                           A  1630    ;y                                     IX+9    
                           A  1631    ;x                                     IX+6    
                           A  1632    
                           A  1633    
                           A  1634    ; Stack Frame Size: 12 (bytes)
                           A  1635    ;       Spill Code: 0 (instruction)
                           A  1636    
                           A  1637    
                           A  1638    .ENDFUNC "vdp_plotSetOrigin",140,"_vdp_plotSetO
                           A  1639    ;  141	
                           A  1640    ;  142	// Bitmap VDP functions
                           A  1641    ;  143	void vdp_bitmapSelect(UINT8 id)
                           A  1642    ;  144	{
0406ED                     A  1643    _vdp_bitmapSelect:
                           A  1644    .DEFINE "_vdp_bitmapSelect"
                           A  1645    
                           A  1646    .VALUE _vdp_bitmapSelect
                           A  1647    
                           A  1648    .CLASS 2
                           A  1649    
                           A  1650    .TYPE 65
                           A  1651    
                           A  1652    .ENDEF
                           A  1653    
                           A  1654    .BEGFUNC "vdp_bitmapSelect",144,"_vdp_bitmapSel
                           A  1655    
                           A  1656    .LINE 144
                           A  1657    
                           A  1658    .DEFINE "id"
                           A  1659    
                           A  1660    .CLASS 65
                           A  1661    
                           A  1662    .VALUE 6
                           A  1663    
                           A  1664    .TYPE 12
                           A  1665    
                           A  1666    .ENDEF
                           A  1667    
0406ED DDE5                A  1668    	PUSH	IX
0406EF DD210000 00         A  1669    	LD	IX,0
0406F4 DD39                A  1670    	ADD	IX,SP
                           A  1671    ;  145		putch(23); // vdu_sys
                           A  1672    .LINE 145
                           A  1673    
0406F6 01170000            A  1674    	LD	BC,23
0406FA C5                  A  1675    	PUSH	BC
0406FB CD 28 0E 04         A  1676    	CALL	_putch
0406FF C1                  A  1677    	POP	BC
                           A  1678    ;  146		putch(27); // sprite command
                           A  1679    .LINE 146
                           A  1680    
040700 011B0000            A  1681    	LD	BC,27
040704 C5                  A  1682    	PUSH	BC
040705 CD 28 0E 04         A  1683    	CALL	_putch
040709 C1                  A  1684    	POP	BC
                           A  1685    ;  147		putch(0);  // select command
                           A  1686    .LINE 147
                           A  1687    
04070A 01000000            A  1688    	LD	BC,0
04070E C5                  A  1689    	PUSH	BC
04070F CD 28 0E 04         A  1690    	CALL	_putch
040713 C1                  A  1691    	POP	BC
                           A  1692    ;  148		putch(id); // bitmap_id
                           A  1693    .LINE 148
                           A  1694    
040714 DD7E06              A  1695    	LD	A,(IX+%6)
040717 B7ED62              A  1696    	UEXT	HL
04071A 6F                  A  1697    	LD	L,A
04071B E5                  A  1698    	PUSH	HL
04071C CD 28 0E 04         A  1699    	CALL	_putch
040720 C1                  A  1700    	POP	BC
                           A  1701    ;  149		return;	
                           A  1702    ;  150	}
                           A  1703    .LINE 150
                           A  1704    
040721 DDF9                A  1705    	LD	SP,IX
040723 DDE1                A  1706    	POP	IX
040725 C9                  A  1707    	RET	
                           A  1708    
                           A  1709    
                           A  1710    ;**************************** _vdp_bitmapSelect
                           A  1711    ;Name                         Addr/Register   S
                           A  1712    ;_putch                              IMPORT  --
                           A  1713    ;id                                    IX+6    
                           A  1714    
                           A  1715    
                           A  1716    ; Stack Frame Size: 9 (bytes)
                           A  1717    ;       Spill Code: 0 (instruction)
                           A  1718    
                           A  1719    
                           A  1720    .ENDFUNC "vdp_bitmapSelect",150,"_vdp_bitmapSel
                           A  1721    ;  151	
                           A  1722    ;  152	void vdp_bitmapSendDataSelected(UINT16 
                           A  1723    ;  153	{
040726                     A  1724    _vdp_bitmapSendDataSelected:
                           A  1725    .DEFINE "_vdp_bitmapSendDataSelected"
                           A  1726    
                           A  1727    .VALUE _vdp_bitmapSendDataSelected
                           A  1728    
                           A  1729    .CLASS 2
                           A  1730    
                           A  1731    .TYPE 65
                           A  1732    
                           A  1733    .ENDEF
                           A  1734    
                           A  1735    .BEGFUNC "vdp_bitmapSendDataSelected",153,"_vdp
                           A  1736    
                           A  1737    .LINE 153
                           A  1738    
                           A  1739    .DEFINE "width"
                           A  1740    
                           A  1741    .CLASS 65
                           A  1742    
                           A  1743    .VALUE 6
                           A  1744    
                           A  1745    .TYPE 13
                           A  1746    
                           A  1747    .ENDEF
                           A  1748    
                           A  1749    .DEFINE "height"
                           A  1750    
                           A  1751    .CLASS 65
                           A  1752    
                           A  1753    .VALUE 9
                           A  1754    
                           A  1755    .TYPE 13
                           A  1756    
                           A  1757    .ENDEF
                           A  1758    
                           A  1759    .DEFINE "data"
                           A  1760    
                           A  1761    .CLASS 65
                           A  1762    
                           A  1763    .VALUE 12
                           A  1764    
                           A  1765    .TYPE 47
                           A  1766    
                           A  1767    .ENDEF
                           A  1768    
                           A  1769    .DEFINE "n"
                           A  1770    
                           A  1771    .CLASS 65
                           A  1772    
                           A  1773    .VALUE -2
                           A  1774    
                           A  1775    .TYPE 13
                           A  1776    
                           A  1777    .ENDEF
                           A  1778    
040726 DDE5                A  1779    	PUSH	IX
040728 DD210000 00         A  1780    	LD	IX,0
04072D DD39                A  1781    	ADD	IX,SP
04072F 3B                  A  1782    	DEC	SP
040730 3B                  A  1783    	DEC	SP
                           A  1784    ;  154		UINT16 n;
                           A  1785    ;  155		
                           A  1786    ;  156		putch(23); // vdu_sys
                           A  1787    .LINE 156
                           A  1788    
040731 01170000            A  1789    	LD	BC,23
040735 C5                  A  1790    	PUSH	BC
040736 CD 28 0E 04         A  1791    	CALL	_putch
04073A C1                  A  1792    	POP	BC
                           A  1793    ;  157		putch(27); // sprite command
                           A  1794    .LINE 157
                           A  1795    
04073B 011B0000            A  1796    	LD	BC,27
04073F C5                  A  1797    	PUSH	BC
040740 CD 28 0E 04         A  1798    	CALL	_putch
040744 C1                  A  1799    	POP	BC
                           A  1800    ;  158		putch(1);  // send data to selected
                           A  1801    .LINE 158
                           A  1802    
040745 01010000            A  1803    	LD	BC,1
040749 C5                  A  1804    	PUSH	BC
04074A CD 28 0E 04         A  1805    	CALL	_putch
04074E C1                  A  1806    	POP	BC
                           A  1807    ;  159		
                           A  1808    ;  160		write16bit(width);
                           A  1809    .LINE 160
                           A  1810    
04074F DD0706              A  1811    	LD	BC,(IX+%6)
040752 C5                  A  1812    	PUSH	BC
040753 CD 01 03 04         A  1813    	CALL	_write16bit
040757 C1                  A  1814    	POP	BC
                           A  1815    ;  161		write16bit(height);
                           A  1816    .LINE 161
                           A  1817    
040758 DD0709              A  1818    	LD	BC,(IX+%9)
04075B C5                  A  1819    	PUSH	BC
04075C CD 01 03 04         A  1820    	CALL	_write16bit
040760 C1                  A  1821    	POP	BC
040761 18 2A 00            A  1822    	JR	L_26
                           A  1823    ;  162		
                           A  1824    ;  163		for(n = 0; n < (width*height); n++)
040764                     A  1825    L_27:
                           A  1826    .LINE 163
                           A  1827    
040764 DD0706              A  1828    	LD	BC,(IX+%6)
040767 CD 05 10 04         A  1829    	CALL	__stoiu
04076B E5D1                A  1830    	LD	DE,HL
04076D DD0709              A  1831    	LD	BC,(IX+%9)
040770 CD 05 10 04         A  1832    	CALL	__stoiu
040774 E5C1                A  1833    	LD	BC,HL
040776 D5E1                A  1834    	LD	HL,DE
040778 CD A8 11 04         A  1835    	CALL	__imuls
04077C E5D1                A  1836    	LD	DE,HL
04077E DD07FE              A  1837    	LD	BC,(IX+%FFFFFFFE)
040781 CD 05 10 04         A  1838    	CALL	__stoiu
040785 B7                  A  1839    	OR	A,A
040786 ED52                A  1840    	SBC	HL,DE
040788 FA 99 07 04         A  1841    	JP	M,L_29
04078C 18 39               A  1842    	JR	L_30
04078E                     A  1843    L_26:
04078E DD36FE00            A  1844    	LD	(IX+%FFFFFFFE),%0
040792 DD36FF00            A  1845    	LD	(IX+%FFFFFFFF),%0
040796 18 CB 00            A  1846    	JR	L_27
040799                     A  1847    L_29:
                           A  1848    ;  164		{
                           A  1849    ;  165			write32bit(data[n]);
                           A  1850    .LINE 165
                           A  1851    
040799 DD07FE              A  1852    	LD	BC,(IX+%FFFFFFFE)
04079C CD 05 10 04         A  1853    	CALL	__stoiu
0407A0 29                  A  1854    	ADD	HL,HL
0407A1 29                  A  1855    	ADD	HL,HL
0407A2 DD070C              A  1856    	LD	BC,(IX+%C)
0407A5 09                  A  1857    	ADD	HL,BC
0407A6 E5FDE1              A  1858    	LD	IY,HL
0407A9 FD0700              A  1859    	LD	BC,(IY)
0407AC FD7E03              A  1860    	LD	A,(IY+%3)
0407AF 2600                A  1861    	LD	H,%0
0407B1 6F                  A  1862    	LD	L,A
0407B2 E5                  A  1863    	PUSH	HL
0407B3 C5                  A  1864    	PUSH	BC
0407B4 CD 34 03 04         A  1865    	CALL	_write32bit
0407B8 C1                  A  1866    	POP	BC
0407B9 C1                  A  1867    	POP	BC
0407BA DD27FE              A  1868    	LD	HL,(IX+%FFFFFFFE)
0407BD 23                  A  1869    	INC	HL
0407BE DD75FE              A  1870    	LD	(IX+%FFFFFFFE),L
0407C1 DD74FF              A  1871    	LD	(IX+%FFFFFFFF),H
                           A  1872    ;  166			//delayms(1);
                           A  1873    ;  167		}
                           A  1874    .LINE 167
                           A  1875    
0407C4 18 9D 00            A  1876    	JR	L_27
0407C7                     A  1877    L_30:
                           A  1878    ;  168		return;		
                           A  1879    ;  169	}
                           A  1880    .LINE 169
                           A  1881    
0407C7 DDF9                A  1882    	LD	SP,IX
0407C9 DDE1                A  1883    	POP	IX
0407CB C9                  A  1884    	RET	
                           A  1885    
                           A  1886    
                           A  1887    ;**************************** _vdp_bitmapSendDa
                           A  1888    ;Name                         Addr/Register   S
                           A  1889    ;_putch                              IMPORT  --
                           A  1890    ;n                                     IX-2    
                           A  1891    ;data                                 IX+12    
                           A  1892    ;height                                IX+9    
                           A  1893    ;width                                 IX+6    
                           A  1894    
                           A  1895    
                           A  1896    ; Stack Frame Size: 17 (bytes)
                           A  1897    ;       Spill Code: 0 (instruction)
                           A  1898    
                           A  1899    
                           A  1900    .ENDFUNC "vdp_bitmapSendDataSelected",169,"_vdp
                           A  1901    ;  170	
                           A  1902    ;  171	void vdp_bitmapSendData(UINT8 id, UINT1
                           A  1903    ;  172	{
0407CC                     A  1904    _vdp_bitmapSendData:
                           A  1905    .DEFINE "_vdp_bitmapSendData"
                           A  1906    
                           A  1907    .VALUE _vdp_bitmapSendData
                           A  1908    
                           A  1909    .CLASS 2
                           A  1910    
                           A  1911    .TYPE 65
                           A  1912    
                           A  1913    .ENDEF
                           A  1914    
                           A  1915    .BEGFUNC "vdp_bitmapSendData",172,"_vdp_bitmapS
                           A  1916    
                           A  1917    .LINE 172
                           A  1918    
                           A  1919    .DEFINE "id"
                           A  1920    
                           A  1921    .CLASS 65
                           A  1922    
                           A  1923    .VALUE 6
                           A  1924    
                           A  1925    .TYPE 12
                           A  1926    
                           A  1927    .ENDEF
                           A  1928    
                           A  1929    .DEFINE "width"
                           A  1930    
                           A  1931    .CLASS 65
                           A  1932    
                           A  1933    .VALUE 9
                           A  1934    
                           A  1935    .TYPE 13
                           A  1936    
                           A  1937    .ENDEF
                           A  1938    
                           A  1939    .DEFINE "height"
                           A  1940    
                           A  1941    .CLASS 65
                           A  1942    
                           A  1943    .VALUE 12
                           A  1944    
                           A  1945    .TYPE 13
                           A  1946    
                           A  1947    .ENDEF
                           A  1948    
                           A  1949    .DEFINE "data"
                           A  1950    
                           A  1951    .CLASS 65
                           A  1952    
                           A  1953    .VALUE 15
                           A  1954    
                           A  1955    .TYPE 47
                           A  1956    
                           A  1957    .ENDEF
                           A  1958    
0407CC DDE5                A  1959    	PUSH	IX
0407CE DD210000 00         A  1960    	LD	IX,0
0407D3 DD39                A  1961    	ADD	IX,SP
                           A  1962    ;  173		vdp_bitmapSelect(id);
                           A  1963    .LINE 173
                           A  1964    
0407D5 DD4E06              A  1965    	LD	C,(IX+%6)
0407D8 0600                A  1966    	LD	B,%0
0407DA C5                  A  1967    	PUSH	BC
0407DB CD ED 06 04         A  1968    	CALL	_vdp_bitmapSelect
0407DF C1                  A  1969    	POP	BC
                           A  1970    ;  174		vdp_bitmapSendDataSelected(width, h
                           A  1971    .LINE 174
                           A  1972    
0407E0 DD070F              A  1973    	LD	BC,(IX+%F)
0407E3 C5                  A  1974    	PUSH	BC
0407E4 DD070C              A  1975    	LD	BC,(IX+%C)
0407E7 C5                  A  1976    	PUSH	BC
0407E8 DD0709              A  1977    	LD	BC,(IX+%9)
0407EB C5                  A  1978    	PUSH	BC
0407EC CD 26 07 04         A  1979    	CALL	_vdp_bitmapSendDataSelected
0407F0 C1                  A  1980    	POP	BC
0407F1 C1                  A  1981    	POP	BC
0407F2 C1                  A  1982    	POP	BC
                           A  1983    ;  175		return;	
                           A  1984    ;  176	}
                           A  1985    .LINE 176
                           A  1986    
0407F3 DDF9                A  1987    	LD	SP,IX
0407F5 DDE1                A  1988    	POP	IX
0407F7 C9                  A  1989    	RET	
                           A  1990    
                           A  1991    
                           A  1992    ;**************************** _vdp_bitmapSendDa
                           A  1993    ;Name                         Addr/Register   S
                           A  1994    ;data                                 IX+15    
                           A  1995    ;height                               IX+12    
                           A  1996    ;width                                 IX+9    
                           A  1997    ;id                                    IX+6    
                           A  1998    
                           A  1999    
                           A  2000    ; Stack Frame Size: 18 (bytes)
                           A  2001    ;       Spill Code: 0 (instruction)
                           A  2002    
                           A  2003    
                           A  2004    .ENDFUNC "vdp_bitmapSendData",176,"_vdp_bitmapS
                           A  2005    ;  177	
                           A  2006    ;  178	void vdp_bitmapDrawSelected(UINT16 x, U
                           A  2007    ;  179	{
0407F8                     A  2008    _vdp_bitmapDrawSelected:
                           A  2009    .DEFINE "_vdp_bitmapDrawSelected"
                           A  2010    
                           A  2011    .VALUE _vdp_bitmapDrawSelected
                           A  2012    
                           A  2013    .CLASS 2
                           A  2014    
                           A  2015    .TYPE 65
                           A  2016    
                           A  2017    .ENDEF
                           A  2018    
                           A  2019    .BEGFUNC "vdp_bitmapDrawSelected",179,"_vdp_bit
                           A  2020    
                           A  2021    .LINE 179
                           A  2022    
                           A  2023    .DEFINE "x"
                           A  2024    
                           A  2025    .CLASS 65
                           A  2026    
                           A  2027    .VALUE 6
                           A  2028    
                           A  2029    .TYPE 13
                           A  2030    
                           A  2031    .ENDEF
                           A  2032    
                           A  2033    .DEFINE "y"
                           A  2034    
                           A  2035    .CLASS 65
                           A  2036    
                           A  2037    .VALUE 9
                           A  2038    
                           A  2039    .TYPE 13
                           A  2040    
                           A  2041    .ENDEF
                           A  2042    
0407F8 DDE5                A  2043    	PUSH	IX
0407FA DD210000 00         A  2044    	LD	IX,0
0407FF DD39                A  2045    	ADD	IX,SP
                           A  2046    ;  180		putch(23); // vdu_sys
                           A  2047    .LINE 180
                           A  2048    
040801 01170000            A  2049    	LD	BC,23
040805 C5                  A  2050    	PUSH	BC
040806 CD 28 0E 04         A  2051    	CALL	_putch
04080A C1                  A  2052    	POP	BC
                           A  2053    ;  181		putch(27); // sprite command
                           A  2054    .LINE 181
                           A  2055    
04080B 011B0000            A  2056    	LD	BC,27
04080F C5                  A  2057    	PUSH	BC
040810 CD 28 0E 04         A  2058    	CALL	_putch
040814 C1                  A  2059    	POP	BC
                           A  2060    ;  182		putch(3);  // draw selected bitmap
                           A  2061    .LINE 182
                           A  2062    
040815 01030000            A  2063    	LD	BC,3
040819 C5                  A  2064    	PUSH	BC
04081A CD 28 0E 04         A  2065    	CALL	_putch
04081E C1                  A  2066    	POP	BC
                           A  2067    ;  183		
                           A  2068    ;  184		write16bit(x);
                           A  2069    .LINE 184
                           A  2070    
04081F DD0706              A  2071    	LD	BC,(IX+%6)
040822 C5                  A  2072    	PUSH	BC
040823 CD 01 03 04         A  2073    	CALL	_write16bit
040827 C1                  A  2074    	POP	BC
                           A  2075    ;  185		write16bit(y);
                           A  2076    .LINE 185
                           A  2077    
040828 DD0709              A  2078    	LD	BC,(IX+%9)
04082B C5                  A  2079    	PUSH	BC
04082C CD 01 03 04         A  2080    	CALL	_write16bit
040830 C1                  A  2081    	POP	BC
                           A  2082    ;  186		
                           A  2083    ;  187		return;
                           A  2084    ;  188	}
                           A  2085    .LINE 188
                           A  2086    
040831 DDF9                A  2087    	LD	SP,IX
040833 DDE1                A  2088    	POP	IX
040835 C9                  A  2089    	RET	
                           A  2090    
                           A  2091    
                           A  2092    ;**************************** _vdp_bitmapDrawSe
                           A  2093    ;Name                         Addr/Register   S
                           A  2094    ;_putch                              IMPORT  --
                           A  2095    ;y                                     IX+9    
                           A  2096    ;x                                     IX+6    
                           A  2097    
                           A  2098    
                           A  2099    ; Stack Frame Size: 12 (bytes)
                           A  2100    ;       Spill Code: 0 (instruction)
                           A  2101    
                           A  2102    
                           A  2103    .ENDFUNC "vdp_bitmapDrawSelected",188,"_vdp_bit
                           A  2104    ;  189	
                           A  2105    ;  190	void vdp_bitmapDraw(UINT8 id, UINT16 x,
                           A  2106    ;  191	{
040836                     A  2107    _vdp_bitmapDraw:
                           A  2108    .DEFINE "_vdp_bitmapDraw"
                           A  2109    
                           A  2110    .VALUE _vdp_bitmapDraw
                           A  2111    
                           A  2112    .CLASS 2
                           A  2113    
                           A  2114    .TYPE 65
                           A  2115    
                           A  2116    .ENDEF
                           A  2117    
                           A  2118    .BEGFUNC "vdp_bitmapDraw",191,"_vdp_bitmapDraw"
                           A  2119    
                           A  2120    .LINE 191
                           A  2121    
                           A  2122    .DEFINE "id"
                           A  2123    
                           A  2124    .CLASS 65
                           A  2125    
                           A  2126    .VALUE 6
                           A  2127    
                           A  2128    .TYPE 12
                           A  2129    
                           A  2130    .ENDEF
                           A  2131    
                           A  2132    .DEFINE "x"
                           A  2133    
                           A  2134    .CLASS 65
                           A  2135    
                           A  2136    .VALUE 9
                           A  2137    
                           A  2138    .TYPE 13
                           A  2139    
                           A  2140    .ENDEF
                           A  2141    
                           A  2142    .DEFINE "y"
                           A  2143    
                           A  2144    .CLASS 65
                           A  2145    
                           A  2146    .VALUE 12
                           A  2147    
                           A  2148    .TYPE 13
                           A  2149    
                           A  2150    .ENDEF
                           A  2151    
040836 DDE5                A  2152    	PUSH	IX
040838 DD210000 00         A  2153    	LD	IX,0
04083D DD39                A  2154    	ADD	IX,SP
                           A  2155    ;  192		vdp_bitmapSelect(id);
                           A  2156    .LINE 192
                           A  2157    
04083F DD4E06              A  2158    	LD	C,(IX+%6)
040842 0600                A  2159    	LD	B,%0
040844 C5                  A  2160    	PUSH	BC
040845 CD ED 06 04         A  2161    	CALL	_vdp_bitmapSelect
040849 C1                  A  2162    	POP	BC
                           A  2163    ;  193		vdp_bitmapDrawSelected(x,y);
                           A  2164    .LINE 193
                           A  2165    
04084A DD070C              A  2166    	LD	BC,(IX+%C)
04084D C5                  A  2167    	PUSH	BC
04084E DD0709              A  2168    	LD	BC,(IX+%9)
040851 C5                  A  2169    	PUSH	BC
040852 CD F8 07 04         A  2170    	CALL	_vdp_bitmapDrawSelected
040856 C1                  A  2171    	POP	BC
040857 C1                  A  2172    	POP	BC
                           A  2173    ;  194		return;	
                           A  2174    ;  195	}
                           A  2175    .LINE 195
                           A  2176    
040858 DDF9                A  2177    	LD	SP,IX
04085A DDE1                A  2178    	POP	IX
04085C C9                  A  2179    	RET	
                           A  2180    
                           A  2181    
                           A  2182    ;**************************** _vdp_bitmapDraw *
                           A  2183    ;Name                         Addr/Register   S
                           A  2184    ;y                                    IX+12    
                           A  2185    ;x                                     IX+9    
                           A  2186    ;id                                    IX+6    
                           A  2187    
                           A  2188    
                           A  2189    ; Stack Frame Size: 15 (bytes)
                           A  2190    ;       Spill Code: 0 (instruction)
                           A  2191    
                           A  2192    
                           A  2193    .ENDFUNC "vdp_bitmapDraw",195,"_vdp_bitmapDraw"
                           A  2194    ;  196	
                           A  2195    ;  197	void vdp_bitmapCreateSolidColorSelected
                           A  2196    ;  198	{
04085D                     A  2197    _vdp_bitmapCreateSolidColorSelected:
                           A  2198    .DEFINE "_vdp_bitmapCreateSolidColorSelected"
                           A  2199    
                           A  2200    .VALUE _vdp_bitmapCreateSolidColorSelected
                           A  2201    
                           A  2202    .CLASS 2
                           A  2203    
                           A  2204    .TYPE 65
                           A  2205    
                           A  2206    .ENDEF
                           A  2207    
                           A  2208    .BEGFUNC "vdp_bitmapCreateSolidColorSelected",1
                           A  2209    
                           A  2210    .LINE 198
                           A  2211    
                           A  2212    .DEFINE "width"
                           A  2213    
                           A  2214    .CLASS 65
                           A  2215    
                           A  2216    .VALUE 6
                           A  2217    
                           A  2218    .TYPE 13
                           A  2219    
                           A  2220    .ENDEF
                           A  2221    
                           A  2222    .DEFINE "height"
                           A  2223    
                           A  2224    .CLASS 65
                           A  2225    
                           A  2226    .VALUE 9
                           A  2227    
                           A  2228    .TYPE 13
                           A  2229    
                           A  2230    .ENDEF
                           A  2231    
                           A  2232    .DEFINE "abgr"
                           A  2233    
                           A  2234    .CLASS 65
                           A  2235    
                           A  2236    .VALUE 12
                           A  2237    
                           A  2238    .TYPE 15
                           A  2239    
                           A  2240    .ENDEF
                           A  2241    
04085D DDE5                A  2242    	PUSH	IX
04085F DD210000 00         A  2243    	LD	IX,0
040864 DD39                A  2244    	ADD	IX,SP
                           A  2245    ;  199		putch(23); // vdu_sys
                           A  2246    .LINE 199
                           A  2247    
040866 01170000            A  2248    	LD	BC,23
04086A C5                  A  2249    	PUSH	BC
04086B CD 28 0E 04         A  2250    	CALL	_putch
04086F C1                  A  2251    	POP	BC
                           A  2252    ;  200		putch(27); // sprite command
                           A  2253    .LINE 200
                           A  2254    
040870 011B0000            A  2255    	LD	BC,27
040874 C5                  A  2256    	PUSH	BC
040875 CD 28 0E 04         A  2257    	CALL	_putch
040879 C1                  A  2258    	POP	BC
                           A  2259    ;  201		putch(2);  // define in single colo
                           A  2260    .LINE 201
                           A  2261    
04087A 01020000            A  2262    	LD	BC,2
04087E C5                  A  2263    	PUSH	BC
04087F CD 28 0E 04         A  2264    	CALL	_putch
040883 C1                  A  2265    	POP	BC
                           A  2266    ;  202		
                           A  2267    ;  203		write16bit(width);
                           A  2268    .LINE 203
                           A  2269    
040884 DD0706              A  2270    	LD	BC,(IX+%6)
040887 C5                  A  2271    	PUSH	BC
040888 CD 01 03 04         A  2272    	CALL	_write16bit
04088C C1                  A  2273    	POP	BC
                           A  2274    ;  204		write16bit(height);
                           A  2275    .LINE 204
                           A  2276    
04088D DD0709              A  2277    	LD	BC,(IX+%9)
040890 C5                  A  2278    	PUSH	BC
040891 CD 01 03 04         A  2279    	CALL	_write16bit
040895 C1                  A  2280    	POP	BC
                           A  2281    ;  205		write32bit(abgr);
                           A  2282    .LINE 205
                           A  2283    
040896 DD4E0F              A  2284    	LD	C,(IX+%F)
040899 0600                A  2285    	LD	B,%0
04089B C5                  A  2286    	PUSH	BC
04089C DD070C              A  2287    	LD	BC,(IX+%C)
04089F C5                  A  2288    	PUSH	BC
0408A0 CD 34 03 04         A  2289    	CALL	_write32bit
0408A4 C1                  A  2290    	POP	BC
0408A5 C1                  A  2291    	POP	BC
                           A  2292    ;  206		return;		
                           A  2293    ;  207	}
                           A  2294    .LINE 207
                           A  2295    
0408A6 DDF9                A  2296    	LD	SP,IX
0408A8 DDE1                A  2297    	POP	IX
0408AA C9                  A  2298    	RET	
                           A  2299    
                           A  2300    
                           A  2301    ;**************************** _vdp_bitmapCreate
                           A  2302    ;Name                         Addr/Register   S
                           A  2303    ;_putch                              IMPORT  --
                           A  2304    ;abgr                                 IX+12    
                           A  2305    ;height                                IX+9    
                           A  2306    ;width                                 IX+6    
                           A  2307    
                           A  2308    
                           A  2309    ; Stack Frame Size: 18 (bytes)
                           A  2310    ;       Spill Code: 0 (instruction)
                           A  2311    
                           A  2312    
                           A  2313    .ENDFUNC "vdp_bitmapCreateSolidColorSelected",2
                           A  2314    ;  208	
                           A  2315    ;  209	void vdp_bitmapCreateSolidColor(UINT8 i
                           A  2316    ;  210	{
0408AB                     A  2317    _vdp_bitmapCreateSolidColor:
                           A  2318    .DEFINE "_vdp_bitmapCreateSolidColor"
                           A  2319    
                           A  2320    .VALUE _vdp_bitmapCreateSolidColor
                           A  2321    
                           A  2322    .CLASS 2
                           A  2323    
                           A  2324    .TYPE 65
                           A  2325    
                           A  2326    .ENDEF
                           A  2327    
                           A  2328    .BEGFUNC "vdp_bitmapCreateSolidColor",210,"_vdp
                           A  2329    
                           A  2330    .LINE 210
                           A  2331    
                           A  2332    .DEFINE "id"
                           A  2333    
                           A  2334    .CLASS 65
                           A  2335    
                           A  2336    .VALUE 6
                           A  2337    
                           A  2338    .TYPE 12
                           A  2339    
                           A  2340    .ENDEF
                           A  2341    
                           A  2342    .DEFINE "width"
                           A  2343    
                           A  2344    .CLASS 65
                           A  2345    
                           A  2346    .VALUE 9
                           A  2347    
                           A  2348    .TYPE 13
                           A  2349    
                           A  2350    .ENDEF
                           A  2351    
                           A  2352    .DEFINE "height"
                           A  2353    
                           A  2354    .CLASS 65
                           A  2355    
                           A  2356    .VALUE 12
                           A  2357    
                           A  2358    .TYPE 13
                           A  2359    
                           A  2360    .ENDEF
                           A  2361    
                           A  2362    .DEFINE "abgr"
                           A  2363    
                           A  2364    .CLASS 65
                           A  2365    
                           A  2366    .VALUE 15
                           A  2367    
                           A  2368    .TYPE 15
                           A  2369    
                           A  2370    .ENDEF
                           A  2371    
0408AB DDE5                A  2372    	PUSH	IX
0408AD DD210000 00         A  2373    	LD	IX,0
0408B2 DD39                A  2374    	ADD	IX,SP
                           A  2375    ;  211		vdp_bitmapSelect(id);
                           A  2376    .LINE 211
                           A  2377    
0408B4 DD4E06              A  2378    	LD	C,(IX+%6)
0408B7 0600                A  2379    	LD	B,%0
0408B9 C5                  A  2380    	PUSH	BC
0408BA CD ED 06 04         A  2381    	CALL	_vdp_bitmapSelect
0408BE C1                  A  2382    	POP	BC
                           A  2383    ;  212		vdp_bitmapCreateSolidColorSelected(
                           A  2384    .LINE 212
                           A  2385    
0408BF DD4E12              A  2386    	LD	C,(IX+%12)
0408C2 0600                A  2387    	LD	B,%0
0408C4 C5                  A  2388    	PUSH	BC
0408C5 DD070F              A  2389    	LD	BC,(IX+%F)
0408C8 C5                  A  2390    	PUSH	BC
0408C9 DD070C              A  2391    	LD	BC,(IX+%C)
0408CC C5                  A  2392    	PUSH	BC
0408CD DD0709              A  2393    	LD	BC,(IX+%9)
0408D0 C5                  A  2394    	PUSH	BC
0408D1 CD 5D 08 04         A  2395    	CALL	_vdp_bitmapCreateSolidColorSelected
0408D5 C1                  A  2396    	POP	BC
0408D6 C1                  A  2397    	POP	BC
0408D7 C1                  A  2398    	POP	BC
0408D8 C1                  A  2399    	POP	BC
                           A  2400    ;  213		return;	
                           A  2401    ;  214	}
                           A  2402    .LINE 214
                           A  2403    
0408D9 DDF9                A  2404    	LD	SP,IX
0408DB DDE1                A  2405    	POP	IX
0408DD C9                  A  2406    	RET	
                           A  2407    
                           A  2408    
                           A  2409    ;**************************** _vdp_bitmapCreate
                           A  2410    ;Name                         Addr/Register   S
                           A  2411    ;abgr                                 IX+15    
                           A  2412    ;height                               IX+12    
                           A  2413    ;width                                 IX+9    
                           A  2414    ;id                                    IX+6    
                           A  2415    
                           A  2416    
                           A  2417    ; Stack Frame Size: 21 (bytes)
                           A  2418    ;       Spill Code: 0 (instruction)
                           A  2419    
                           A  2420    
                           A  2421    .ENDFUNC "vdp_bitmapCreateSolidColor",214,"_vdp
                           A  2422    ;  215	
                           A  2423    ;  216	// Sprite VDP functions
                           A  2424    ;  217	void vdp_spriteSelect(UINT8 id)
                           A  2425    ;  218	{
0408DE                     A  2426    _vdp_spriteSelect:
                           A  2427    .DEFINE "_vdp_spriteSelect"
                           A  2428    
                           A  2429    .VALUE _vdp_spriteSelect
                           A  2430    
                           A  2431    .CLASS 2
                           A  2432    
                           A  2433    .TYPE 65
                           A  2434    
                           A  2435    .ENDEF
                           A  2436    
                           A  2437    .BEGFUNC "vdp_spriteSelect",218,"_vdp_spriteSel
                           A  2438    
                           A  2439    .LINE 218
                           A  2440    
                           A  2441    .DEFINE "id"
                           A  2442    
                           A  2443    .CLASS 65
                           A  2444    
                           A  2445    .VALUE 6
                           A  2446    
                           A  2447    .TYPE 12
                           A  2448    
                           A  2449    .ENDEF
                           A  2450    
0408DE DDE5                A  2451    	PUSH	IX
0408E0 DD210000 00         A  2452    	LD	IX,0
0408E5 DD39                A  2453    	ADD	IX,SP
                           A  2454    ;  219		putch(23); // vdu_sys
                           A  2455    .LINE 219
                           A  2456    
0408E7 01170000            A  2457    	LD	BC,23
0408EB C5                  A  2458    	PUSH	BC
0408EC CD 28 0E 04         A  2459    	CALL	_putch
0408F0 C1                  A  2460    	POP	BC
                           A  2461    ;  220		putch(27); // sprite command
                           A  2462    .LINE 220
                           A  2463    
0408F1 011B0000            A  2464    	LD	BC,27
0408F5 C5                  A  2465    	PUSH	BC
0408F6 CD 28 0E 04         A  2466    	CALL	_putch
0408FA C1                  A  2467    	POP	BC
                           A  2468    ;  221		putch(4);  // select sprite
                           A  2469    .LINE 221
                           A  2470    
0408FB 01040000            A  2471    	LD	BC,4
0408FF C5                  A  2472    	PUSH	BC
040900 CD 28 0E 04         A  2473    	CALL	_putch
040904 C1                  A  2474    	POP	BC
                           A  2475    ;  222		putch(id);
                           A  2476    .LINE 222
                           A  2477    
040905 DD7E06              A  2478    	LD	A,(IX+%6)
040908 B7ED62              A  2479    	UEXT	HL
04090B 6F                  A  2480    	LD	L,A
04090C E5                  A  2481    	PUSH	HL
04090D CD 28 0E 04         A  2482    	CALL	_putch
040911 C1                  A  2483    	POP	BC
                           A  2484    ;  223		return;			
                           A  2485    ;  224	}
                           A  2486    .LINE 224
                           A  2487    
040912 DDF9                A  2488    	LD	SP,IX
040914 DDE1                A  2489    	POP	IX
040916 C9                  A  2490    	RET	
                           A  2491    
                           A  2492    
                           A  2493    ;**************************** _vdp_spriteSelect
                           A  2494    ;Name                         Addr/Register   S
                           A  2495    ;_putch                              IMPORT  --
                           A  2496    ;id                                    IX+6    
                           A  2497    
                           A  2498    
                           A  2499    ; Stack Frame Size: 9 (bytes)
                           A  2500    ;       Spill Code: 0 (instruction)
                           A  2501    
                           A  2502    
                           A  2503    .ENDFUNC "vdp_spriteSelect",224,"_vdp_spriteSel
                           A  2504    ;  225	
                           A  2505    ;  226	void vdp_spriteClearFramesSelected(void
                           A  2506    ;  227	{
040917                     A  2507    _vdp_spriteClearFramesSelected:
                           A  2508    .DEFINE "_vdp_spriteClearFramesSelected"
                           A  2509    
                           A  2510    .VALUE _vdp_spriteClearFramesSelected
                           A  2511    
                           A  2512    .CLASS 2
                           A  2513    
                           A  2514    .TYPE 65
                           A  2515    
                           A  2516    .ENDEF
                           A  2517    
                           A  2518    .BEGFUNC "vdp_spriteClearFramesSelected",227,"_
                           A  2519    
040917 DDE5                A  2520    	PUSH	IX
040919 DD210000 00         A  2521    	LD	IX,0
04091E DD39                A  2522    	ADD	IX,SP
                           A  2523    ;  228		putch(23); // vdu_sys
                           A  2524    .LINE 228
                           A  2525    
040920 01170000            A  2526    	LD	BC,23
040924 C5                  A  2527    	PUSH	BC
040925 CD 28 0E 04         A  2528    	CALL	_putch
040929 C1                  A  2529    	POP	BC
                           A  2530    ;  229		putch(27); // sprite command
                           A  2531    .LINE 229
                           A  2532    
04092A 011B0000            A  2533    	LD	BC,27
04092E C5                  A  2534    	PUSH	BC
04092F CD 28 0E 04         A  2535    	CALL	_putch
040933 C1                  A  2536    	POP	BC
                           A  2537    ;  230		putch(5);  // clear frames
                           A  2538    .LINE 230
                           A  2539    
040934 01050000            A  2540    	LD	BC,5
040938 C5                  A  2541    	PUSH	BC
040939 CD 28 0E 04         A  2542    	CALL	_putch
04093D C1                  A  2543    	POP	BC
                           A  2544    ;  231		return;				
                           A  2545    ;  232	}
                           A  2546    .LINE 232
                           A  2547    
04093E DDF9                A  2548    	LD	SP,IX
040940 DDE1                A  2549    	POP	IX
040942 C9                  A  2550    	RET	
                           A  2551    
                           A  2552    
                           A  2553    ;**************************** _vdp_spriteClearF
                           A  2554    ;Name                         Addr/Register   S
                           A  2555    ;_putch                              IMPORT  --
                           A  2556    
                           A  2557    
                           A  2558    ; Stack Frame Size: 6 (bytes)
                           A  2559    ;       Spill Code: 0 (instruction)
                           A  2560    
                           A  2561    
                           A  2562    .ENDFUNC "vdp_spriteClearFramesSelected",232,"_
                           A  2563    ;  233	
                           A  2564    ;  234	void vdp_spriteClearFrames(UINT8 bitmap
                           A  2565    ;  235	{
040943                     A  2566    _vdp_spriteClearFrames:
                           A  2567    .DEFINE "_vdp_spriteClearFrames"
                           A  2568    
                           A  2569    .VALUE _vdp_spriteClearFrames
                           A  2570    
                           A  2571    .CLASS 2
                           A  2572    
                           A  2573    .TYPE 65
                           A  2574    
                           A  2575    .ENDEF
                           A  2576    
                           A  2577    .BEGFUNC "vdp_spriteClearFrames",235,"_vdp_spri
                           A  2578    
                           A  2579    .LINE 235
                           A  2580    
                           A  2581    .DEFINE "bitmapid"
                           A  2582    
                           A  2583    .CLASS 65
                           A  2584    
                           A  2585    .VALUE 6
                           A  2586    
                           A  2587    .TYPE 12
                           A  2588    
                           A  2589    .ENDEF
                           A  2590    
040943 DDE5                A  2591    	PUSH	IX
040945 DD210000 00         A  2592    	LD	IX,0
04094A DD39                A  2593    	ADD	IX,SP
                           A  2594    ;  236		vdp_spriteSelect(bitmapid);
                           A  2595    .LINE 236
                           A  2596    
04094C DD4E06              A  2597    	LD	C,(IX+%6)
04094F 0600                A  2598    	LD	B,%0
040951 C5                  A  2599    	PUSH	BC
040952 CD DE 08 04         A  2600    	CALL	_vdp_spriteSelect
040956 C1                  A  2601    	POP	BC
                           A  2602    ;  237		vdp_spriteClearFramesSelected();
                           A  2603    .LINE 237
                           A  2604    
040957 CD 17 09 04         A  2605    	CALL	_vdp_spriteClearFramesSelected
                           A  2606    ;  238		return;				
                           A  2607    ;  239	}
                           A  2608    .LINE 239
                           A  2609    
04095B DDF9                A  2610    	LD	SP,IX
04095D DDE1                A  2611    	POP	IX
04095F C9                  A  2612    	RET	
                           A  2613    
                           A  2614    
                           A  2615    ;**************************** _vdp_spriteClearF
                           A  2616    ;Name                         Addr/Register   S
                           A  2617    ;bitmapid                              IX+6    
                           A  2618    
                           A  2619    
                           A  2620    ; Stack Frame Size: 9 (bytes)
                           A  2621    ;       Spill Code: 0 (instruction)
                           A  2622    
                           A  2623    
                           A  2624    .ENDFUNC "vdp_spriteClearFrames",239,"_vdp_spri
                           A  2625    ;  240	
                           A  2626    ;  241	void vdp_spriteAddFrameSelected(UINT8 b
                           A  2627    ;  242	{
040960                     A  2628    _vdp_spriteAddFrameSelected:
                           A  2629    .DEFINE "_vdp_spriteAddFrameSelected"
                           A  2630    
                           A  2631    .VALUE _vdp_spriteAddFrameSelected
                           A  2632    
                           A  2633    .CLASS 2
                           A  2634    
                           A  2635    .TYPE 65
                           A  2636    
                           A  2637    .ENDEF
                           A  2638    
                           A  2639    .BEGFUNC "vdp_spriteAddFrameSelected",242,"_vdp
                           A  2640    
                           A  2641    .LINE 242
                           A  2642    
                           A  2643    .DEFINE "bitmapid"
                           A  2644    
                           A  2645    .CLASS 65
                           A  2646    
                           A  2647    .VALUE 6
                           A  2648    
                           A  2649    .TYPE 12
                           A  2650    
                           A  2651    .ENDEF
                           A  2652    
040960 DDE5                A  2653    	PUSH	IX
040962 DD210000 00         A  2654    	LD	IX,0
040967 DD39                A  2655    	ADD	IX,SP
                           A  2656    ;  243		putch(23); // vdu_sys
                           A  2657    .LINE 243
                           A  2658    
040969 01170000            A  2659    	LD	BC,23
04096D C5                  A  2660    	PUSH	BC
04096E CD 28 0E 04         A  2661    	CALL	_putch
040972 C1                  A  2662    	POP	BC
                           A  2663    ;  244		putch(27); // sprite command
                           A  2664    .LINE 244
                           A  2665    
040973 011B0000            A  2666    	LD	BC,27
040977 C5                  A  2667    	PUSH	BC
040978 CD 28 0E 04         A  2668    	CALL	_putch
04097C C1                  A  2669    	POP	BC
                           A  2670    ;  245		putch(6);  // add frame
                           A  2671    .LINE 245
                           A  2672    
04097D 01060000            A  2673    	LD	BC,6
040981 C5                  A  2674    	PUSH	BC
040982 CD 28 0E 04         A  2675    	CALL	_putch
040986 C1                  A  2676    	POP	BC
                           A  2677    ;  246		putch(bitmapid);
                           A  2678    .LINE 246
                           A  2679    
040987 DD7E06              A  2680    	LD	A,(IX+%6)
04098A B7ED62              A  2681    	UEXT	HL
04098D 6F                  A  2682    	LD	L,A
04098E E5                  A  2683    	PUSH	HL
04098F CD 28 0E 04         A  2684    	CALL	_putch
040993 C1                  A  2685    	POP	BC
                           A  2686    ;  247		return;	
                           A  2687    ;  248	}
                           A  2688    .LINE 248
                           A  2689    
040994 DDF9                A  2690    	LD	SP,IX
040996 DDE1                A  2691    	POP	IX
040998 C9                  A  2692    	RET	
                           A  2693    
                           A  2694    
                           A  2695    ;**************************** _vdp_spriteAddFra
                           A  2696    ;Name                         Addr/Register   S
                           A  2697    ;_putch                              IMPORT  --
                           A  2698    ;bitmapid                              IX+6    
                           A  2699    
                           A  2700    
                           A  2701    ; Stack Frame Size: 9 (bytes)
                           A  2702    ;       Spill Code: 0 (instruction)
                           A  2703    
                           A  2704    
                           A  2705    .ENDFUNC "vdp_spriteAddFrameSelected",248,"_vdp
                           A  2706    ;  249	
                           A  2707    ;  250	void vdp_spriteAddFrame(UINT8 id, UINT8
                           A  2708    ;  251	{
040999                     A  2709    _vdp_spriteAddFrame:
                           A  2710    .DEFINE "_vdp_spriteAddFrame"
                           A  2711    
                           A  2712    .VALUE _vdp_spriteAddFrame
                           A  2713    
                           A  2714    .CLASS 2
                           A  2715    
                           A  2716    .TYPE 65
                           A  2717    
                           A  2718    .ENDEF
                           A  2719    
                           A  2720    .BEGFUNC "vdp_spriteAddFrame",251,"_vdp_spriteA
                           A  2721    
                           A  2722    .LINE 251
                           A  2723    
                           A  2724    .DEFINE "id"
                           A  2725    
                           A  2726    .CLASS 65
                           A  2727    
                           A  2728    .VALUE 6
                           A  2729    
                           A  2730    .TYPE 12
                           A  2731    
                           A  2732    .ENDEF
                           A  2733    
                           A  2734    .DEFINE "bitmapid"
                           A  2735    
                           A  2736    .CLASS 65
                           A  2737    
                           A  2738    .VALUE 9
                           A  2739    
                           A  2740    .TYPE 12
                           A  2741    
                           A  2742    .ENDEF
                           A  2743    
040999 DDE5                A  2744    	PUSH	IX
04099B DD210000 00         A  2745    	LD	IX,0
0409A0 DD39                A  2746    	ADD	IX,SP
                           A  2747    ;  252		vdp_spriteSelect(id);
                           A  2748    .LINE 252
                           A  2749    
0409A2 DD4E06              A  2750    	LD	C,(IX+%6)
0409A5 0600                A  2751    	LD	B,%0
0409A7 C5                  A  2752    	PUSH	BC
0409A8 CD DE 08 04         A  2753    	CALL	_vdp_spriteSelect
0409AC C1                  A  2754    	POP	BC
                           A  2755    ;  253		vdp_spriteAddFrameSelected(bitmapid
                           A  2756    .LINE 253
                           A  2757    
0409AD DD4E09              A  2758    	LD	C,(IX+%9)
0409B0 0600                A  2759    	LD	B,%0
0409B2 C5                  A  2760    	PUSH	BC
0409B3 CD 60 09 04         A  2761    	CALL	_vdp_spriteAddFrameSelected
0409B7 C1                  A  2762    	POP	BC
                           A  2763    ;  254		return;	
                           A  2764    ;  255	}
                           A  2765    .LINE 255
                           A  2766    
0409B8 DDF9                A  2767    	LD	SP,IX
0409BA DDE1                A  2768    	POP	IX
0409BC C9                  A  2769    	RET	
                           A  2770    
                           A  2771    
                           A  2772    ;**************************** _vdp_spriteAddFra
                           A  2773    ;Name                         Addr/Register   S
                           A  2774    ;bitmapid                              IX+9    
                           A  2775    ;id                                    IX+6    
                           A  2776    
                           A  2777    
                           A  2778    ; Stack Frame Size: 12 (bytes)
                           A  2779    ;       Spill Code: 0 (instruction)
                           A  2780    
                           A  2781    
                           A  2782    .ENDFUNC "vdp_spriteAddFrame",255,"_vdp_spriteA
                           A  2783    ;  256	
                           A  2784    ;  257	void vdp_spriteNextFrameSelected(void)
                           A  2785    ;  258	{
0409BD                     A  2786    _vdp_spriteNextFrameSelected:
                           A  2787    .DEFINE "_vdp_spriteNextFrameSelected"
                           A  2788    
                           A  2789    .VALUE _vdp_spriteNextFrameSelected
                           A  2790    
                           A  2791    .CLASS 2
                           A  2792    
                           A  2793    .TYPE 65
                           A  2794    
                           A  2795    .ENDEF
                           A  2796    
                           A  2797    .BEGFUNC "vdp_spriteNextFrameSelected",258,"_vd
                           A  2798    
0409BD DDE5                A  2799    	PUSH	IX
0409BF DD210000 00         A  2800    	LD	IX,0
0409C4 DD39                A  2801    	ADD	IX,SP
                           A  2802    ;  259		putch(23); // vdu_sys
                           A  2803    .LINE 259
                           A  2804    
0409C6 01170000            A  2805    	LD	BC,23
0409CA C5                  A  2806    	PUSH	BC
0409CB CD 28 0E 04         A  2807    	CALL	_putch
0409CF C1                  A  2808    	POP	BC
                           A  2809    ;  260		putch(27); // sprite command
                           A  2810    .LINE 260
                           A  2811    
0409D0 011B0000            A  2812    	LD	BC,27
0409D4 C5                  A  2813    	PUSH	BC
0409D5 CD 28 0E 04         A  2814    	CALL	_putch
0409D9 C1                  A  2815    	POP	BC
                           A  2816    ;  261		putch(8);  // next frame
                           A  2817    .LINE 261
                           A  2818    
0409DA 01080000            A  2819    	LD	BC,8
0409DE C5                  A  2820    	PUSH	BC
0409DF CD 28 0E 04         A  2821    	CALL	_putch
0409E3 C1                  A  2822    	POP	BC
                           A  2823    ;  262		return;			
                           A  2824    ;  263	}
                           A  2825    .LINE 263
                           A  2826    
0409E4 DDF9                A  2827    	LD	SP,IX
0409E6 DDE1                A  2828    	POP	IX
0409E8 C9                  A  2829    	RET	
                           A  2830    
                           A  2831    
                           A  2832    ;**************************** _vdp_spriteNextFr
                           A  2833    ;Name                         Addr/Register   S
                           A  2834    ;_putch                              IMPORT  --
                           A  2835    
                           A  2836    
                           A  2837    ; Stack Frame Size: 6 (bytes)
                           A  2838    ;       Spill Code: 0 (instruction)
                           A  2839    
                           A  2840    
                           A  2841    .ENDFUNC "vdp_spriteNextFrameSelected",263,"_vd
                           A  2842    ;  264	
                           A  2843    ;  265	void vdp_spriteNextFrame(UINT8 id)
                           A  2844    ;  266	{
0409E9                     A  2845    _vdp_spriteNextFrame:
                           A  2846    .DEFINE "_vdp_spriteNextFrame"
                           A  2847    
                           A  2848    .VALUE _vdp_spriteNextFrame
                           A  2849    
                           A  2850    .CLASS 2
                           A  2851    
                           A  2852    .TYPE 65
                           A  2853    
                           A  2854    .ENDEF
                           A  2855    
                           A  2856    .BEGFUNC "vdp_spriteNextFrame",266,"_vdp_sprite
                           A  2857    
                           A  2858    .LINE 266
                           A  2859    
                           A  2860    .DEFINE "id"
                           A  2861    
                           A  2862    .CLASS 65
                           A  2863    
                           A  2864    .VALUE 6
                           A  2865    
                           A  2866    .TYPE 12
                           A  2867    
                           A  2868    .ENDEF
                           A  2869    
0409E9 DDE5                A  2870    	PUSH	IX
0409EB DD210000 00         A  2871    	LD	IX,0
0409F0 DD39                A  2872    	ADD	IX,SP
                           A  2873    ;  267		vdp_spriteSelect(id);
                           A  2874    .LINE 267
                           A  2875    
0409F2 DD4E06              A  2876    	LD	C,(IX+%6)
0409F5 0600                A  2877    	LD	B,%0
0409F7 C5                  A  2878    	PUSH	BC
0409F8 CD DE 08 04         A  2879    	CALL	_vdp_spriteSelect
0409FC C1                  A  2880    	POP	BC
                           A  2881    ;  268		vdp_spriteNextFrameSelected();
                           A  2882    .LINE 268
                           A  2883    
0409FD CD BD 09 04         A  2884    	CALL	_vdp_spriteNextFrameSelected
                           A  2885    ;  269		return;
                           A  2886    ;  270	}
                           A  2887    .LINE 270
                           A  2888    
040A01 DDF9                A  2889    	LD	SP,IX
040A03 DDE1                A  2890    	POP	IX
040A05 C9                  A  2891    	RET	
                           A  2892    
                           A  2893    
                           A  2894    ;**************************** _vdp_spriteNextFr
                           A  2895    ;Name                         Addr/Register   S
                           A  2896    ;id                                    IX+6    
                           A  2897    
                           A  2898    
                           A  2899    ; Stack Frame Size: 9 (bytes)
                           A  2900    ;       Spill Code: 0 (instruction)
                           A  2901    
                           A  2902    
                           A  2903    .ENDFUNC "vdp_spriteNextFrame",270,"_vdp_sprite
                           A  2904    ;  271	
                           A  2905    ;  272	void vdp_spritePreviousFrameSelected(vo
                           A  2906    ;  273	{
040A06                     A  2907    _vdp_spritePreviousFrameSelected:
                           A  2908    .DEFINE "_vdp_spritePreviousFrameSelected"
                           A  2909    
                           A  2910    .VALUE _vdp_spritePreviousFrameSelected
                           A  2911    
                           A  2912    .CLASS 2
                           A  2913    
                           A  2914    .TYPE 65
                           A  2915    
                           A  2916    .ENDEF
                           A  2917    
                           A  2918    .BEGFUNC "vdp_spritePreviousFrameSelected",273,
                           A  2919    
040A06 DDE5                A  2920    	PUSH	IX
040A08 DD210000 00         A  2921    	LD	IX,0
040A0D DD39                A  2922    	ADD	IX,SP
                           A  2923    ;  274		putch(23); // vdu_sys
                           A  2924    .LINE 274
                           A  2925    
040A0F 01170000            A  2926    	LD	BC,23
040A13 C5                  A  2927    	PUSH	BC
040A14 CD 28 0E 04         A  2928    	CALL	_putch
040A18 C1                  A  2929    	POP	BC
                           A  2930    ;  275		putch(27); // sprite command
                           A  2931    .LINE 275
                           A  2932    
040A19 011B0000            A  2933    	LD	BC,27
040A1D C5                  A  2934    	PUSH	BC
040A1E CD 28 0E 04         A  2935    	CALL	_putch
040A22 C1                  A  2936    	POP	BC
                           A  2937    ;  276		putch(9); // previous frame
                           A  2938    .LINE 276
                           A  2939    
040A23 01090000            A  2940    	LD	BC,9
040A27 C5                  A  2941    	PUSH	BC
040A28 CD 28 0E 04         A  2942    	CALL	_putch
040A2C C1                  A  2943    	POP	BC
                           A  2944    ;  277		return;	
                           A  2945    ;  278	}
                           A  2946    .LINE 278
                           A  2947    
040A2D DDF9                A  2948    	LD	SP,IX
040A2F DDE1                A  2949    	POP	IX
040A31 C9                  A  2950    	RET	
                           A  2951    
                           A  2952    
                           A  2953    ;**************************** _vdp_spritePrevio
                           A  2954    ;Name                         Addr/Register   S
                           A  2955    ;_putch                              IMPORT  --
                           A  2956    
                           A  2957    
                           A  2958    ; Stack Frame Size: 6 (bytes)
                           A  2959    ;       Spill Code: 0 (instruction)
                           A  2960    
                           A  2961    
                           A  2962    .ENDFUNC "vdp_spritePreviousFrameSelected",278,
                           A  2963    ;  279	
                           A  2964    ;  280	void vdp_spritePreviousFrame(UINT8 id)
                           A  2965    ;  281	{
040A32                     A  2966    _vdp_spritePreviousFrame:
                           A  2967    .DEFINE "_vdp_spritePreviousFrame"
                           A  2968    
                           A  2969    .VALUE _vdp_spritePreviousFrame
                           A  2970    
                           A  2971    .CLASS 2
                           A  2972    
                           A  2973    .TYPE 65
                           A  2974    
                           A  2975    .ENDEF
                           A  2976    
                           A  2977    .BEGFUNC "vdp_spritePreviousFrame",281,"_vdp_sp
                           A  2978    
                           A  2979    .LINE 281
                           A  2980    
                           A  2981    .DEFINE "id"
                           A  2982    
                           A  2983    .CLASS 65
                           A  2984    
                           A  2985    .VALUE 6
                           A  2986    
                           A  2987    .TYPE 12
                           A  2988    
                           A  2989    .ENDEF
                           A  2990    
040A32 DDE5                A  2991    	PUSH	IX
040A34 DD210000 00         A  2992    	LD	IX,0
040A39 DD39                A  2993    	ADD	IX,SP
                           A  2994    ;  282		vdp_spriteSelect(id);
                           A  2995    .LINE 282
                           A  2996    
040A3B DD4E06              A  2997    	LD	C,(IX+%6)
040A3E 0600                A  2998    	LD	B,%0
040A40 C5                  A  2999    	PUSH	BC
040A41 CD DE 08 04         A  3000    	CALL	_vdp_spriteSelect
040A45 C1                  A  3001    	POP	BC
                           A  3002    ;  283		vdp_spritePreviousFrameSelected();
                           A  3003    .LINE 283
                           A  3004    
040A46 CD 06 0A 04         A  3005    	CALL	_vdp_spritePreviousFrameSelected
                           A  3006    ;  284		return;
                           A  3007    ;  285	}
                           A  3008    .LINE 285
                           A  3009    
040A4A DDF9                A  3010    	LD	SP,IX
040A4C DDE1                A  3011    	POP	IX
040A4E C9                  A  3012    	RET	
                           A  3013    
                           A  3014    
                           A  3015    ;**************************** _vdp_spritePrevio
                           A  3016    ;Name                         Addr/Register   S
                           A  3017    ;id                                    IX+6    
                           A  3018    
                           A  3019    
                           A  3020    ; Stack Frame Size: 9 (bytes)
                           A  3021    ;       Spill Code: 0 (instruction)
                           A  3022    
                           A  3023    
                           A  3024    .ENDFUNC "vdp_spritePreviousFrame",285,"_vdp_sp
                           A  3025    ;  286	
                           A  3026    ;  287	void vdp_spriteSetFrameSelected(UINT8 f
                           A  3027    ;  288	{
040A4F                     A  3028    _vdp_spriteSetFrameSelected:
                           A  3029    .DEFINE "_vdp_spriteSetFrameSelected"
                           A  3030    
                           A  3031    .VALUE _vdp_spriteSetFrameSelected
                           A  3032    
                           A  3033    .CLASS 2
                           A  3034    
                           A  3035    .TYPE 65
                           A  3036    
                           A  3037    .ENDEF
                           A  3038    
                           A  3039    .BEGFUNC "vdp_spriteSetFrameSelected",288,"_vdp
                           A  3040    
                           A  3041    .LINE 288
                           A  3042    
                           A  3043    .DEFINE "framenumber"
                           A  3044    
                           A  3045    .CLASS 65
                           A  3046    
                           A  3047    .VALUE 6
                           A  3048    
                           A  3049    .TYPE 12
                           A  3050    
                           A  3051    .ENDEF
                           A  3052    
040A4F DDE5                A  3053    	PUSH	IX
040A51 DD210000 00         A  3054    	LD	IX,0
040A56 DD39                A  3055    	ADD	IX,SP
                           A  3056    ;  289		putch(23); // vdu_sys
                           A  3057    .LINE 289
                           A  3058    
040A58 01170000            A  3059    	LD	BC,23
040A5C C5                  A  3060    	PUSH	BC
040A5D CD 28 0E 04         A  3061    	CALL	_putch
040A61 C1                  A  3062    	POP	BC
                           A  3063    ;  290		putch(27); // sprite command
                           A  3064    .LINE 290
                           A  3065    
040A62 011B0000            A  3066    	LD	BC,27
040A66 C5                  A  3067    	PUSH	BC
040A67 CD 28 0E 04         A  3068    	CALL	_putch
040A6B C1                  A  3069    	POP	BC
                           A  3070    ;  291		putch(10); // set current frame
                           A  3071    .LINE 291
                           A  3072    
040A6C 010A0000            A  3073    	LD	BC,10
040A70 C5                  A  3074    	PUSH	BC
040A71 CD 28 0E 04         A  3075    	CALL	_putch
040A75 C1                  A  3076    	POP	BC
                           A  3077    ;  292		putch(framenumber);
                           A  3078    .LINE 292
                           A  3079    
040A76 DD7E06              A  3080    	LD	A,(IX+%6)
040A79 B7ED62              A  3081    	UEXT	HL
040A7C 6F                  A  3082    	LD	L,A
040A7D E5                  A  3083    	PUSH	HL
040A7E CD 28 0E 04         A  3084    	CALL	_putch
040A82 C1                  A  3085    	POP	BC
                           A  3086    ;  293		return;	
                           A  3087    ;  294	}
                           A  3088    .LINE 294
                           A  3089    
040A83 DDF9                A  3090    	LD	SP,IX
040A85 DDE1                A  3091    	POP	IX
040A87 C9                  A  3092    	RET	
                           A  3093    
                           A  3094    
                           A  3095    ;**************************** _vdp_spriteSetFra
                           A  3096    ;Name                         Addr/Register   S
                           A  3097    ;_putch                              IMPORT  --
                           A  3098    ;framenumber                           IX+6    
                           A  3099    
                           A  3100    
                           A  3101    ; Stack Frame Size: 9 (bytes)
                           A  3102    ;       Spill Code: 0 (instruction)
                           A  3103    
                           A  3104    
                           A  3105    .ENDFUNC "vdp_spriteSetFrameSelected",294,"_vdp
                           A  3106    ;  295	
                           A  3107    ;  296	void vdp_spriteSetFrame(UINT8 id, UINT8
                           A  3108    ;  297	{
040A88                     A  3109    _vdp_spriteSetFrame:
                           A  3110    .DEFINE "_vdp_spriteSetFrame"
                           A  3111    
                           A  3112    .VALUE _vdp_spriteSetFrame
                           A  3113    
                           A  3114    .CLASS 2
                           A  3115    
                           A  3116    .TYPE 65
                           A  3117    
                           A  3118    .ENDEF
                           A  3119    
                           A  3120    .BEGFUNC "vdp_spriteSetFrame",297,"_vdp_spriteS
                           A  3121    
                           A  3122    .LINE 297
                           A  3123    
                           A  3124    .DEFINE "id"
                           A  3125    
                           A  3126    .CLASS 65
                           A  3127    
                           A  3128    .VALUE 6
                           A  3129    
                           A  3130    .TYPE 12
                           A  3131    
                           A  3132    .ENDEF
                           A  3133    
                           A  3134    .DEFINE "framenumber"
                           A  3135    
                           A  3136    .CLASS 65
                           A  3137    
                           A  3138    .VALUE 9
                           A  3139    
                           A  3140    .TYPE 12
                           A  3141    
                           A  3142    .ENDEF
                           A  3143    
040A88 DDE5                A  3144    	PUSH	IX
040A8A DD210000 00         A  3145    	LD	IX,0
040A8F DD39                A  3146    	ADD	IX,SP
                           A  3147    ;  298		vdp_spriteSelect(id);
                           A  3148    .LINE 298
                           A  3149    
040A91 DD4E06              A  3150    	LD	C,(IX+%6)
040A94 0600                A  3151    	LD	B,%0
040A96 C5                  A  3152    	PUSH	BC
040A97 CD DE 08 04         A  3153    	CALL	_vdp_spriteSelect
040A9B C1                  A  3154    	POP	BC
                           A  3155    ;  299		vdp_spriteNextFrameSelected();
                           A  3156    .LINE 299
                           A  3157    
040A9C CD BD 09 04         A  3158    	CALL	_vdp_spriteNextFrameSelected
                           A  3159    ;  300		return;
                           A  3160    ;  301	}
                           A  3161    .LINE 301
                           A  3162    
040AA0 DDF9                A  3163    	LD	SP,IX
040AA2 DDE1                A  3164    	POP	IX
040AA4 C9                  A  3165    	RET	
                           A  3166    
                           A  3167    
                           A  3168    ;**************************** _vdp_spriteSetFra
                           A  3169    ;Name                         Addr/Register   S
                           A  3170    ;framenumber                           IX+9    
                           A  3171    ;id                                    IX+6    
                           A  3172    
                           A  3173    
                           A  3174    ; Stack Frame Size: 12 (bytes)
                           A  3175    ;       Spill Code: 0 (instruction)
                           A  3176    
                           A  3177    
                           A  3178    .ENDFUNC "vdp_spriteSetFrame",301,"_vdp_spriteS
                           A  3179    ;  302	
                           A  3180    ;  303	void vdp_spriteShowSelected(void)
                           A  3181    ;  304	{
040AA5                     A  3182    _vdp_spriteShowSelected:
                           A  3183    .DEFINE "_vdp_spriteShowSelected"
                           A  3184    
                           A  3185    .VALUE _vdp_spriteShowSelected
                           A  3186    
                           A  3187    .CLASS 2
                           A  3188    
                           A  3189    .TYPE 65
                           A  3190    
                           A  3191    .ENDEF
                           A  3192    
                           A  3193    .BEGFUNC "vdp_spriteShowSelected",304,"_vdp_spr
                           A  3194    
040AA5 DDE5                A  3195    	PUSH	IX
040AA7 DD210000 00         A  3196    	LD	IX,0
040AAC DD39                A  3197    	ADD	IX,SP
                           A  3198    ;  305		putch(23); // vdu_sys
                           A  3199    .LINE 305
                           A  3200    
040AAE 01170000            A  3201    	LD	BC,23
040AB2 C5                  A  3202    	PUSH	BC
040AB3 CD 28 0E 04         A  3203    	CALL	_putch
040AB7 C1                  A  3204    	POP	BC
                           A  3205    ;  306		putch(27); // sprite command
                           A  3206    .LINE 306
                           A  3207    
040AB8 011B0000            A  3208    	LD	BC,27
040ABC C5                  A  3209    	PUSH	BC
040ABD CD 28 0E 04         A  3210    	CALL	_putch
040AC1 C1                  A  3211    	POP	BC
                           A  3212    ;  307		putch(11); // show sprite
                           A  3213    .LINE 307
                           A  3214    
040AC2 010B0000            A  3215    	LD	BC,11
040AC6 C5                  A  3216    	PUSH	BC
040AC7 CD 28 0E 04         A  3217    	CALL	_putch
040ACB C1                  A  3218    	POP	BC
                           A  3219    ;  308		return;			
                           A  3220    ;  309	}
                           A  3221    .LINE 309
                           A  3222    
040ACC DDF9                A  3223    	LD	SP,IX
040ACE DDE1                A  3224    	POP	IX
040AD0 C9                  A  3225    	RET	
                           A  3226    
                           A  3227    
                           A  3228    ;**************************** _vdp_spriteShowSe
                           A  3229    ;Name                         Addr/Register   S
                           A  3230    ;_putch                              IMPORT  --
                           A  3231    
                           A  3232    
                           A  3233    ; Stack Frame Size: 6 (bytes)
                           A  3234    ;       Spill Code: 0 (instruction)
                           A  3235    
                           A  3236    
                           A  3237    .ENDFUNC "vdp_spriteShowSelected",309,"_vdp_spr
                           A  3238    ;  310	
                           A  3239    ;  311	void vdp_spriteShow(UINT8 id)
                           A  3240    ;  312	{
040AD1                     A  3241    _vdp_spriteShow:
                           A  3242    .DEFINE "_vdp_spriteShow"
                           A  3243    
                           A  3244    .VALUE _vdp_spriteShow
                           A  3245    
                           A  3246    .CLASS 2
                           A  3247    
                           A  3248    .TYPE 65
                           A  3249    
                           A  3250    .ENDEF
                           A  3251    
                           A  3252    .BEGFUNC "vdp_spriteShow",312,"_vdp_spriteShow"
                           A  3253    
                           A  3254    .LINE 312
                           A  3255    
                           A  3256    .DEFINE "id"
                           A  3257    
                           A  3258    .CLASS 65
                           A  3259    
                           A  3260    .VALUE 6
                           A  3261    
                           A  3262    .TYPE 12
                           A  3263    
                           A  3264    .ENDEF
                           A  3265    
040AD1 DDE5                A  3266    	PUSH	IX
040AD3 DD210000 00         A  3267    	LD	IX,0
040AD8 DD39                A  3268    	ADD	IX,SP
                           A  3269    ;  313		vdp_spriteSelect(id);
                           A  3270    .LINE 313
                           A  3271    
040ADA DD4E06              A  3272    	LD	C,(IX+%6)
040ADD 0600                A  3273    	LD	B,%0
040ADF C5                  A  3274    	PUSH	BC
040AE0 CD DE 08 04         A  3275    	CALL	_vdp_spriteSelect
040AE4 C1                  A  3276    	POP	BC
                           A  3277    ;  314		vdp_spriteShowSelected();
                           A  3278    .LINE 314
                           A  3279    
040AE5 CD A5 0A 04         A  3280    	CALL	_vdp_spriteShowSelected
                           A  3281    ;  315		return;
                           A  3282    ;  316	}
                           A  3283    .LINE 316
                           A  3284    
040AE9 DDF9                A  3285    	LD	SP,IX
040AEB DDE1                A  3286    	POP	IX
040AED C9                  A  3287    	RET	
                           A  3288    
                           A  3289    
                           A  3290    ;**************************** _vdp_spriteShow *
                           A  3291    ;Name                         Addr/Register   S
                           A  3292    ;id                                    IX+6    
                           A  3293    
                           A  3294    
                           A  3295    ; Stack Frame Size: 9 (bytes)
                           A  3296    ;       Spill Code: 0 (instruction)
                           A  3297    
                           A  3298    
                           A  3299    .ENDFUNC "vdp_spriteShow",316,"_vdp_spriteShow"
                           A  3300    ;  317	
                           A  3301    ;  318	void vdp_spriteHideSelected(void)
                           A  3302    ;  319	{
040AEE                     A  3303    _vdp_spriteHideSelected:
                           A  3304    .DEFINE "_vdp_spriteHideSelected"
                           A  3305    
                           A  3306    .VALUE _vdp_spriteHideSelected
                           A  3307    
                           A  3308    .CLASS 2
                           A  3309    
                           A  3310    .TYPE 65
                           A  3311    
                           A  3312    .ENDEF
                           A  3313    
                           A  3314    .BEGFUNC "vdp_spriteHideSelected",319,"_vdp_spr
                           A  3315    
040AEE DDE5                A  3316    	PUSH	IX
040AF0 DD210000 00         A  3317    	LD	IX,0
040AF5 DD39                A  3318    	ADD	IX,SP
                           A  3319    ;  320		putch(23); // vdu_sys
                           A  3320    .LINE 320
                           A  3321    
040AF7 01170000            A  3322    	LD	BC,23
040AFB C5                  A  3323    	PUSH	BC
040AFC CD 28 0E 04         A  3324    	CALL	_putch
040B00 C1                  A  3325    	POP	BC
                           A  3326    ;  321		putch(27); // sprite command
                           A  3327    .LINE 321
                           A  3328    
040B01 011B0000            A  3329    	LD	BC,27
040B05 C5                  A  3330    	PUSH	BC
040B06 CD 28 0E 04         A  3331    	CALL	_putch
040B0A C1                  A  3332    	POP	BC
                           A  3333    ;  322		putch(12); // hide sprite
                           A  3334    .LINE 322
                           A  3335    
040B0B 010C0000            A  3336    	LD	BC,12
040B0F C5                  A  3337    	PUSH	BC
040B10 CD 28 0E 04         A  3338    	CALL	_putch
040B14 C1                  A  3339    	POP	BC
                           A  3340    ;  323		return;		
                           A  3341    ;  324	}
                           A  3342    .LINE 324
                           A  3343    
040B15 DDF9                A  3344    	LD	SP,IX
040B17 DDE1                A  3345    	POP	IX
040B19 C9                  A  3346    	RET	
                           A  3347    
                           A  3348    
                           A  3349    ;**************************** _vdp_spriteHideSe
                           A  3350    ;Name                         Addr/Register   S
                           A  3351    ;_putch                              IMPORT  --
                           A  3352    
                           A  3353    
                           A  3354    ; Stack Frame Size: 6 (bytes)
                           A  3355    ;       Spill Code: 0 (instruction)
                           A  3356    
                           A  3357    
                           A  3358    .ENDFUNC "vdp_spriteHideSelected",324,"_vdp_spr
                           A  3359    ;  325	
                           A  3360    ;  326	void vdp_spriteHide(UINT8 id)
                           A  3361    ;  327	{
040B1A                     A  3362    _vdp_spriteHide:
                           A  3363    .DEFINE "_vdp_spriteHide"
                           A  3364    
                           A  3365    .VALUE _vdp_spriteHide
                           A  3366    
                           A  3367    .CLASS 2
                           A  3368    
                           A  3369    .TYPE 65
                           A  3370    
                           A  3371    .ENDEF
                           A  3372    
                           A  3373    .BEGFUNC "vdp_spriteHide",327,"_vdp_spriteHide"
                           A  3374    
                           A  3375    .LINE 327
                           A  3376    
                           A  3377    .DEFINE "id"
                           A  3378    
                           A  3379    .CLASS 65
                           A  3380    
                           A  3381    .VALUE 6
                           A  3382    
                           A  3383    .TYPE 12
                           A  3384    
                           A  3385    .ENDEF
                           A  3386    
040B1A DDE5                A  3387    	PUSH	IX
040B1C DD210000 00         A  3388    	LD	IX,0
040B21 DD39                A  3389    	ADD	IX,SP
                           A  3390    ;  328		vdp_spriteSelect(id);
                           A  3391    .LINE 328
                           A  3392    
040B23 DD4E06              A  3393    	LD	C,(IX+%6)
040B26 0600                A  3394    	LD	B,%0
040B28 C5                  A  3395    	PUSH	BC
040B29 CD DE 08 04         A  3396    	CALL	_vdp_spriteSelect
040B2D C1                  A  3397    	POP	BC
                           A  3398    ;  329		vdp_spriteHideSelected();
                           A  3399    .LINE 329
                           A  3400    
040B2E CD EE 0A 04         A  3401    	CALL	_vdp_spriteHideSelected
                           A  3402    ;  330		return;
                           A  3403    ;  331	}
                           A  3404    .LINE 331
                           A  3405    
040B32 DDF9                A  3406    	LD	SP,IX
040B34 DDE1                A  3407    	POP	IX
040B36 C9                  A  3408    	RET	
                           A  3409    
                           A  3410    
                           A  3411    ;**************************** _vdp_spriteHide *
                           A  3412    ;Name                         Addr/Register   S
                           A  3413    ;id                                    IX+6    
                           A  3414    
                           A  3415    
                           A  3416    ; Stack Frame Size: 9 (bytes)
                           A  3417    ;       Spill Code: 0 (instruction)
                           A  3418    
                           A  3419    
                           A  3420    .ENDFUNC "vdp_spriteHide",331,"_vdp_spriteHide"
                           A  3421    ;  332	
                           A  3422    ;  333	void vdp_spriteMoveToSelected(UINT16 x,
                           A  3423    ;  334	{
040B37                     A  3424    _vdp_spriteMoveToSelected:
                           A  3425    .DEFINE "_vdp_spriteMoveToSelected"
                           A  3426    
                           A  3427    .VALUE _vdp_spriteMoveToSelected
                           A  3428    
                           A  3429    .CLASS 2
                           A  3430    
                           A  3431    .TYPE 65
                           A  3432    
                           A  3433    .ENDEF
                           A  3434    
                           A  3435    .BEGFUNC "vdp_spriteMoveToSelected",334,"_vdp_s
                           A  3436    
                           A  3437    .LINE 334
                           A  3438    
                           A  3439    .DEFINE "x"
                           A  3440    
                           A  3441    .CLASS 65
                           A  3442    
                           A  3443    .VALUE 6
                           A  3444    
                           A  3445    .TYPE 13
                           A  3446    
                           A  3447    .ENDEF
                           A  3448    
                           A  3449    .DEFINE "y"
                           A  3450    
                           A  3451    .CLASS 65
                           A  3452    
                           A  3453    .VALUE 9
                           A  3454    
                           A  3455    .TYPE 13
                           A  3456    
                           A  3457    .ENDEF
                           A  3458    
040B37 DDE5                A  3459    	PUSH	IX
040B39 DD210000 00         A  3460    	LD	IX,0
040B3E DD39                A  3461    	ADD	IX,SP
                           A  3462    ;  335		putch(23); // vdu_sys
                           A  3463    .LINE 335
                           A  3464    
040B40 01170000            A  3465    	LD	BC,23
040B44 C5                  A  3466    	PUSH	BC
040B45 CD 28 0E 04         A  3467    	CALL	_putch
040B49 C1                  A  3468    	POP	BC
                           A  3469    ;  336		putch(27); // sprite command
                           A  3470    .LINE 336
                           A  3471    
040B4A 011B0000            A  3472    	LD	BC,27
040B4E C5                  A  3473    	PUSH	BC
040B4F CD 28 0E 04         A  3474    	CALL	_putch
040B53 C1                  A  3475    	POP	BC
                           A  3476    ;  337		putch(13); // move to
                           A  3477    .LINE 337
                           A  3478    
040B54 010D0000            A  3479    	LD	BC,13
040B58 C5                  A  3480    	PUSH	BC
040B59 CD 28 0E 04         A  3481    	CALL	_putch
040B5D C1                  A  3482    	POP	BC
                           A  3483    ;  338		write16bit(x);
                           A  3484    .LINE 338
                           A  3485    
040B5E DD0706              A  3486    	LD	BC,(IX+%6)
040B61 C5                  A  3487    	PUSH	BC
040B62 CD 01 03 04         A  3488    	CALL	_write16bit
040B66 C1                  A  3489    	POP	BC
                           A  3490    ;  339		write16bit(y);
                           A  3491    .LINE 339
                           A  3492    
040B67 DD0709              A  3493    	LD	BC,(IX+%9)
040B6A C5                  A  3494    	PUSH	BC
040B6B CD 01 03 04         A  3495    	CALL	_write16bit
040B6F C1                  A  3496    	POP	BC
                           A  3497    ;  340		return;	
                           A  3498    ;  341	}
                           A  3499    .LINE 341
                           A  3500    
040B70 DDF9                A  3501    	LD	SP,IX
040B72 DDE1                A  3502    	POP	IX
040B74 C9                  A  3503    	RET	
                           A  3504    
                           A  3505    
                           A  3506    ;**************************** _vdp_spriteMoveTo
                           A  3507    ;Name                         Addr/Register   S
                           A  3508    ;_putch                              IMPORT  --
                           A  3509    ;y                                     IX+9    
                           A  3510    ;x                                     IX+6    
                           A  3511    
                           A  3512    
                           A  3513    ; Stack Frame Size: 12 (bytes)
                           A  3514    ;       Spill Code: 0 (instruction)
                           A  3515    
                           A  3516    
                           A  3517    .ENDFUNC "vdp_spriteMoveToSelected",341,"_vdp_s
                           A  3518    ;  342	
                           A  3519    ;  343	void vdp_spriteMoveTo(UINT8 id, UINT16 
                           A  3520    ;  344	{
040B75                     A  3521    _vdp_spriteMoveTo:
                           A  3522    .DEFINE "_vdp_spriteMoveTo"
                           A  3523    
                           A  3524    .VALUE _vdp_spriteMoveTo
                           A  3525    
                           A  3526    .CLASS 2
                           A  3527    
                           A  3528    .TYPE 65
                           A  3529    
                           A  3530    .ENDEF
                           A  3531    
                           A  3532    .BEGFUNC "vdp_spriteMoveTo",344,"_vdp_spriteMov
                           A  3533    
                           A  3534    .LINE 344
                           A  3535    
                           A  3536    .DEFINE "id"
                           A  3537    
                           A  3538    .CLASS 65
                           A  3539    
                           A  3540    .VALUE 6
                           A  3541    
                           A  3542    .TYPE 12
                           A  3543    
                           A  3544    .ENDEF
                           A  3545    
                           A  3546    .DEFINE "x"
                           A  3547    
                           A  3548    .CLASS 65
                           A  3549    
                           A  3550    .VALUE 9
                           A  3551    
                           A  3552    .TYPE 13
                           A  3553    
                           A  3554    .ENDEF
                           A  3555    
                           A  3556    .DEFINE "y"
                           A  3557    
                           A  3558    .CLASS 65
                           A  3559    
                           A  3560    .VALUE 12
                           A  3561    
                           A  3562    .TYPE 13
                           A  3563    
                           A  3564    .ENDEF
                           A  3565    
040B75 DDE5                A  3566    	PUSH	IX
040B77 DD210000 00         A  3567    	LD	IX,0
040B7C DD39                A  3568    	ADD	IX,SP
                           A  3569    ;  345		vdp_spriteSelect(id);
                           A  3570    .LINE 345
                           A  3571    
040B7E DD4E06              A  3572    	LD	C,(IX+%6)
040B81 0600                A  3573    	LD	B,%0
040B83 C5                  A  3574    	PUSH	BC
040B84 CD DE 08 04         A  3575    	CALL	_vdp_spriteSelect
040B88 C1                  A  3576    	POP	BC
                           A  3577    ;  346		vdp_spriteMoveToSelected(x,y);
                           A  3578    .LINE 346
                           A  3579    
040B89 DD070C              A  3580    	LD	BC,(IX+%C)
040B8C C5                  A  3581    	PUSH	BC
040B8D DD0709              A  3582    	LD	BC,(IX+%9)
040B90 C5                  A  3583    	PUSH	BC
040B91 CD 37 0B 04         A  3584    	CALL	_vdp_spriteMoveToSelected
040B95 C1                  A  3585    	POP	BC
040B96 C1                  A  3586    	POP	BC
                           A  3587    ;  347		return;
                           A  3588    ;  348	}
                           A  3589    .LINE 348
                           A  3590    
040B97 DDF9                A  3591    	LD	SP,IX
040B99 DDE1                A  3592    	POP	IX
040B9B C9                  A  3593    	RET	
                           A  3594    
                           A  3595    
                           A  3596    ;**************************** _vdp_spriteMoveTo
                           A  3597    ;Name                         Addr/Register   S
                           A  3598    ;y                                    IX+12    
                           A  3599    ;x                                     IX+9    
                           A  3600    ;id                                    IX+6    
                           A  3601    
                           A  3602    
                           A  3603    ; Stack Frame Size: 15 (bytes)
                           A  3604    ;       Spill Code: 0 (instruction)
                           A  3605    
                           A  3606    
                           A  3607    .ENDFUNC "vdp_spriteMoveTo",348,"_vdp_spriteMov
                           A  3608    ;  349	
                           A  3609    ;  350	void vdp_spriteMoveBySelected(UINT16 x,
                           A  3610    ;  351	{
040B9C                     A  3611    _vdp_spriteMoveBySelected:
                           A  3612    .DEFINE "_vdp_spriteMoveBySelected"
                           A  3613    
                           A  3614    .VALUE _vdp_spriteMoveBySelected
                           A  3615    
                           A  3616    .CLASS 2
                           A  3617    
                           A  3618    .TYPE 65
                           A  3619    
                           A  3620    .ENDEF
                           A  3621    
                           A  3622    .BEGFUNC "vdp_spriteMoveBySelected",351,"_vdp_s
                           A  3623    
                           A  3624    .LINE 351
                           A  3625    
                           A  3626    .DEFINE "x"
                           A  3627    
                           A  3628    .CLASS 65
                           A  3629    
                           A  3630    .VALUE 6
                           A  3631    
                           A  3632    .TYPE 13
                           A  3633    
                           A  3634    .ENDEF
                           A  3635    
                           A  3636    .DEFINE "y"
                           A  3637    
                           A  3638    .CLASS 65
                           A  3639    
                           A  3640    .VALUE 9
                           A  3641    
                           A  3642    .TYPE 13
                           A  3643    
                           A  3644    .ENDEF
                           A  3645    
040B9C DDE5                A  3646    	PUSH	IX
040B9E DD210000 00         A  3647    	LD	IX,0
040BA3 DD39                A  3648    	ADD	IX,SP
                           A  3649    ;  352		putch(23); // vdu_sys
                           A  3650    .LINE 352
                           A  3651    
040BA5 01170000            A  3652    	LD	BC,23
040BA9 C5                  A  3653    	PUSH	BC
040BAA CD 28 0E 04         A  3654    	CALL	_putch
040BAE C1                  A  3655    	POP	BC
                           A  3656    ;  353		putch(27); // sprite command
                           A  3657    .LINE 353
                           A  3658    
040BAF 011B0000            A  3659    	LD	BC,27
040BB3 C5                  A  3660    	PUSH	BC
040BB4 CD 28 0E 04         A  3661    	CALL	_putch
040BB8 C1                  A  3662    	POP	BC
                           A  3663    ;  354		putch(14); // move by
                           A  3664    .LINE 354
                           A  3665    
040BB9 010E0000            A  3666    	LD	BC,14
040BBD C5                  A  3667    	PUSH	BC
040BBE CD 28 0E 04         A  3668    	CALL	_putch
040BC2 C1                  A  3669    	POP	BC
                           A  3670    ;  355		write16bit(x);
                           A  3671    .LINE 355
                           A  3672    
040BC3 DD0706              A  3673    	LD	BC,(IX+%6)
040BC6 C5                  A  3674    	PUSH	BC
040BC7 CD 01 03 04         A  3675    	CALL	_write16bit
040BCB C1                  A  3676    	POP	BC
                           A  3677    ;  356		write16bit(y);
                           A  3678    .LINE 356
                           A  3679    
040BCC DD0709              A  3680    	LD	BC,(IX+%9)
040BCF C5                  A  3681    	PUSH	BC
040BD0 CD 01 03 04         A  3682    	CALL	_write16bit
040BD4 C1                  A  3683    	POP	BC
                           A  3684    ;  357		return;	
                           A  3685    ;  358	}
                           A  3686    .LINE 358
                           A  3687    
040BD5 DDF9                A  3688    	LD	SP,IX
040BD7 DDE1                A  3689    	POP	IX
040BD9 C9                  A  3690    	RET	
                           A  3691    
                           A  3692    
                           A  3693    ;**************************** _vdp_spriteMoveBy
                           A  3694    ;Name                         Addr/Register   S
                           A  3695    ;_putch                              IMPORT  --
                           A  3696    ;y                                     IX+9    
                           A  3697    ;x                                     IX+6    
                           A  3698    
                           A  3699    
                           A  3700    ; Stack Frame Size: 12 (bytes)
                           A  3701    ;       Spill Code: 0 (instruction)
                           A  3702    
                           A  3703    
                           A  3704    .ENDFUNC "vdp_spriteMoveBySelected",358,"_vdp_s
                           A  3705    ;  359	
                           A  3706    ;  360	void vdp_spriteMoveBy(UINT8 id, UINT16 
                           A  3707    ;  361	{
040BDA                     A  3708    _vdp_spriteMoveBy:
                           A  3709    .DEFINE "_vdp_spriteMoveBy"
                           A  3710    
                           A  3711    .VALUE _vdp_spriteMoveBy
                           A  3712    
                           A  3713    .CLASS 2
                           A  3714    
                           A  3715    .TYPE 65
                           A  3716    
                           A  3717    .ENDEF
                           A  3718    
                           A  3719    .BEGFUNC "vdp_spriteMoveBy",361,"_vdp_spriteMov
                           A  3720    
                           A  3721    .LINE 361
                           A  3722    
                           A  3723    .DEFINE "id"
                           A  3724    
                           A  3725    .CLASS 65
                           A  3726    
                           A  3727    .VALUE 6
                           A  3728    
                           A  3729    .TYPE 12
                           A  3730    
                           A  3731    .ENDEF
                           A  3732    
                           A  3733    .DEFINE "x"
                           A  3734    
                           A  3735    .CLASS 65
                           A  3736    
                           A  3737    .VALUE 9
                           A  3738    
                           A  3739    .TYPE 13
                           A  3740    
                           A  3741    .ENDEF
                           A  3742    
                           A  3743    .DEFINE "y"
                           A  3744    
                           A  3745    .CLASS 65
                           A  3746    
                           A  3747    .VALUE 12
                           A  3748    
                           A  3749    .TYPE 13
                           A  3750    
                           A  3751    .ENDEF
                           A  3752    
040BDA DDE5                A  3753    	PUSH	IX
040BDC DD210000 00         A  3754    	LD	IX,0
040BE1 DD39                A  3755    	ADD	IX,SP
                           A  3756    ;  362		vdp_spriteSelect(id);
                           A  3757    .LINE 362
                           A  3758    
040BE3 DD4E06              A  3759    	LD	C,(IX+%6)
040BE6 0600                A  3760    	LD	B,%0
040BE8 C5                  A  3761    	PUSH	BC
040BE9 CD DE 08 04         A  3762    	CALL	_vdp_spriteSelect
040BED C1                  A  3763    	POP	BC
                           A  3764    ;  363		vdp_spriteMoveBySelected(x,y);
                           A  3765    .LINE 363
                           A  3766    
040BEE DD070C              A  3767    	LD	BC,(IX+%C)
040BF1 C5                  A  3768    	PUSH	BC
040BF2 DD0709              A  3769    	LD	BC,(IX+%9)
040BF5 C5                  A  3770    	PUSH	BC
040BF6 CD 9C 0B 04         A  3771    	CALL	_vdp_spriteMoveBySelected
040BFA C1                  A  3772    	POP	BC
040BFB C1                  A  3773    	POP	BC
                           A  3774    ;  364		return;
                           A  3775    ;  365	}
                           A  3776    .LINE 365
                           A  3777    
040BFC DDF9                A  3778    	LD	SP,IX
040BFE DDE1                A  3779    	POP	IX
040C00 C9                  A  3780    	RET	
                           A  3781    
                           A  3782    
                           A  3783    ;**************************** _vdp_spriteMoveBy
                           A  3784    ;Name                         Addr/Register   S
                           A  3785    ;y                                    IX+12    
                           A  3786    ;x                                     IX+9    
                           A  3787    ;id                                    IX+6    
                           A  3788    
                           A  3789    
                           A  3790    ; Stack Frame Size: 15 (bytes)
                           A  3791    ;       Spill Code: 0 (instruction)
                           A  3792    
                           A  3793    
                           A  3794    .ENDFUNC "vdp_spriteMoveBy",365,"_vdp_spriteMov
                           A  3795    ;  366	
                           A  3796    ;  367	void vdp_spriteActivateTotal(UINT8 numb
                           A  3797    ;  368	{
040C01                     A  3798    _vdp_spriteActivateTotal:
                           A  3799    .DEFINE "_vdp_spriteActivateTotal"
                           A  3800    
                           A  3801    .VALUE _vdp_spriteActivateTotal
                           A  3802    
                           A  3803    .CLASS 2
                           A  3804    
                           A  3805    .TYPE 65
                           A  3806    
                           A  3807    .ENDEF
                           A  3808    
                           A  3809    .BEGFUNC "vdp_spriteActivateTotal",368,"_vdp_sp
                           A  3810    
                           A  3811    .LINE 368
                           A  3812    
                           A  3813    .DEFINE "number"
                           A  3814    
                           A  3815    .CLASS 65
                           A  3816    
                           A  3817    .VALUE 6
                           A  3818    
                           A  3819    .TYPE 12
                           A  3820    
                           A  3821    .ENDEF
                           A  3822    
040C01 DDE5                A  3823    	PUSH	IX
040C03 DD210000 00         A  3824    	LD	IX,0
040C08 DD39                A  3825    	ADD	IX,SP
                           A  3826    ;  369		putch(23); // vdu_sys
                           A  3827    .LINE 369
                           A  3828    
040C0A 01170000            A  3829    	LD	BC,23
040C0E C5                  A  3830    	PUSH	BC
040C0F CD 28 0E 04         A  3831    	CALL	_putch
040C13 C1                  A  3832    	POP	BC
                           A  3833    ;  370		putch(27); // sprite command
                           A  3834    .LINE 370
                           A  3835    
040C14 011B0000            A  3836    	LD	BC,27
040C18 C5                  A  3837    	PUSH	BC
040C19 CD 28 0E 04         A  3838    	CALL	_putch
040C1D C1                  A  3839    	POP	BC
                           A  3840    ;  371		putch(7);  // set number of sprites
                           A  3841    .LINE 371
                           A  3842    
040C1E 01070000            A  3843    	LD	BC,7
040C22 C5                  A  3844    	PUSH	BC
040C23 CD 28 0E 04         A  3845    	CALL	_putch
040C27 C1                  A  3846    	POP	BC
                           A  3847    ;  372		putch(number);
                           A  3848    .LINE 372
                           A  3849    
040C28 DD7E06              A  3850    	LD	A,(IX+%6)
040C2B B7ED62              A  3851    	UEXT	HL
040C2E 6F                  A  3852    	LD	L,A
040C2F E5                  A  3853    	PUSH	HL
040C30 CD 28 0E 04         A  3854    	CALL	_putch
040C34 C1                  A  3855    	POP	BC
                           A  3856    ;  373		return;	
                           A  3857    ;  374	}
                           A  3858    .LINE 374
                           A  3859    
040C35 DDF9                A  3860    	LD	SP,IX
040C37 DDE1                A  3861    	POP	IX
040C39 C9                  A  3862    	RET	
                           A  3863    
                           A  3864    
                           A  3865    ;**************************** _vdp_spriteActiva
                           A  3866    ;Name                         Addr/Register   S
                           A  3867    ;_putch                              IMPORT  --
                           A  3868    ;number                                IX+6    
                           A  3869    
                           A  3870    
                           A  3871    ; Stack Frame Size: 9 (bytes)
                           A  3872    ;       Spill Code: 0 (instruction)
                           A  3873    
                           A  3874    
                           A  3875    .ENDFUNC "vdp_spriteActivateTotal",374,"_vdp_sp
                           A  3876    ;  375	
                           A  3877    ;  376	void vdp_spriteRefresh(void)
                           A  3878    ;  377	{
040C3A                     A  3879    _vdp_spriteRefresh:
                           A  3880    .DEFINE "_vdp_spriteRefresh"
                           A  3881    
                           A  3882    .VALUE _vdp_spriteRefresh
                           A  3883    
                           A  3884    .CLASS 2
                           A  3885    
                           A  3886    .TYPE 65
                           A  3887    
                           A  3888    .ENDEF
                           A  3889    
                           A  3890    .BEGFUNC "vdp_spriteRefresh",377,"_vdp_spriteRe
                           A  3891    
040C3A DDE5                A  3892    	PUSH	IX
040C3C DD210000 00         A  3893    	LD	IX,0
040C41 DD39                A  3894    	ADD	IX,SP
                           A  3895    ;  378		putch(23);	// vdu_sys
                           A  3896    .LINE 378
                           A  3897    
040C43 01170000            A  3898    	LD	BC,23
040C47 C5                  A  3899    	PUSH	BC
040C48 CD 28 0E 04         A  3900    	CALL	_putch
040C4C C1                  A  3901    	POP	BC
                           A  3902    ;  379		putch(27);	// sprite command
                           A  3903    .LINE 379
                           A  3904    
040C4D 011B0000            A  3905    	LD	BC,27
040C51 C5                  A  3906    	PUSH	BC
040C52 CD 28 0E 04         A  3907    	CALL	_putch
040C56 C1                  A  3908    	POP	BC
                           A  3909    ;  380		putch(15);	// refresh all sprites
                           A  3910    .LINE 380
                           A  3911    
040C57 010F0000            A  3912    	LD	BC,15
040C5B C5                  A  3913    	PUSH	BC
040C5C CD 28 0E 04         A  3914    	CALL	_putch
040C60 C1                  A  3915    	POP	BC
                           A  3916    ;  381		return;
                           A  3917    ;  382	}
                           A  3918    .LINE 382
                           A  3919    
040C61 DDF9                A  3920    	LD	SP,IX
040C63 DDE1                A  3921    	POP	IX
040C65 C9                  A  3922    	RET	
                           A  3923    
                           A  3924    
                           A  3925    ;**************************** _vdp_spriteRefres
                           A  3926    ;Name                         Addr/Register   S
                           A  3927    ;_putch                              IMPORT  --
                           A  3928    
                           A  3929    
                           A  3930    ; Stack Frame Size: 6 (bytes)
                           A  3931    ;       Spill Code: 0 (instruction)
                           A  3932    
                           A  3933    
                           A  3934    .ENDFUNC "vdp_spriteRefresh",382,"_vdp_spriteRe
                           A  3935    ;  383	
                           A  3936    ;  384	UINT8 vdp_cursorGetXpos(void)
                           A  3937    ;  385	{
040C66                     A  3938    _vdp_cursorGetXpos:
                           A  3939    .DEFINE "_vdp_cursorGetXpos"
                           A  3940    
                           A  3941    .VALUE _vdp_cursorGetXpos
                           A  3942    
                           A  3943    .CLASS 2
                           A  3944    
                           A  3945    .TYPE 76
                           A  3946    
                           A  3947    .ENDEF
                           A  3948    
                           A  3949    .BEGFUNC "vdp_cursorGetXpos",385,"_vdp_cursorGe
                           A  3950    
                           A  3951    .LINE 385
                           A  3952    
                           A  3953    .DEFINE "delay"
                           A  3954    
                           A  3955    .CLASS 65
                           A  3956    
                           A  3957    .VALUE -3
                           A  3958    
                           A  3959    .TYPE 14
                           A  3960    
                           A  3961    .ENDEF
                           A  3962    
040C66 DDE5                A  3963    	PUSH	IX
040C68 DD210000 00         A  3964    	LD	IX,0
040C6D DD39                A  3965    	ADD	IX,SP
040C6F C5                  A  3966    	PUSH	BC
                           A  3967    ;  386		unsigned int delay;
                           A  3968    ;  387		
                           A  3969    ;  388		putch(23);	// VDP command
                           A  3970    .LINE 388
                           A  3971    
040C70 01170000            A  3972    	LD	BC,23
040C74 C5                  A  3973    	PUSH	BC
040C75 CD 28 0E 04         A  3974    	CALL	_putch
040C79 C1                  A  3975    	POP	BC
                           A  3976    ;  389		putch(0);	// VDP command
                           A  3977    .LINE 389
                           A  3978    
040C7A 01000000            A  3979    	LD	BC,0
040C7E C5                  A  3980    	PUSH	BC
040C7F CD 28 0E 04         A  3981    	CALL	_putch
040C83 C1                  A  3982    	POP	BC
                           A  3983    ;  390		putch(2);	// Request cursor posit
                           A  3984    .LINE 390
                           A  3985    
040C84 01020000            A  3986    	LD	BC,2
040C88 C5                  A  3987    	PUSH	BC
040C89 CD 28 0E 04         A  3988    	CALL	_putch
040C8D C1                  A  3989    	POP	BC
                           A  3990    ;  391		
                           A  3991    ;  392		delay = 255;
                           A  3992    .LINE 392
                           A  3993    
040C8E 01FF0000            A  3994    	LD	BC,255
040C92 DD0FFD              A  3995    	LD	(IX+%FFFFFFFD),BC
                           A  3996    ;  393		while(delay--);
040C95                     A  3997    L_59:
                           A  3998    .LINE 393
                           A  3999    
040C95 DD27FD              A  4000    	LD	HL,(IX+%FFFFFFFD)
040C98 DD31FD              A  4001    	LD	IY,(IX+%FFFFFFFD)
040C9B ED33FF              A  4002    	LEA	IY,IY+%FFFFFFFF
040C9E DD3EFD              A  4003    	LD	(IX+%FFFFFFFD),IY
040CA1 CD 90 11 04         A  4004    	CALL	__icmpzero
040CA5 20 ED 00            A  4005    	JR	NZ,L_59
                           A  4006    ;  394		return(getsysvar8bit(sysvar_cursorX
                           A  4007    .LINE 394
                           A  4008    
040CA8 01070000            A  4009    	LD	BC,7
040CAC C5                  A  4010    	PUSH	BC
040CAD CD 6A 0E 04         A  4011    	CALL	_getsysvar8bit
040CB1 C1                  A  4012    	POP	BC
                           A  4013    ;  395	}
                           A  4014    .LINE 395
                           A  4015    
040CB2 DDF9                A  4016    	LD	SP,IX
040CB4 DDE1                A  4017    	POP	IX
040CB6 C9                  A  4018    	RET	
                           A  4019    
                           A  4020    
                           A  4021    ;**************************** _vdp_cursorGetXpo
                           A  4022    ;Name                         Addr/Register   S
                           A  4023    ;_getsysvar8bit                      IMPORT  --
                           A  4024    ;_putch                              IMPORT  --
                           A  4025    ;delay                                 IX-3    
                           A  4026    
                           A  4027    
                           A  4028    ; Stack Frame Size: 9 (bytes)
                           A  4029    ;       Spill Code: 0 (instruction)
                           A  4030    
                           A  4031    
                           A  4032    .ENDFUNC "vdp_cursorGetXpos",395,"_vdp_cursorGe
                           A  4033    ;  396	
                           A  4034    ;  397	UINT8 vdp_cursorGetYpos(void)
                           A  4035    ;  398	{
040CB7                     A  4036    _vdp_cursorGetYpos:
                           A  4037    .DEFINE "_vdp_cursorGetYpos"
                           A  4038    
                           A  4039    .VALUE _vdp_cursorGetYpos
                           A  4040    
                           A  4041    .CLASS 2
                           A  4042    
                           A  4043    .TYPE 76
                           A  4044    
                           A  4045    .ENDEF
                           A  4046    
                           A  4047    .BEGFUNC "vdp_cursorGetYpos",398,"_vdp_cursorGe
                           A  4048    
                           A  4049    .LINE 398
                           A  4050    
                           A  4051    .DEFINE "delay"
                           A  4052    
                           A  4053    .CLASS 65
                           A  4054    
                           A  4055    .VALUE -3
                           A  4056    
                           A  4057    .TYPE 14
                           A  4058    
                           A  4059    .ENDEF
                           A  4060    
040CB7 DDE5                A  4061    	PUSH	IX
040CB9 DD210000 00         A  4062    	LD	IX,0
040CBE DD39                A  4063    	ADD	IX,SP
040CC0 C5                  A  4064    	PUSH	BC
                           A  4065    ;  399		unsigned int delay;
                           A  4066    ;  400		
                           A  4067    ;  401		putch(23);	// VDP command
                           A  4068    .LINE 401
                           A  4069    
040CC1 01170000            A  4070    	LD	BC,23
040CC5 C5                  A  4071    	PUSH	BC
040CC6 CD 28 0E 04         A  4072    	CALL	_putch
040CCA C1                  A  4073    	POP	BC
                           A  4074    ;  402		putch(0);	// VDP command
                           A  4075    .LINE 402
                           A  4076    
040CCB 01000000            A  4077    	LD	BC,0
040CCF C5                  A  4078    	PUSH	BC
040CD0 CD 28 0E 04         A  4079    	CALL	_putch
040CD4 C1                  A  4080    	POP	BC
                           A  4081    ;  403		putch(2);	// Request cursor posit
                           A  4082    .LINE 403
                           A  4083    
040CD5 01020000            A  4084    	LD	BC,2
040CD9 C5                  A  4085    	PUSH	BC
040CDA CD 28 0E 04         A  4086    	CALL	_putch
040CDE C1                  A  4087    	POP	BC
                           A  4088    ;  404		
                           A  4089    ;  405		delay = 255;
                           A  4090    .LINE 405
                           A  4091    
040CDF 01FF0000            A  4092    	LD	BC,255
040CE3 DD0FFD              A  4093    	LD	(IX+%FFFFFFFD),BC
                           A  4094    ;  406		while(delay--);
040CE6                     A  4095    L_64:
                           A  4096    .LINE 406
                           A  4097    
040CE6 DD27FD              A  4098    	LD	HL,(IX+%FFFFFFFD)
040CE9 DD31FD              A  4099    	LD	IY,(IX+%FFFFFFFD)
040CEC ED33FF              A  4100    	LEA	IY,IY+%FFFFFFFF
040CEF DD3EFD              A  4101    	LD	(IX+%FFFFFFFD),IY
040CF2 CD 90 11 04         A  4102    	CALL	__icmpzero
040CF6 20 ED 00            A  4103    	JR	NZ,L_64
                           A  4104    ;  407		return(getsysvar8bit(sysvar_cursorY
                           A  4105    .LINE 407
                           A  4106    
040CF9 01080000            A  4107    	LD	BC,8
040CFD C5                  A  4108    	PUSH	BC
040CFE CD 6A 0E 04         A  4109    	CALL	_getsysvar8bit
040D02 C1                  A  4110    	POP	BC
                           A  4111    ;  408	}
                           A  4112    .LINE 408
                           A  4113    
040D03 DDF9                A  4114    	LD	SP,IX
040D05 DDE1                A  4115    	POP	IX
040D07 C9                  A  4116    	RET	
                           A  4117    
                           A  4118    
                           A  4119    ;**************************** _vdp_cursorGetYpo
                           A  4120    ;Name                         Addr/Register   S
                           A  4121    ;_getsysvar8bit                      IMPORT  --
                           A  4122    ;_putch                              IMPORT  --
                           A  4123    ;delay                                 IX-3    
                           A  4124    
                           A  4125    
                           A  4126    ; Stack Frame Size: 9 (bytes)
                           A  4127    ;       Spill Code: 0 (instruction)
                           A  4128    
                           A  4129    
                           A  4130    .ENDFUNC "vdp_cursorGetYpos",408,"_vdp_cursorGe
                           A  4131    ;  409	
                           A  4132    ;  410	char vdp_asciiCodeAt(unsigned char x, u
                           A  4133    ;  411	{
040D08                     A  4134    _vdp_asciiCodeAt:
                           A  4135    .DEFINE "_vdp_asciiCodeAt"
                           A  4136    
                           A  4137    .VALUE _vdp_asciiCodeAt
                           A  4138    
                           A  4139    .CLASS 2
                           A  4140    
                           A  4141    .TYPE 66
                           A  4142    
                           A  4143    .ENDEF
                           A  4144    
                           A  4145    .BEGFUNC "vdp_asciiCodeAt",411,"_vdp_asciiCodeA
                           A  4146    
                           A  4147    .LINE 411
                           A  4148    
                           A  4149    .DEFINE "x"
                           A  4150    
                           A  4151    .CLASS 65
                           A  4152    
                           A  4153    .VALUE 6
                           A  4154    
                           A  4155    .TYPE 12
                           A  4156    
                           A  4157    .ENDEF
                           A  4158    
                           A  4159    .DEFINE "y"
                           A  4160    
                           A  4161    .CLASS 65
                           A  4162    
                           A  4163    .VALUE 9
                           A  4164    
                           A  4165    .TYPE 12
                           A  4166    
                           A  4167    .ENDEF
                           A  4168    
                           A  4169    .DEFINE "delay"
                           A  4170    
                           A  4171    .CLASS 65
                           A  4172    
                           A  4173    .VALUE -3
                           A  4174    
                           A  4175    .TYPE 14
                           A  4176    
                           A  4177    .ENDEF
                           A  4178    
040D08 DDE5                A  4179    	PUSH	IX
040D0A DD210000 00         A  4180    	LD	IX,0
040D0F DD39                A  4181    	ADD	IX,SP
040D11 C5                  A  4182    	PUSH	BC
                           A  4183    ;  412		unsigned int delay;
                           A  4184    ;  413		
                           A  4185    ;  414		putch(23);	// VDP command
                           A  4186    .LINE 414
                           A  4187    
040D12 01170000            A  4188    	LD	BC,23
040D16 C5                  A  4189    	PUSH	BC
040D17 CD 28 0E 04         A  4190    	CALL	_putch
040D1B C1                  A  4191    	POP	BC
                           A  4192    ;  415		putch(0);	// VDP command
                           A  4193    .LINE 415
                           A  4194    
040D1C 01000000            A  4195    	LD	BC,0
040D20 C5                  A  4196    	PUSH	BC
040D21 CD 28 0E 04         A  4197    	CALL	_putch
040D25 C1                  A  4198    	POP	BC
                           A  4199    ;  416		putch(3);	// Request ascii code a
                           A  4200    .LINE 416
                           A  4201    
040D26 01030000            A  4202    	LD	BC,3
040D2A C5                  A  4203    	PUSH	BC
040D2B CD 28 0E 04         A  4204    	CALL	_putch
040D2F C1                  A  4205    	POP	BC
                           A  4206    ;  417		putch(x);
                           A  4207    .LINE 417
                           A  4208    
040D30 DD7E06              A  4209    	LD	A,(IX+%6)
040D33 B7ED62              A  4210    	UEXT	HL
040D36 6F                  A  4211    	LD	L,A
040D37 E5                  A  4212    	PUSH	HL
040D38 CD 28 0E 04         A  4213    	CALL	_putch
040D3C C1                  A  4214    	POP	BC
                           A  4215    ;  418		putch(0);
                           A  4216    .LINE 418
                           A  4217    
040D3D 01000000            A  4218    	LD	BC,0
040D41 C5                  A  4219    	PUSH	BC
040D42 CD 28 0E 04         A  4220    	CALL	_putch
040D46 C1                  A  4221    	POP	BC
                           A  4222    ;  419		putch(y);
                           A  4223    .LINE 419
                           A  4224    
040D47 DD7E09              A  4225    	LD	A,(IX+%9)
040D4A B7ED62              A  4226    	UEXT	HL
040D4D 6F                  A  4227    	LD	L,A
040D4E E5                  A  4228    	PUSH	HL
040D4F CD 28 0E 04         A  4229    	CALL	_putch
040D53 C1                  A  4230    	POP	BC
                           A  4231    ;  420		putch(0);
                           A  4232    .LINE 420
                           A  4233    
040D54 01000000            A  4234    	LD	BC,0
040D58 C5                  A  4235    	PUSH	BC
040D59 CD 28 0E 04         A  4236    	CALL	_putch
040D5D C1                  A  4237    	POP	BC
                           A  4238    ;  421		
                           A  4239    ;  422		delay = 64000;
                           A  4240    .LINE 422
                           A  4241    
040D5E 0100FA00            A  4242    	LD	BC,64000
040D62 DD0FFD              A  4243    	LD	(IX+%FFFFFFFD),BC
                           A  4244    ;  423		while(delay--);
040D65                     A  4245    L_69:
                           A  4246    .LINE 423
                           A  4247    
040D65 DD27FD              A  4248    	LD	HL,(IX+%FFFFFFFD)
040D68 DD31FD              A  4249    	LD	IY,(IX+%FFFFFFFD)
040D6B ED33FF              A  4250    	LEA	IY,IY+%FFFFFFFF
040D6E DD3EFD              A  4251    	LD	(IX+%FFFFFFFD),IY
040D71 CD 90 11 04         A  4252    	CALL	__icmpzero
040D75 20 ED 00            A  4253    	JR	NZ,L_69
                           A  4254    ;  424		return(getsysvar8bit(sysvar_scrchar
                           A  4255    .LINE 424
                           A  4256    
040D78 01090000            A  4257    	LD	BC,9
040D7C C5                  A  4258    	PUSH	BC
040D7D CD 6A 0E 04         A  4259    	CALL	_getsysvar8bit
040D81 C1                  A  4260    	POP	BC
                           A  4261    ;  425	}
                           A  4262    .LINE 425
                           A  4263    
040D82 DDF9                A  4264    	LD	SP,IX
040D84 DDE1                A  4265    	POP	IX
040D86 C9                  A  4266    	RET	
                           A  4267    
                           A  4268    
                           A  4269    ;**************************** _vdp_asciiCodeAt 
                           A  4270    ;Name                         Addr/Register   S
                           A  4271    ;_getsysvar8bit                      IMPORT  --
                           A  4272    ;_putch                              IMPORT  --
                           A  4273    ;delay                                 IX-3    
                           A  4274    ;y                                     IX+9    
                           A  4275    ;x                                     IX+6    
                           A  4276    
                           A  4277    
                           A  4278    ; Stack Frame Size: 15 (bytes)
                           A  4279    ;       Spill Code: 0 (instruction)
                           A  4280    
                           A  4281    
                           A  4282    .ENDFUNC "vdp_asciiCodeAt",425,"_vdp_asciiCodeA
                           A  4283    ;  426	
                           A  4284    ;  427	void vdp_cursorDisable(void)
                           A  4285    ;  428	{
040D87                     A  4286    _vdp_cursorDisable:
                           A  4287    .DEFINE "_vdp_cursorDisable"
                           A  4288    
                           A  4289    .VALUE _vdp_cursorDisable
                           A  4290    
                           A  4291    .CLASS 2
                           A  4292    
                           A  4293    .TYPE 65
                           A  4294    
                           A  4295    .ENDEF
                           A  4296    
                           A  4297    .BEGFUNC "vdp_cursorDisable",428,"_vdp_cursorDi
                           A  4298    
040D87 DDE5                A  4299    	PUSH	IX
040D89 DD210000 00         A  4300    	LD	IX,0
040D8E DD39                A  4301    	ADD	IX,SP
                           A  4302    ;  429		putch(23);
                           A  4303    .LINE 429
                           A  4304    
040D90 01170000            A  4305    	LD	BC,23
040D94 C5                  A  4306    	PUSH	BC
040D95 CD 28 0E 04         A  4307    	CALL	_putch
040D99 C1                  A  4308    	POP	BC
                           A  4309    ;  430		putch(1);
                           A  4310    .LINE 430
                           A  4311    
040D9A 01010000            A  4312    	LD	BC,1
040D9E C5                  A  4313    	PUSH	BC
040D9F CD 28 0E 04         A  4314    	CALL	_putch
040DA3 C1                  A  4315    	POP	BC
                           A  4316    ;  431		putch(0);
                           A  4317    .LINE 431
                           A  4318    
040DA4 01000000            A  4319    	LD	BC,0
040DA8 C5                  A  4320    	PUSH	BC
040DA9 CD 28 0E 04         A  4321    	CALL	_putch
040DAD C1                  A  4322    	POP	BC
                           A  4323    ;  432	}
                           A  4324    .LINE 432
                           A  4325    
040DAE DDF9                A  4326    	LD	SP,IX
040DB0 DDE1                A  4327    	POP	IX
040DB2 C9                  A  4328    	RET	
                           A  4329    
                           A  4330    
                           A  4331    ;**************************** _vdp_cursorDisabl
                           A  4332    ;Name                         Addr/Register   S
                           A  4333    ;_putch                              IMPORT  --
                           A  4334    
                           A  4335    
                           A  4336    ; Stack Frame Size: 6 (bytes)
                           A  4337    ;       Spill Code: 0 (instruction)
                           A  4338    
                           A  4339    
                           A  4340    .ENDFUNC "vdp_cursorDisable",432,"_vdp_cursorDi
                           A  4341    ;  433	
                           A  4342    ;  434	void vdp_cursorEnable(void)
                           A  4343    ;  435	{
040DB3                     A  4344    _vdp_cursorEnable:
                           A  4345    .DEFINE "_vdp_cursorEnable"
                           A  4346    
                           A  4347    .VALUE _vdp_cursorEnable
                           A  4348    
                           A  4349    .CLASS 2
                           A  4350    
                           A  4351    .TYPE 65
                           A  4352    
                           A  4353    .ENDEF
                           A  4354    
                           A  4355    .BEGFUNC "vdp_cursorEnable",435,"_vdp_cursorEna
                           A  4356    
040DB3 DDE5                A  4357    	PUSH	IX
040DB5 DD210000 00         A  4358    	LD	IX,0
040DBA DD39                A  4359    	ADD	IX,SP
                           A  4360    ;  436		putch(23);
                           A  4361    .LINE 436
                           A  4362    
040DBC 01170000            A  4363    	LD	BC,23
040DC0 C5                  A  4364    	PUSH	BC
040DC1 CD 28 0E 04         A  4365    	CALL	_putch
040DC5 C1                  A  4366    	POP	BC
                           A  4367    ;  437		putch(1);
                           A  4368    .LINE 437
                           A  4369    
040DC6 01010000            A  4370    	LD	BC,1
040DCA C5                  A  4371    	PUSH	BC
040DCB CD 28 0E 04         A  4372    	CALL	_putch
040DCF C1                  A  4373    	POP	BC
                           A  4374    ;  438		putch(1);
                           A  4375    .LINE 438
                           A  4376    
040DD0 01010000            A  4377    	LD	BC,1
040DD4 C5                  A  4378    	PUSH	BC
040DD5 CD 28 0E 04         A  4379    	CALL	_putch
040DD9 C1                  A  4380    	POP	BC
                           A  4381    ;  439	}
                           A  4382    .LINE 439
                           A  4383    
040DDA DDF9                A  4384    	LD	SP,IX
040DDC DDE1                A  4385    	POP	IX
040DDE C9                  A  4386    	RET	
                           A  4387    
                           A  4388    
                           A  4389    ;**************************** _vdp_cursorEnable
                           A  4390    ;Name                         Addr/Register   S
                           A  4391    ;_putch                              IMPORT  --
                           A  4392    
                           A  4393    
                           A  4394    ; Stack Frame Size: 6 (bytes)
                           A  4395    ;       Spill Code: 0 (instruction)
                           A  4396    
                           A  4397    
                           A  4398    .ENDFUNC "vdp_cursorEnable",439,"_vdp_cursorEna
                           A  4399    ;  440	
                           A  4400    ;  441	void vdp_scroll(unsigned char extent, u
                           A  4401    ;  442	{
040DDF                     A  4402    _vdp_scroll:
                           A  4403    .DEFINE "_vdp_scroll"
                           A  4404    
                           A  4405    .VALUE _vdp_scroll
                           A  4406    
                           A  4407    .CLASS 2
                           A  4408    
                           A  4409    .TYPE 65
                           A  4410    
                           A  4411    .ENDEF
                           A  4412    
                           A  4413    .BEGFUNC "vdp_scroll",442,"_vdp_scroll"
                           A  4414    
                           A  4415    .LINE 442
                           A  4416    
                           A  4417    .DEFINE "extent"
                           A  4418    
                           A  4419    .CLASS 65
                           A  4420    
                           A  4421    .VALUE 6
                           A  4422    
                           A  4423    .TYPE 12
                           A  4424    
                           A  4425    .ENDEF
                           A  4426    
                           A  4427    .DEFINE "direction"
                           A  4428    
                           A  4429    .CLASS 65
                           A  4430    
                           A  4431    .VALUE 9
                           A  4432    
                           A  4433    .TYPE 12
                           A  4434    
                           A  4435    .ENDEF
                           A  4436    
                           A  4437    .DEFINE "speed"
                           A  4438    
                           A  4439    .CLASS 65
                           A  4440    
                           A  4441    .VALUE 12
                           A  4442    
                           A  4443    .TYPE 12
                           A  4444    
                           A  4445    .ENDEF
                           A  4446    
040DDF DDE5                A  4447    	PUSH	IX
040DE1 DD210000 00         A  4448    	LD	IX,0
040DE6 DD39                A  4449    	ADD	IX,SP
                           A  4450    ;  443		putch(23);
                           A  4451    .LINE 443
                           A  4452    
040DE8 01170000            A  4453    	LD	BC,23
040DEC C5                  A  4454    	PUSH	BC
040DED CD 28 0E 04         A  4455    	CALL	_putch
040DF1 C1                  A  4456    	POP	BC
                           A  4457    ;  444		putch(7);	// scroll
                           A  4458    .LINE 444
                           A  4459    
040DF2 01070000            A  4460    	LD	BC,7
040DF6 C5                  A  4461    	PUSH	BC
040DF7 CD 28 0E 04         A  4462    	CALL	_putch
040DFB C1                  A  4463    	POP	BC
                           A  4464    ;  445		putch(extent);
                           A  4465    .LINE 445
                           A  4466    
040DFC DD7E06              A  4467    	LD	A,(IX+%6)
040DFF B7ED62              A  4468    	UEXT	HL
040E02 6F                  A  4469    	LD	L,A
040E03 E5                  A  4470    	PUSH	HL
040E04 CD 28 0E 04         A  4471    	CALL	_putch
040E08 C1                  A  4472    	POP	BC
                           A  4473    ;  446		putch(direction);
                           A  4474    .LINE 446
                           A  4475    
040E09 DD7E09              A  4476    	LD	A,(IX+%9)
040E0C B7ED62              A  4477    	UEXT	HL
040E0F 6F                  A  4478    	LD	L,A
040E10 E5                  A  4479    	PUSH	HL
040E11 CD 28 0E 04         A  4480    	CALL	_putch
040E15 C1                  A  4481    	POP	BC
                           A  4482    ;  447		putch(speed);
                           A  4483    .LINE 447
                           A  4484    
040E16 DD7E0C              A  4485    	LD	A,(IX+%C)
040E19 B7ED62              A  4486    	UEXT	HL
040E1C 6F                  A  4487    	LD	L,A
040E1D E5                  A  4488    	PUSH	HL
040E1E CD 28 0E 04         A  4489    	CALL	_putch
040E22 C1                  A  4490    	POP	BC
                           A  4491    .LINE 448
                           A  4492    
040E23 DDF9                A  4493    	LD	SP,IX
040E25 DDE1                A  4494    	POP	IX
040E27 C9                  A  4495    	RET	
                           A  4496    
                           A  4497    
                           A  4498    ;**************************** _vdp_scroll *****
                           A  4499    ;Name                         Addr/Register   S
                           A  4500    ;_putch                              IMPORT  --
                           A  4501    ;speed                                IX+12    
                           A  4502    ;direction                             IX+9    
                           A  4503    ;extent                                IX+6    
                           A  4504    
                           A  4505    
                           A  4506    ; Stack Frame Size: 15 (bytes)
                           A  4507    ;       Spill Code: 0 (instruction)
                           A  4508    
                           A  4509    
                           A  4510    .ENDFUNC "vdp_scroll",448,"_vdp_scroll"
                           A  4511    	XREF _getsysvar8bit:ROM
                           A  4512    	XREF _putch:ROM
                           A  4513    	XREF __imuls:ROM
                           A  4514    	XREF __lshru:ROM
                           A  4515    	XREF __stoiu:ROM
                           A  4516    	XREF __icmpzero:ROM
                           A  4517    	XREF __ishru_b:ROM
                           A  4518    	XREF __ishrs_b:ROM
                           A  4519    	XDEF _vdp_scroll
                           A  4520    	XDEF _vdp_cursorEnable
                           A  4521    	XDEF _vdp_cursorDisable
                           A  4522    	XDEF _vdp_asciiCodeAt
                           A  4523    	XDEF _vdp_cursorGetYpos
                           A  4524    	XDEF _vdp_cursorGetXpos
                           A  4525    	XDEF _vdp_spriteRefresh
                           A  4526    	XDEF _vdp_spriteActivateTotal
                           A  4527    	XDEF _vdp_spriteMoveBy
                           A  4528    	XDEF _vdp_spriteMoveBySelected
                           A  4529    	XDEF _vdp_spriteMoveTo
                           A  4530    	XDEF _vdp_spriteMoveToSelected
                           A  4531    	XDEF _vdp_spriteHide
                           A  4532    	XDEF _vdp_spriteHideSelected
                           A  4533    	XDEF _vdp_spriteShow
                           A  4534    	XDEF _vdp_spriteShowSelected
                           A  4535    	XDEF _vdp_spriteSetFrame
                           A  4536    	XDEF _vdp_spriteSetFrameSelected
                           A  4537    	XDEF _vdp_spritePreviousFrame
                           A  4538    	XDEF _vdp_spritePreviousFrameSelected
                           A  4539    	XDEF _vdp_spriteNextFrame
                           A  4540    	XDEF _vdp_spriteNextFrameSelected
                           A  4541    	XDEF _vdp_spriteAddFrame
                           A  4542    	XDEF _vdp_spriteAddFrameSelected
                           A  4543    	XDEF _vdp_spriteClearFrames
                           A  4544    	XDEF _vdp_spriteClearFramesSelected
                           A  4545    	XDEF _vdp_spriteSelect
                           A  4546    	XDEF _vdp_bitmapCreateSolidColor
                           A  4547    	XDEF _vdp_bitmapCreateSolidColorSelected
                           A  4548    	XDEF _vdp_bitmapDraw
                           A  4549    	XDEF _vdp_bitmapDrawSelected
                           A  4550    	XDEF _vdp_bitmapSendData
                           A  4551    	XDEF _vdp_bitmapSendDataSelected
                           A  4552    	XDEF _vdp_bitmapSelect
                           A  4553    	XDEF _vdp_plotSetOrigin
                           A  4554    	XDEF _vdp_plotCircleCircumference
                           A  4555    	XDEF _vdp_plotCircleRadius
                           A  4556    	XDEF _vdp_plotTriangle
                           A  4557    	XDEF _vdp_plotPoint
                           A  4558    	XDEF _vdp_plotLineTo
                           A  4559    	XDEF _vdp_plotMoveTo
                           A  4560    	XDEF _vdp_plot
                           A  4561    	XDEF _vdp_plotColour
                           A  4562    	XDEF _vdp_clearGraphics
                           A  4563    	XDEF _vdp_bgcolour
                           A  4564    	XDEF _vdp_fgcolour
                           A  4565    	XDEF _vdp_colour
                           A  4566    	XDEF _vdp_cursorGoto
                           A  4567    	XDEF _vdp_cursorUp
                           A  4568    	XDEF _vdp_cursorHome
                           A  4569    	XDEF _vdp_cls
                           A  4570    	XDEF _vdp_mode
                           A  4571    	XDEF _write32bit
                           A  4572    	XDEF _write16bit
                           A  4573    	END


Errors: 0
Warnings: 0
Lines Assembled: 4574
